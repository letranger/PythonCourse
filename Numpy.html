<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-02-11 Tue 09:46 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Numpy</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Yung Chin, Yen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../css/muse.css" />
<script src="../css/copy_code.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Numpy</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb9c8328">1. What and How</a>
<ul>
<li><a href="#org63d98f7">1.1. Numpy 簡介</a></li>
<li><a href="#org62ec618">1.2. 使用 Numpy 模組</a></li>
</ul>
</li>
<li><a href="#org5c026fd">2. NumPy 陣列</a>
<ul>
<li><a href="#org6628226">2.1. NDArray</a></li>
<li><a href="#org26d2436">2.2. 陣列? 矩陣?</a></li>
<li><a href="#org2aee40c">2.3. 建立 ndarray</a></li>
<li><a href="#org5e0398d">2.4. 匯入/匯出</a></li>
<li><a href="#org773ce20">2.5. 自行研究</a></li>
<li><a href="#org48fe5b9">2.6. [課堂練習]陣列生成&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></a></li>
</ul>
</li>
<li><a href="#org87daf42">3. 陣列運算</a>
<ul>
<li><a href="#org4ef111b">3.1. Numpy 計算時間比較</a></li>
<li><a href="#orgc105384">3.2. 陣列走訪(traversal)</a></li>
<li><a href="#org0e236c5">3.3. [課堂練習]成績模擬&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></a></li>
<li><a href="#orgdb508d6">3.4. 陣列運算</a></li>
<li><a href="#orgc7ca00b">3.5. [課堂練習]分數修改&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></a></li>
</ul>
</li>
<li><a href="#org28d579e">4. 陣列函數</a>
<ul>
<li><a href="#org253a053">4.1. numpy.sum()</a></li>
<li><a href="#org3a216af">4.2. sum() v.s. np.sum()</a></li>
<li><a href="#orgea36409">4.3. 其他常用函數</a></li>
<li><a href="#org85acfc7">4.4. 差不多? 很重要!: numpy.allclose</a></li>
<li><a href="#org6ed141c">4.5. [作業 1]成績計算&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></a></li>
<li><a href="#orga03ddbc">4.6. [作業 2]Z 分數&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></a></li>
<li><a href="#org820093b">4.7. 解聯立方程式</a></li>
<li><a href="#orgd123aa7">4.8. numpy 陣列間的運算</a></li>
</ul>
</li>
<li><a href="#org4d4cf3c">5. Numpy 檔案輸出輸入</a>
<ul>
<li><a href="#orgd1d4415">5.1. Numpy v.s. 外部檔案</a></li>
<li><a href="#org0ae0650">5.2. 不同格式</a></li>
<li><a href="#org79dc56e">5.3. Bineary Format</a></li>
<li><a href="#org4594191">5.4. 讀取混合格式的文字資料</a></li>
<li><a href="#orgfd92caa">5.5. 讀取一個欄位資料</a></li>
<li><a href="#org6fbca00">5.6. Binary Format  </a></li>
<li><a href="#orge9848b2">5.7. 由網路讀取資料</a></li>
</ul>
</li>
<li><a href="#risktopickles">6. 允許使用 pickles 的潛在風險</a>
<ul>
<li><a href="#org8f5d3e5">6.1. 安全範例</a></li>
<li><a href="#orgb36d715">6.2. 危險範例(npy)</a></li>
<li><a href="#orga634ce1">6.3. 危險範例(pickle)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<a href="https://letranger.github.io/PythonCourse/Numpy.html"><img align="right" alt="Hits" src="https://hits.sh/letranger.github.io/PythonCourse/Numpy.html.svg?style=plastic"/></a>
<div id="outline-container-orgb9c8328" class="outline-2">
<h2 id="orgb9c8328"><span class="section-number-2">1</span> What and How</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org63d98f7" class="outline-3">
<h3 id="org63d98f7"><span class="section-number-3">1.1</span> Numpy 簡介</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>NumPy 是 Python 語言的一個擴充程式庫。支援高階大量的維度陣列與矩陣運算，此外也針對陣列運算提供大量的數學函式函式庫。<br /></li>
<li>Numpy 主要用於資料處理上。Numpy 底層以 C 和 Fortran 語言實作，所以能快速操作多重維度的陣列。<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup><br /></li>
<li>當 Python 處理龐大資料時，其原生 list 效能表現並不理想（但可以動態存異質資料），而 Numpy 具備平行處理的能力，可以將操作動作一次套用在大型陣列上。<br /></li>
<li>Python 多數重量級的資料科學相關套件（例如：Pandas、SciPy、Scikit-learn 等）都幾乎是奠基在 Numpy 的基礎上。因此學會 Numpy 對於往後學習其他資料科學相關套件打好堅實的基礎。<br /></li>
<li>NumPy 的前身 Numeric 最早是由 Jim Hugunin 與其它協作者共同開發，2005 年，Travis Oliphant 在 Numeric 中結合了另一個同性質的程式庫 Numarray 的特色，並加入了其它擴充功能而開發了 NumPy。NumPy 為開放原始碼並且由許多協作者共同維護開發。<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup><br /></li>
<li>延伸閱讀:<br />
<ul class="org-ul">
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#">NumPy官網</a><br /></li>
<li><a href="https://hsinchengchao.medium.com/%E7%82%BA%E4%BB%80%E9%BA%BC%E8%A6%81%E7%94%A8-numpy-c829e0049977">為什麼要用 Numpy？</a><br /></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org62ec618" class="outline-3">
<h3 id="org62ec618"><span class="section-number-3">1.2</span> 使用 Numpy 模組</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-org34b982a" class="outline-4">
<h4 id="org34b982a"><span class="section-number-4">1.2.1</span> 安裝</h4>
<div class="outline-text-4" id="text-1-2-1">
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span>pip install numpy
</pre>
</div>
</div>
<div id="outline-container-org0938431" class="outline-5">
<h5 id="org0938431">PyCharm</h5>
<div class="outline-text-5" id="text-org0938431">

<div id="org21fbf48" class="figure">
<p><img src="images/NumPy/2023-02-13_10-26-12_2023-02-13_10-24-46.png" alt="2023-02-13_10-26-12_2023-02-13_10-24-46.png" width="500" /><br />
</p>
<p><span class="figure-number">Figure 1: </span>PyCharm</p>
</div>
</div>
</div>
<div id="outline-container-org2943a39" class="outline-5">
<h5 id="org2943a39">Colab</h5>
<div class="outline-text-5" id="text-org2943a39">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>!pip install numpy
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org40b242e" class="outline-4">
<h4 id="org40b242e"><span class="section-number-4">1.2.2</span> 匯入</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>使用模組裡的函式要加模組名稱<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ffb86c;">import</span> numpy
</pre>
</div>
<ul class="org-ul">
<li>匯入 numpy 模組並使用 np 作為簡寫，這是 Numpy 官方倡導的寫法<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org5c026fd" class="outline-2">
<h2 id="org5c026fd"><span class="section-number-2">2</span> NumPy 陣列</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org6628226" class="outline-3">
<h3 id="org6628226"><span class="section-number-3">2.1</span> NDArray</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>Numpy 中的一維 ndarray 稱為 vector(向量)<br /></li>
<li>Numpy 中的多維資料型別稱為 ndarray(陣列)<br /></li>
<li>Numpy 的重點在於陣列的操作，其所有功能特色都建築在同質且多重維度的 ndarray（N-dimensional array）上。<br /></li>
<li><p>
axis 0, axis 1, axis 2:<br />
</p>
<ul class="org-ul">
<li>一維時 axis 0 為 x 軸<br /></li>
<li>二維時 axis 0 為 y 軸<br /></li>
</ul>

<div id="org01652b8" class="figure">
<p><img src="images/NumPy/aryaxis.jpg" alt="aryaxis.jpg" width="300" /><br />
</p>
<p><span class="figure-number">Figure 2: </span>Axis in ndarray</p>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org26d2436" class="outline-3">
<h3 id="org26d2436"><span class="section-number-3">2.2</span> 陣列? 矩陣?</h3>
<div class="outline-text-3" id="text-2-2">
<p>
在這裡我把 numpy 的 ndarray 稱為陣列而非矩陣，因為 numpy 裡另有一種 matrix(矩陣)的資料型態，二者的差異如下<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup><br />
</p>
</div>
<div id="outline-container-org53ae401" class="outline-4">
<h4 id="org53ae401"><span class="section-number-4">2.2.1</span> 結構與維度</h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li>ndarray：ndarray 是 NumPy 的核心數據結構，它可以是多維數組，不局限於二維。可以是一維、二維、甚至更高維的數據結構。<br /></li>
<li>matrix：matrix 是一種專門為線性代數設計的二維數據結構。無論輸入的數據形狀如何，matrix 永遠是二維的。即使是一維向量，轉換為 matrix 後也會被視作一個二維矩陣。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgb814d0c" class="outline-4">
<h4 id="orgb814d0c"><span class="section-number-4">2.2.2</span> 操作符行為差異</h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li>ndarray：ndarray 的 * 操作符執行的是元素對應相乘（element-wise multiplication），這適用於所有數組維度。<br /></li>
<li>matrix：matrix 的 * 操作符執行的是矩陣乘法，即線性代數中的點積(dot)操作。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgbb32e38" class="outline-4">
<h4 id="orgbb32e38"><span class="section-number-4">2.2.3</span> 示例</h4>
<div class="outline-text-4" id="text-2-2-3">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#20351;&#29992; ndarray</span>
<span class="linenr"> 4: </span><span style="color: #ff5c57;">A</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>], [<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>]])
<span class="linenr"> 5: </span><span style="color: #ff5c57;">B</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>]])
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=== A ==='</span>)
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(A)
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=== B ==='</span>)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(B)
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=== A * B ==='</span>)
<span class="linenr">12: </span><span style="color: #ffb86c;">print</span>(A * B)  <span style="color: #606580;"># </span><span style="color: #606580;">&#20803;&#32032;&#23565;&#25033;&#30456;&#20056;</span>
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#20351;&#29992; matrix</span>
<span class="linenr">15: </span><span style="color: #ff5c57;">A_matrix</span> = np.matrix([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>], [<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>]])
<span class="linenr">16: </span><span style="color: #ff5c57;">B_matrix</span> = np.matrix([[<span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>]])
<span class="linenr">17: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=== A_matrix * B_matrix ==='</span>)
<span class="linenr">18: </span><span style="color: #ffb86c;">print</span>(A_matrix * B_matrix)  <span style="color: #606580;"># </span><span style="color: #606580;">&#30697;&#38499;&#20056;&#27861;</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2aee40c" class="outline-3">
<h3 id="org2aee40c"><span class="section-number-3">2.3</span> 建立 ndarray</h3>
<div class="outline-text-3" id="text-2-3">
</div>
<div id="outline-container-org9f9d4d6" class="outline-4">
<h4 id="org9f9d4d6"><span class="section-number-4">2.3.1</span> 一維陣列(vector)</h4>
<div class="outline-text-4" id="text-2-3-1">
</div>
<div id="outline-container-orgde2c809" class="outline-5">
<h5 id="orgde2c809">可以將 python 的 list 或 tuple 轉成 numpy ndarray</h5>
<div class="outline-text-5" id="text-orgde2c809">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">np1</span> = np.array( [<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>] )
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(np1)
</pre>
</div>

<pre class="example">
[1 2 3 4]
</pre>
</div>
</div>
<div id="outline-container-orgeca604c" class="outline-5">
<h5 id="orgeca604c">使用 np.arange( ) 方法</h5>
<div class="outline-text-5" id="text-orgeca604c">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">np2</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">5</span>)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====np2====="</span>)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(np2)
<span class="linenr">6: </span><span style="color: #ff5c57;">np3</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">0.5</span>)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====np3====="</span>)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(np3)
</pre>
</div>

<pre class="example">
=====np2=====
[0 1 2 3 4]
=====np3=====
[1.  1.5 2.  2.5 3.  3.5]
</pre>
</div>
</div>
<div id="outline-container-org52d7cef" class="outline-5">
<h5 id="org52d7cef">np.arange() v.s. range()</h5>
<div class="outline-text-5" id="text-org52d7cef">
<p>
差異：<br />
</p>
<ul class="org-ul">
<li>range()為 python 內建函數<br /></li>
<li>range()return 的是 range object，而 np.nrange() return 的是 numpy.ndarray()<br /></li>
<li>range()不支援 step 為小數，np.arange()支援 step 為小數<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org9653831" class="outline-5">
<h5 id="org9653831">簡單的陣列運算</h5>
<div class="outline-text-5" id="text-org9653831">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">np1</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>])
<span class="linenr">3: </span><span style="color: #ff5c57;">np2</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>])
<span class="linenr">4: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#38499;&#21015;&#30456;&#21152;</span>
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(np1 + np2) <span style="color: #606580;"># </span><span style="color: #606580;">[4 6 8]</span>
<span class="linenr">6: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#39023;&#31034;&#30456;&#38364;&#36039;&#35338;</span>
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(np1.ndim, np1.shape, np1.dtype)
</pre>
</div>

<pre class="example">
[4 6 8]
1 (3,) int64
</pre>
</div>
</div>
</div>
<div id="outline-container-org6d2cde5" class="outline-4">
<h4 id="org6d2cde5"><span class="section-number-4">2.3.2</span> 二維陣列</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
於陣列人指定 x 軸或 y 軸:<br />
</p>
<ul class="org-ul">
<li>1 維時 axis 0 為 x 軸<br /></li>
<li>2 維時 axis 0 為 y 軸<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">np4</span> = np.array( [[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>], [<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>]] )
<span class="linenr"> 4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"shape:"</span>, np4.shape)
<span class="linenr"> 5: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"np4:\n"</span>, np4)
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"&#21462;&#20986;&#31532;0&#21015;(row):"</span>,np4[<span style="color: #f3f99d; font-weight: bold;">0</span>])
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"&#21462;&#20986;&#31532;0&#34892;(column):"</span>,np4[:, <span style="color: #f3f99d; font-weight: bold;">0</span>])
<span class="linenr"> 8: </span><span style="color: #ff5c57;">np5</span> = np.array([np.arange(<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">10</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>), np.arange(<span style="color: #f3f99d; font-weight: bold;">10</span>, <span style="color: #f3f99d; font-weight: bold;">20</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>)])
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'np5:\n'</span>, np5)
<span class="linenr">10: </span><span style="color: #ff5c57;">np6</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">8</span>).reshape(<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>)
<span class="linenr">11: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'np6:\n'</span>, np6)
<span class="linenr">12: </span><span style="color: #ffb86c;">print</span>(np6.ndim, np6.shape, np6.dtype)
</pre>
</div>
<pre class="example">
  shape: (2, 3)
  np4:
   [[1 2 4]
   [3 4 5]]
  取出第0列(row): [1 2 4]
  取出第0行(column): [1 3]
  np5:
   [[ 1  3  5  7  9]
   [10 12 14 16 18]]
  np6:
   [[0 1 2 3]
   [4 5 6 7]]
  2 (2, 4) int64
</pre>
</div>
</div>
<div id="outline-container-orgb68aefb" class="outline-4">
<h4 id="orgb68aefb"><span class="section-number-4">2.3.3</span> 多維陣列</h4>
<div class="outline-text-4" id="text-2-3-3">
<p>
如何自由的轉換陣列形狀: reshape()<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">np7</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">24</span>).reshape(<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'np7:\n'</span>,np7)
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #ff5c57;">np8</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">13</span>, <span style="color: #f3f99d; font-weight: bold;">60</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>).reshape(<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"np8:\n"</span>, np8)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(np8.ndim, np8.shape, np8.dtype)
</pre>
</div>

<pre class="example">
  np7:
   [[[ 0  1  2  3]
    [ 4  5  6  7]
    [ 8  9 10 11]]

   [[12 13 14 15]
    [16 17 18 19]
    [20 21 22 23]]]
  np8:
   [[[13 15 17 19]
    [21 23 25 27]
    [29 31 33 35]]

   [[37 39 41 43]
    [45 47 49 51]
    [53 55 57 59]]]
  3 (2, 3, 4) int64
</pre>
</div>
</div>
<div id="outline-container-org35ec540" class="outline-4">
<h4 id="org35ec540"><span class="section-number-4">2.3.4</span> 隨機陣列</h4>
<div class="outline-text-4" id="text-2-3-4">
</div>
<div id="outline-container-org00b3f6a" class="outline-5">
<h5 id="org00b3f6a">numpy.random.randint()</h5>
<div class="outline-text-5" id="text-org00b3f6a">
<p>
語法：numpy.random.randint(low, high=None, size=None, dtype=&rsquo;l&rsquo;)<br />
</p>

<p>
函式的作用是，返回一個隨機整型數，範圍從低（包括）到高（不包括），即[low, high)。<br />
如果沒有寫引數 high 的值，則返回[0,low)的值。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>np.random.seed(<span style="color: #f3f99d; font-weight: bold;">0</span>)
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #ff5c57;">x1</span> = np.random.randint(<span style="color: #f3f99d; font-weight: bold;">10</span>, size=<span style="color: #f3f99d; font-weight: bold;">6</span>)
<span class="linenr">5: </span><span style="color: #ff5c57;">x2</span> = np.random.randint(<span style="color: #f3f99d; font-weight: bold;">10</span>, size=(<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>))
<span class="linenr">6: </span><span style="color: #ff5c57;">x3</span> = np.random.randint(<span style="color: #f3f99d; font-weight: bold;">10</span>, size=(<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>))
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(x1)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(x2)
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(x3)
</pre>
</div>

<pre class="example">
[5 0 3 3 7 9]
[[3 5 2 4]
 [7 6 8 8]
 [1 6 7 7]]
[[[8 1 5 9 8]
  [9 4 3 0 3]
  [5 0 2 3 8]
  [1 3 3 3 7]]

 [[0 1 9 9 0]
  [4 7 3 2 7]
  [2 0 0 4 5]
  [5 6 8 4 1]]

 [[4 9 8 1 1]
  [7 9 9 3 6]
  [7 2 0 3 5]
  [9 4 4 6 4]]]
</pre>
</div>
</div>
<div id="outline-container-org24be978" class="outline-5">
<h5 id="org24be978">numpy.random.rand()</h5>
<div class="outline-text-5" id="text-org24be978">
<p>
根據給定維度生成(0,1)間的資料，包含 0，不包含 1<br />
</p>
</div>
<ul class="org-ul">
<li><a id="org9f490c1"></a>範例<br />
<div class="outline-text-6" id="text-org9f490c1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span>np.random.seed(<span style="color: #f3f99d; font-weight: bold;">9627</span>) <span style="color: #606580;">#</span><span style="color: #606580;">&#35373;&#32622;&#30456;&#21516;&#35722;&#25976;&#65292;&#27599;&#27425;&#29983;&#25104;&#30456;&#21516;&#20098;&#25976;</span>
<span class="linenr">4: </span><span style="color: #ff5c57;">np8</span> = np.random.random((<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>)) <span style="color: #606580;">#</span><span style="color: #606580;">&#38499;&#21015;&#22823;&#23567;&#20197;tuple&#34920;&#31034;</span>
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'np8:\n'</span>, np8)
<span class="linenr">6: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#22235;&#20491;&#20154;&#25842;&#39600;&#23376;&#65292;&#27599;&#20154;&#25842;&#20841;&#27425;</span>
<span class="linenr">7: </span><span style="color: #ff5c57;">np9</span> = np.random.randint(<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">7</span>, size=[<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>]) <span style="color: #606580;">#</span><span style="color: #606580;">&#38499;&#21015;&#22823;&#23567;&#20197;list&#34920;&#31034;</span>
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'np9:\n'</span>, np9)
</pre>
</div>

<pre class="example">
np8:
 [[0.7263954  0.71063088]
 [0.07725825 0.11562424]
 [0.57923875 0.85345365]]
np9:
 [[5 6]
 [2 2]
 [5 5]
 [5 2]]
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-org03bdb1a" class="outline-4">
<h4 id="org03bdb1a"><span class="section-number-4">2.3.5</span> 0/1 陣列</h4>
<div class="outline-text-4" id="text-2-3-5">
<ul class="org-ul">
<li><p>
np.zeros: np.zeros( (陣列各維度大小用逗號區分) )：建立全為 0 的陣列，可以小括號定義陣列的各個維度的大小<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">zeros</span> = np.zeros( (<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>) )
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"zeros=&gt;\n{0}"</span>.<span style="color: #ff6ac1;">format</span>(zeros))
</pre>
</div>
<pre class="example">
zeros=&gt;
[[0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0.]]
</pre></li>
<li><p>
np.ones: np.ones( (陣列各維度大小用逗號區分) )：用法與 np.zeros 一樣<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">ones</span> = np.ones( (<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>) )
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"oness=&gt;\n{0}"</span>.<span style="color: #ff6ac1;">format</span>(ones))
</pre>
</div>
<pre class="example">
oness=&gt;
[[1. 1. 1.]
 [1. 1. 1.]
 [1. 1. 1.]
 [1. 1. 1.]]
</pre></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5e0398d" class="outline-3">
<h3 id="org5e0398d"><span class="section-number-3">2.4</span> 匯入/匯出</h3>
<div class="outline-text-3" id="text-2-4">
</div>
<div id="outline-container-orgb496fe9" class="outline-4">
<h4 id="orgb496fe9"><span class="section-number-4">2.4.1</span> 將 ndarray 內容匯出到檔案</h4>
<div class="outline-text-4" id="text-2-4-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">ary</span> = np.random.randint(<span style="color: #f3f99d; font-weight: bold;">10</span>, size=(<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>))
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(ary)
<span class="linenr">4: </span>np.save(<span style="color: #f3f99d;">'ndarray'</span>, ary)
<span class="linenr">5: </span>np.savetxt(<span style="color: #f3f99d;">'ndarray.txt'</span>, ary)
<span class="linenr">6: </span>np.savetxt(<span style="color: #f3f99d;">'ndarray.csv'</span>, ary, delimiter=<span style="color: #f3f99d;">','</span>)
</pre>
</div>

<pre class="example">
[[2 7 3 8]
 [3 7 9 0]
 [5 4 2 6]]
</pre>


<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span><span style="color: #9aedfe;">ls</span> ndarray*
<span class="linenr">2: </span><span style="color: #9aedfe;">cat</span> ndarray.npy
<span class="linenr">3: </span><span style="color: #9aedfe;">cat</span> ndarray.txt
<span class="linenr">4: </span><span style="color: #9aedfe;">cat</span> ndarray.csv
</pre>
</div>
</div>
</div>

<div id="outline-container-org517f621" class="outline-4">
<h4 id="org517f621"><span class="section-number-4">2.4.2</span> 將資料由檔案匯入 ndarray</h4>
<div class="outline-text-4" id="text-2-4-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">ary1</span> = np.load(<span style="color: #f3f99d;">'ndarray.npy'</span>)
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(ary1)
<span class="linenr">4: </span><span style="color: #ff5c57;">ary2</span> = np.loadtxt(<span style="color: #f3f99d;">'ndarray.txt'</span>)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(ary2)
<span class="linenr">6: </span><span style="color: #ff5c57;">ary3</span> = np.loadtxt(<span style="color: #f3f99d;">'ndarray.csv'</span>, delimiter=<span style="color: #f3f99d;">','</span>)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(ary3)
</pre>
</div>

<pre class="example">
[[2 7 3 8]
 [3 7 9 0]
 [5 4 2 6]]
[[2. 7. 3. 8.]
 [3. 7. 9. 0.]
 [5. 4. 2. 6.]]
[[2. 7. 3. 8.]
 [3. 7. 9. 0.]
 [5. 4. 2. 6.]]
</pre>
</div>
</div>
</div>
<div id="outline-container-org773ce20" class="outline-3">
<h3 id="org773ce20"><span class="section-number-3">2.5</span> 自行研究</h3>
<div class="outline-text-3" id="text-2-5">
<p>
請自行 google 以下 numpy 的函數用法<br />
</p>
<ul class="org-ul">
<li>eye()<br /></li>
<li>diag()<br /></li>
<li>tile()<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#24341;&#20837; numpy &#27169;&#32068;</span>
<span class="linenr"> 2: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #606580;"># </span><span style="color: #606580;">create identity matrix</span>
<span class="linenr"> 5: </span><span style="color: #ff5c57;">ary1</span> = np.eye(<span style="color: #f3f99d; font-weight: bold;">3</span>)
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(ary1)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #606580;"># </span><span style="color: #606580;">create diagonal array</span>
<span class="linenr"> 9: </span><span style="color: #ff5c57;">ary2</span> = np.diag((<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>))
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(ary2)
<span class="linenr">11: </span><span style="color: #606580;">#</span>
<span class="linenr">12: </span><span style="color: #ff5c57;">ary3</span> = np.array([<span style="color: #ff6ac1;">range</span>(i, i+<span style="color: #f3f99d; font-weight: bold;">3</span>) <span style="color: #ffb86c;">for</span> i <span style="color: #ffb86c;">in</span> [<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>]])
<span class="linenr">13: </span><span style="color: #ffb86c;">print</span>(ary3)
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #606580;"># </span><span style="color: #606580;">tile</span>
<span class="linenr">16: </span><span style="color: #ff5c57;">ary4</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">0</span>,<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>])
<span class="linenr">17: </span><span style="color: #ffb86c;">print</span>(np.tile(ary4,<span style="color: #f3f99d; font-weight: bold;">2</span>))
<span class="linenr">18: </span><span style="color: #ffb86c;">print</span>(np.tile(ary4,(<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>)))
<span class="linenr">19: </span><span style="color: #ff5c57;">ary5</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>],[<span style="color: #f3f99d; font-weight: bold;">6</span>,<span style="color: #f3f99d; font-weight: bold;">7</span>]])
<span class="linenr">20: </span><span style="color: #ffb86c;">print</span>(np.tile(ary5,<span style="color: #f3f99d; font-weight: bold;">3</span>))
<span class="linenr">21: </span><span style="color: #ffb86c;">print</span>(np.tile(ary5,(<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>)))
</pre>
</div>

<pre class="example">
[[1. 0. 0.]
 [0. 1. 0.]
 [0. 0. 1.]]
[[2 0 0 0]
 [0 1 0 0]
 [0 0 4 0]
 [0 0 0 6]]
[[2 3 4]
 [4 5 6]
 [6 7 8]]
[0 1 2 0 1 2]
[[0 1 2 0 1 2]
 [0 1 2 0 1 2]]
[[1 2 1 2 1 2]
 [6 7 6 7 6 7]]
[[1 2 1 2]
 [6 7 6 7]
 [1 2 1 2]
 [6 7 6 7]]
</pre>
</div>
</div>
<div id="outline-container-org48fe5b9" class="outline-3">
<h3 id="org48fe5b9"><span class="section-number-3">2.6</span> [課堂練習]陣列生成&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></h3>
<div class="outline-text-3" id="text-2-6">
<p>
隨機產生一組 10*5 個 0~100 的陣列，模擬成一個班級的某次考試成績(10 人*5 科)。<br />
</p>
</div>
</div>
</div>

<div id="outline-container-org87daf42" class="outline-2">
<h2 id="org87daf42"><span class="section-number-2">3</span> 陣列運算</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org4ef111b" class="outline-3">
<h3 id="org4ef111b"><span class="section-number-3">3.1</span> Numpy 計算時間比較</h3>
<div class="outline-text-3" id="text-3-1">
<p>
自行比較以下兩個版本的執行時間<br />
</p>
</div>
<div id="outline-container-org2d290ac" class="outline-4">
<h4 id="org2d290ac"><span class="section-number-4">3.1.1</span> PyCharm</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
於 PyCharm 環境中計算時間的方式<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ffb86c;">import</span> timeit

<span style="color: #ffb86c;">print</span>(timeit.timeit(stmt=<span style="color: #f3f99d;">'import numpy as np;x = np.arange(100);x**3'</span>))
<span style="color: #ffb86c;">print</span>(timeit.timeit(stmt=<span style="color: #f3f99d;">'for i in range(100): a=i**3'</span>))
</pre>
</div>

<pre class="example">
0.8354589159716852
3.117140957969241
</pre>
</div>
</div>

<div id="outline-container-orgc6d851d" class="outline-4">
<h4 id="orgc6d851d"><span class="section-number-4">3.1.2</span> Colab</h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
於 Colab 環境中計算時間的方式<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>%timeit [i**<span style="color: #f3f99d; font-weight: bold;">3</span> <span style="color: #ffb86c;">for</span> i <span style="color: #ffb86c;">in</span> <span style="color: #ff6ac1;">range</span>(<span style="color: #f3f99d; font-weight: bold;">1000</span>)]
</pre>
</div>

<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">ar</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">1000</span>)
<span class="linenr">3: </span>%timeit ar**<span style="color: #f3f99d; font-weight: bold;">3</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc105384" class="outline-3">
<h3 id="orgc105384"><span class="section-number-3">3.2</span> 陣列走訪(traversal)</h3>
<div class="outline-text-3" id="text-3-2">
</div>
<div id="outline-container-org81d6e10" class="outline-4">
<h4 id="org81d6e10"><span class="section-number-4">3.2.1</span> vector 走訪</h4>
<div class="outline-text-4" id="text-3-2-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">arr</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">10</span>, <span style="color: #f3f99d; font-weight: bold;">20</span>, <span style="color: #f3f99d; font-weight: bold;">30</span>, <span style="color: #f3f99d; font-weight: bold;">40</span>, <span style="color: #f3f99d; font-weight: bold;">50</span>])
<span class="linenr">3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#36941;&#27511;&#12289;&#36664;&#20986;&#27599;&#20491;&#20803;&#32032;</span>
<span class="linenr">4: </span><span style="color: #ffb86c;">for</span> elem <span style="color: #ffb86c;">in</span> arr:
<span class="linenr">5: </span>    <span style="color: #ffb86c;">print</span>(elem)
</pre>
</div>

<pre class="example">
10
20
30
40
50
[ 20  40  60  80 100]
</pre>
</div>
</div>
<div id="outline-container-org63e1921" class="outline-4">
<h4 id="org63e1921"><span class="section-number-4">3.2.2</span> 二維陣列走訪</h4>
<div class="outline-text-4" id="text-3-2-2">
</div>
<div id="outline-container-org17700f3" class="outline-5">
<h5 id="org17700f3">nested for loop</h5>
<div class="outline-text-5" id="text-org17700f3">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">arr2d</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>]])
<span class="linenr"> 4: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#36941;&#27511;&#27599;&#19968;&#34892;</span>
<span class="linenr"> 5: </span><span style="color: #ffb86c;">for</span> row <span style="color: #ffb86c;">in</span> arr2d:
<span class="linenr"> 6: </span>    <span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"Row:"</span>, row)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    <span style="color: #606580;"># </span><span style="color: #606580;">&#36941;&#27511;&#34892;&#20013;&#30340;&#27599;&#20491;&#20803;&#32032;</span>
<span class="linenr"> 9: </span>    <span style="color: #ffb86c;">for</span> elem <span style="color: #ffb86c;">in</span> row:
<span class="linenr">10: </span>        <span style="color: #ffb86c;">print</span>(elem)
</pre>
</div>
</div>
</div>
<div id="outline-container-org4d6dcd7" class="outline-5">
<h5 id="org4d6dcd7">nditer</h5>
<div class="outline-text-5" id="text-org4d6dcd7">
<p>
nditer 是 NumPy 提供的一個高效遍歷多維數組的工具，可以讓我們更簡單地對多維數組進行逐元素的操作。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">arr2d</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">for</span> elem <span style="color: #ffb86c;">in</span> np.nditer(arr2d):
<span class="linenr">5: </span>    <span style="color: #ffb86c;">print</span>(elem)
</pre>
</div>

<pre class="example">
1
2
3
4
5
6
7
8
9
</pre>
</div>
</div>
<div id="outline-container-org11dea54" class="outline-5">
<h5 id="org11dea54">走訪過程中取得 index</h5>
<div class="outline-text-5" id="text-org11dea54">
</div>
<ul class="org-ul">
<li><a id="orgcf0e219"></a>常見的做法<br />
<div class="outline-text-6" id="text-orgcf0e219">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">arr2d</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>]])
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #ffb86c;">for</span> i <span style="color: #ffb86c;">in</span> <span style="color: #ff6ac1;">range</span>(<span style="color: #ff6ac1;">len</span>(arr2d)):
<span class="linenr">6: </span>    <span style="color: #ffb86c;">for</span> j <span style="color: #ffb86c;">in</span> <span style="color: #ff6ac1;">range</span>(<span style="color: #ff6ac1;">len</span>(arr2d[i])):
<span class="linenr">7: </span>        <span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"Index ({i}, {j}) - Value: {arr2d[i, j]}"</span>)
</pre>
</div>

<pre class="example">
Index (0, 0) - Value: 1
Index (0, 1) - Value: 2
Index (0, 2) - Value: 3
Index (1, 0) - Value: 4
Index (1, 1) - Value: 5
Index (1, 2) - Value: 6
Index (2, 0) - Value: 7
Index (2, 1) - Value: 8
Index (2, 2) - Value: 9
</pre>
</div>
</li>
<li><a id="org2fba295"></a>使用 ndenumerate 獲取索引<br />
<div class="outline-text-6" id="text-org2fba295">
<p>
另一種做法:<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">arr2d</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>]])
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #ffb86c;">for</span> index, elem <span style="color: #ffb86c;">in</span> np.ndenumerate(arr2d):
<span class="linenr">6: </span>    <span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"Index: {index} - Value: {elem}"</span>)
</pre>
</div>

<pre class="example">
Index: (0, 0) - Value: 1
Index: (0, 1) - Value: 2
Index: (0, 2) - Value: 3
Index: (1, 0) - Value: 4
Index: (1, 1) - Value: 5
Index: (1, 2) - Value: 6
Index: (2, 0) - Value: 7
Index: (2, 1) - Value: 8
Index: (2, 2) - Value: 9
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0e236c5" class="outline-3">
<h3 id="org0e236c5"><span class="section-number-3">3.3</span> [課堂練習]成績模擬&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>隨機產生一組 10*5 的成績陣列(20 &lt;= 分數 &lt;= 99)<br /></li>
<li>以 for 迴圈以如下格式輸出結果，最前面加上學號(從 1 號開始編號)，各成績間以 tab 相隔對齊<br /></li>
</ul>
<p>
說明: 為了確保大家在使用 numpy 隨機生成分數時能產生相同的結果，請在你的程式碼中加入這段程式。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span>np.random.seed(<span style="color: #f3f99d; font-weight: bold;">9627</span>) <span style="color: #606580;">#</span><span style="color: #606580;">&#35373;&#32622;&#30456;&#21516;&#35722;&#25976;&#65292;&#27599;&#27425;&#29983;&#25104;&#30456;&#21516;&#20098;&#25976;</span>
<span class="linenr">4: </span>
</pre>
</div>
<p>
輸出結果範例<br />
</p>
<pre class="example">
 1: 73 91 28 43 74
 2: 98 36 32 55 89
 3: 52 60 51 25 34
 4: 88 89 64 82 99
 5: 83 47 69 27 32
 6: 93 22 91 29 20
 7: 64 22 32 85 89
 8: 20 25 98 61 48
 9: 98 32 61 69 78
10: 39 42 55 90 98
</pre>
</div>
</div>
<div id="outline-container-orgdb508d6" class="outline-3">
<h3 id="orgdb508d6"><span class="section-number-3">3.4</span> 陣列運算</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<div id="outline-container-org86223ae" class="outline-4">
<h4 id="org86223ae"><span class="section-number-4">3.4.1</span> 陣列變形:reshape()</h4>
<div class="outline-text-4" id="text-3-4-1">
<ol class="org-ol">
<li>reshape()<br /></li>
<li>transpose()<br /></li>
</ol>
</div>
<div id="outline-container-org9f87779" class="outline-5">
<h5 id="org9f87779">reshape</h5>
<div class="outline-text-5" id="text-org9f87779">
<p>
reshape() 可以用來改變陣列的形狀，而不改變陣列的元素。這在處理高維數據時非常有用。以下範例將一個一維陣列重新塑造成一個 2x4 的二維陣列：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">x</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">10</span>)
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(x.reshape(<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>))
</pre>
</div>

<pre class="example">
[[2 3 4 5]
 [6 7 8 9]]
</pre>
</div>
</div>
<div id="outline-container-org0b9a6e2" class="outline-5">
<h5 id="org0b9a6e2">Flattening and Transpose</h5>
<div class="outline-text-5" id="text-org0b9a6e2">
<p>
在進行多維陣列操作時，常常需要將陣列攤平（即轉換為一維陣列, 常見於 AI 模型輸出層之前）或將陣列的行與列進行互換。NumPy 提供了兩個強大的方法來實現這些操作，分別是 ravel() 和 transpose()。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">ac</span> = np.array([np.arange(<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>),np.arange(<span style="color: #f3f99d; font-weight: bold;">10</span>,<span style="color: #f3f99d; font-weight: bold;">15</span>)])
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(ac)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(ac.ravel()) <span style="color: #606580;"># </span><span style="color: #606580;">row first</span>
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(np.ravel(ac))
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(ac.ravel(<span style="color: #f3f99d;">'F'</span>)) <span style="color: #606580;">#</span><span style="color: #606580;">column first</span>
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(np.ravel(ac, <span style="color: #f3f99d;">'F'</span>))
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(ac.T)
</pre>
</div>

<pre class="example">
[[ 1  2  3  4  5]
 [10 11 12 13 14]]
[ 1  2  3  4  5 10 11 12 13 14]
[ 1  2  3  4  5 10 11 12 13 14]
[ 1 10  2 11  3 12  4 13  5 14]
[ 1 10  2 11  3 12  4 13  5 14]
[[ 1 10]
 [ 2 11]
 [ 3 12]
 [ 4 13]
 [ 5 14]]
</pre>
</div>
</div>
<div id="outline-container-org83cd66d" class="outline-5">
<h5 id="org83cd66d">Add a dimension</h5>
<div class="outline-text-5" id="text-org83cd66d">
<p>
在將資料丟入 AI 模型訓練前，有時我們需要在陣列中添加新的維度以配合模型的輸入要求。使用 np.newaxis 可以在指定的位置新增一個維度。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">ar</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">14</span>,<span style="color: #f3f99d; font-weight: bold;">15</span>,<span style="color: #f3f99d; font-weight: bold;">16</span>])
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(ar)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(ar.shape)
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #ff5c57;">ar</span> = ar[:,np.newaxis] <span style="color: #606580;">## </span><span style="color: #606580;">&#26032;&#22686;&#19968;&#20491;&#32173;&#24230;&#65292;&#35722;&#28858; (3, 1)</span>
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(ar.shape)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(ar)
</pre>
</div>

<pre class="example">
[14 15 16]
(3,)
(3, 1)
[[14]
 [15]
 [16]]
</pre>
</div>
</div>
</div>
<div id="outline-container-org2de714c" class="outline-4">
<h4 id="org2de714c"><span class="section-number-4">3.4.2</span> 索引(Indexing)、切片(Slicing)</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
索引(Indexing)的用途不外乎就是為了要從陣列和陣列中取值，但除此之外有很多種功能！可以取出連續區間，還可以間隔取值！<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup><br />
</p>
</div>
<div id="outline-container-org1a7aa39" class="outline-5">
<h5 id="org1a7aa39">基本索引</h5>
<div class="outline-text-5" id="text-org1a7aa39">
<p>
ndarray 可以通過類似 Python 列表的方式進行索引。例如，對一個一維陣列可以通過下標來獲取元素：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21109;&#24314;&#19968;&#20491;&#19968;&#32173;&#25976;&#32068;</span>
<span class="linenr"> 4: </span><span style="color: #ff5c57;">arr</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">10</span>, <span style="color: #f3f99d; font-weight: bold;">20</span>, <span style="color: #f3f99d; font-weight: bold;">30</span>, <span style="color: #f3f99d; font-weight: bold;">40</span>, <span style="color: #f3f99d; font-weight: bold;">50</span>])
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21462;&#20986;&#31532;&#19968;&#20491;&#20803;&#32032;</span>
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(arr[<span style="color: #f3f99d; font-weight: bold;">0</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; 10</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21462;&#20986;&#26368;&#24460;&#19968;&#20491;&#20803;&#32032;</span>
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(arr[-<span style="color: #f3f99d; font-weight: bold;">1</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; 50</span>
</pre>
</div>

<p>
對於多維數組，可以使用逗號分隔不同維度的索引：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21109;&#24314;&#19968;&#20491;&#20108;&#32173;&#25976;&#32068;</span>
<span class="linenr">2: </span><span style="color: #ff5c57;">arr2d</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>]])
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21462;&#20986;&#31532;&#19968;&#34892;&#31532;&#20108;&#21015;&#30340;&#20803;&#32032;</span>
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(arr2d[<span style="color: #f3f99d; font-weight: bold;">0</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; 2</span>
<span class="linenr">6: </span>
<span class="linenr">7: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21462;&#20986;&#26368;&#24460;&#19968;&#34892;&#26368;&#24460;&#19968;&#21015;&#30340;&#20803;&#32032;</span>
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(arr2d[-<span style="color: #f3f99d; font-weight: bold;">1</span>, -<span style="color: #f3f99d; font-weight: bold;">1</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; 9</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org02be3f0" class="outline-5">
<h5 id="org02be3f0">切片</h5>
<div class="outline-text-5" id="text-org02be3f0">
<p>
與 Python 列表類似，ndarray 也可以通過切片來提取數組的子集。切片的語法:<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>ndarray([start:stop:step])
</pre>
</div>
<p>
，其中：<br />
</p>
<ul class="org-ul">
<li>start 是切片的起始索引（包含）。<br /></li>
<li>stop 是切片的結束索引（不包含）。<br /></li>
<li>step 是切片的步長（默認為 1）。<br /></li>
</ul>
</div>
<ul class="org-ul">
<li><a id="orgdc5416f"></a>一維切片<br />
<div class="outline-text-6" id="text-orgdc5416f">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">arr</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">10</span>, <span style="color: #f3f99d; font-weight: bold;">20</span>, <span style="color: #f3f99d; font-weight: bold;">30</span>, <span style="color: #f3f99d; font-weight: bold;">40</span>, <span style="color: #f3f99d; font-weight: bold;">50</span>])
<span class="linenr">3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#25552;&#21462;&#24478;&#31532;&#20108;&#20491;&#21040;&#31532;&#22235;&#20491;&#20803;&#32032;</span>
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(arr[<span style="color: #f3f99d; font-weight: bold;">1</span>:<span style="color: #f3f99d; font-weight: bold;">4</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; [20 30 40]</span>
<span class="linenr">5: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#27599;&#38548;&#19968;&#20491;&#20803;&#32032;&#25552;&#21462;</span>
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(arr[::<span style="color: #f3f99d; font-weight: bold;">2</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; [10 30 50]</span>
</pre>
</div>
</div>
</li>
<li><a id="orgf1263df"></a>二維切片<br />
<div class="outline-text-6" id="text-orgf1263df">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">arr2d</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">6</span>], [<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>]])
<span class="linenr">3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#25552;&#21462;&#21069;&#20841;&#34892;&#30340;&#21069;&#20841;&#21015;</span>
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(arr2d[:<span style="color: #f3f99d; font-weight: bold;">2</span>, :<span style="color: #f3f99d; font-weight: bold;">2</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; [[1 2]</span>
<span class="linenr">5: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#25552;&#21462;&#31532;&#20108;&#21015;</span>
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(arr2d[:, <span style="color: #f3f99d; font-weight: bold;">1</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; [2 5 8]</span>
<span class="linenr">7: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#25552;&#21462;&#26368;&#24460;&#19968;&#34892;</span>
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(arr2d[-<span style="color: #f3f99d; font-weight: bold;">1</span>, :])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; [7 8 9]</span>
</pre>
</div>
</div>
</li>
<li><a id="org26d495a"></a>條件切片<br />
<div class="outline-text-6" id="text-org26d495a">
<p>
在篩選符合條件的元素時非常有用<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">arr</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">10</span>, <span style="color: #f3f99d; font-weight: bold;">20</span>, <span style="color: #f3f99d; font-weight: bold;">30</span>, <span style="color: #f3f99d; font-weight: bold;">40</span>, <span style="color: #f3f99d; font-weight: bold;">50</span>])
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#25214;&#20986;&#25152;&#26377;&#22823;&#26044;30&#30340;&#20803;&#32032;</span>
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(arr[arr &gt; <span style="color: #f3f99d; font-weight: bold;">30</span>])  <span style="color: #606580;"># </span><span style="color: #606580;">&#36664;&#20986; [40 50]</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgf2ba430" class="outline-4">
<h4 id="orgf2ba430"><span class="section-number-4">3.4.3</span> 取出特定行列、特定範圍</h4>
<div class="outline-text-4" id="text-3-4-3">
<ul class="org-ul">
<li>取出第 x 列: Ary[x]<br /></li>
<li>取出第 x 行: Ary[:,x]<br /></li>
<li>取出第 x_{1}~x_{2}列、第 y_{1}~y_{2}行的範圍: Ary[x_{1}:x_{2} + 1, y_{1}:y_{2} + 1]<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">a</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">12</span>).reshape(<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>)
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(a[<span style="color: #f3f99d; font-weight: bold;">1</span>])
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(a[:,<span style="color: #f3f99d; font-weight: bold;">1</span>])
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(a[<span style="color: #f3f99d; font-weight: bold;">1</span>:<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>:<span style="color: #f3f99d; font-weight: bold;">3</span>])
</pre>
</div>

<pre class="example">
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
[4 5 6 7]
[1 5 9]
[[ 5  6]
 [ 9 10]]
</pre>
</div>
</div>
<div id="outline-container-org880a272" class="outline-4">
<h4 id="org880a272"><span class="section-number-4">3.4.4</span> 刪除行/列</h4>
<div class="outline-text-4" id="text-3-4-4">
<ul class="org-ul">
<li>np.delete(temp,0,axis=1)<br />
<ul class="org-ul">
<li>temp 為操作物件，<br /></li>
<li>0 表示要刪除的物件索引，<br /></li>
<li>axis 表示行還是列，axis=0 表示刪除行，axis=1 表示刪除列。<br /></li>
</ul></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">a</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">12</span>).reshape(<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>)
<span class="linenr"> 4: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr"> 5: </span><span style="color: #ff5c57;">a_delCol1</span> = np.delete(a, <span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">0</span>)
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'&#21034;&#38500;&#31532;1&#34892;'</span>)
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(a_delCol1)
<span class="linenr"> 8: </span><span style="color: #ff5c57;">a_delRow1</span> = np.delete(a, <span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'&#21034;&#38500;&#31532;1&#21015;'</span>)
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(a_delRow1)
<span class="linenr">11: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'&#29694;&#22312;&#30340;a'</span>)
<span class="linenr">12: </span><span style="color: #ffb86c;">print</span>(a)
</pre>
</div>

<pre class="example">
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
刪除第1行
[[ 0  1  2  3]
 [ 8  9 10 11]]
刪除第1列
[[ 0  2  3]
 [ 4  6  7]
 [ 8 10 11]]
現在的a
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
</pre>
</div>
</div>
<div id="outline-container-org831db46" class="outline-4">
<h4 id="org831db46"><span class="section-number-4">3.4.5</span> 基礎運算</h4>
<div class="outline-text-4" id="text-3-4-5">
</div>
<div id="outline-container-org577d7e9" class="outline-5">
<h5 id="org577d7e9">陣列間的運算</h5>
</div>
<div id="outline-container-org688d2f2" class="outline-5">
<h5 id="org688d2f2">維度相同的陣列相加、減</h5>
<div class="outline-text-5" id="text-org688d2f2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">a</span> = np.array( [<span style="color: #f3f99d; font-weight: bold;">6</span>, <span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>] )
<span class="linenr">3: </span><span style="color: #ff5c57;">b</span> = np.arange( <span style="color: #f3f99d; font-weight: bold;">4</span> )
<span class="linenr">4: </span><span style="color: #ff5c57;">c</span> = a - b
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">'a=&gt;{a}'</span>)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">'b=&gt;{b}'</span>)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">'c=&gt;{c}'</span>)
</pre>
</div>
<pre class="example">
a=&gt;[6 7 8 9]
b=&gt;[0 1 2 3]
c=&gt;[6 6 6 6]
</pre>
</div>
</div>
<div id="outline-container-org9420635" class="outline-5">
<h5 id="org9420635">陣列與常數運算</h5>
<div class="outline-text-5" id="text-org9420635">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ffb86c;">import</span> math
<span class="linenr">3: </span><span style="color: #ff5c57;">a</span> = np.random.randint(<span style="color: #f3f99d; font-weight: bold;">100</span>, size=(<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>)) <span style="color: #606580;">#</span><span style="color: #606580;">&#38499;&#21015;&#22823;&#23567;&#20197;tuple&#34920;&#31034;</span>
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #ff5c57;">b</span> = a + <span style="color: #f3f99d; font-weight: bold;">10</span>
<span class="linenr">6: </span><span style="color: #ff5c57;">c</span> = a**<span style="color: #f3f99d; font-weight: bold;">2</span>
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">'a=&gt;{a}'</span>)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">'b=&gt;{b}'</span>)
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">'c=&gt;{c}'</span>)
</pre>
</div>

<pre class="example">
a=&gt;[[54 65 64 95]
 [31 65  5 15]]
b=&gt;[[ 64  75  74 105]
 [ 41  75  15  25]]
c=&gt;[[2916 4225 4096 9025]
 [ 961 4225   25  225]]
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc25de75" class="outline-4">
<h4 id="orgc25de75"><span class="section-number-4">3.4.6</span> 陣列轉置</h4>
<div class="outline-text-4" id="text-3-4-6">
<p>
\[a=\begin{bmatrix}1&0\\2&3\end{bmatrix}, a^T=\begin{bmatrix}1&2\\0&3\end{bmatrix}\]<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">a</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">0</span>],
<span class="linenr">3: </span>              [<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'--Matrix transpose--'</span>)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(a.transpose())
</pre>
</div>

<pre class="example">
[[1 0]
 [2 3]]
--Matrix transpose--
[[1 2]
 [0 3]]
</pre>
</div>
</div>
<div id="outline-container-org64eb211" class="outline-4">
<h4 id="org64eb211"><span class="section-number-4">3.4.7</span> 陣列相乘</h4>
<div class="outline-text-4" id="text-3-4-7">
</div>
<div id="outline-container-orgb189907" class="outline-5">
<h5 id="orgb189907">陣列乘法(dot)</h5>
<div class="outline-text-5" id="text-orgb189907">
<p>
\[a=\begin{bmatrix}a_{11}&a_{12}\\a_{21}&a_{22}\end{bmatrix}, b=\begin{bmatrix}b_{11}&b_{12}&b_{13}\\b_{21}&b_{22}&b_{23}\end{bmatrix}\]<br />
\[a \cdot b=\begin{bmatrix}a_{11}*b_{11}+a_{12}*b_{21}&a_{11}*b_{12}+a_{12}*b_{22}&a_{11}*b_{13}+a_{12}*b_{23}\\a_{21}*b_{11}+a_{22}*b_{21}&a_{21}*b_{12}+a_{22}*b_{22}&a_{21}*b_{13}+a_{22}*b_{23}\end{bmatrix}\]<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">A</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>]])
<span class="linenr">3: </span><span style="color: #ff5c57;">B</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>], [<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">0</span>], [<span style="color: #f3f99d; font-weight: bold;">3</span>, -<span style="color: #f3f99d; font-weight: bold;">1</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"{0}"</span>.<span style="color: #ff6ac1;">format</span>(A.dot(B)))
<span class="linenr">5: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21478;&#19968;&#31278;&#20570;&#27861;</span>
<span class="linenr">6: </span><span style="color: #ff5c57;">aMatrix</span> = np.matrix(A)
<span class="linenr">7: </span><span style="color: #ff5c57;">bMatrix</span> = np.matrix(B)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=== Solution #2 ==='</span>)
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(aMatrix * bMatrix)
</pre>
</div>

<pre class="example">
[[14 -1]
 [16  6]]
=== Solution #2 ===
[[14 -1]
 [16  6]]
</pre>
</div>
</div>
<div id="outline-container-orgb6465cf" class="outline-5">
<h5 id="orgb6465cf">相對位置乘法</h5>
<div class="outline-text-5" id="text-orgb6465cf">
<p>
\[a=\begin{bmatrix}a_{11}&a_{12}\\a_{21}&a_{22}\end{bmatrix}, b=\begin{bmatrix}b_{11}&b_{12}\\b_{21}&b_{22}\end{bmatrix}\]<br />
\[a \cdot b=\begin{bmatrix}a_{11}*b_{11}&a_{12}*b_{12}\\a_{21}*b_{21}&a_{22}*b_{22}\end{bmatrix}\]<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">A</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>]])
<span class="linenr">3: </span><span style="color: #ff5c57;">B</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>], [<span style="color: #f3f99d; font-weight: bold;">9</span>, <span style="color: #f3f99d; font-weight: bold;">10</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"A:\n{0}"</span>.<span style="color: #ff6ac1;">format</span>(A))
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"B:\n{0}"</span>.<span style="color: #ff6ac1;">format</span>(B))
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"A*B:\n{0}"</span>.<span style="color: #ff6ac1;">format</span>(A*B))
</pre>
</div>

<pre class="example">
A:
[[1 2]
 [4 5]]
B:
[[ 7  8]
 [ 9 10]]
A*B:
[[ 7 16]
 [36 50]]
</pre>
</div>
</div>
</div>
<div id="outline-container-org2b14f34" class="outline-4">
<h4 id="org2b14f34"><span class="section-number-4">3.4.8</span> 取代陣列中元素</h4>
<div class="outline-text-4" id="text-3-4-8">
<p>
這裡也可以看出 NumPy 對於選取陣列中元素的極好彈性，可十分方便的完成以下工作:<br />
</p>
<ul class="org-ul">
<li>直接以條件來當成選取方式<br /></li>
<li>直拉以條件來修改陣列內容，例如，30 以下的分數都改成 40 分<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">C</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">5</span>, -<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">9</span>, <span style="color: #f3f99d; font-weight: bold;">0</span>])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(C&lt;=<span style="color: #f3f99d; font-weight: bold;">0</span>)
<span class="linenr">5: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#23559;&#38499;&#21015;&#20013;&#23567;&#26044;&#31561;&#26044;0&#30340;&#20803;&#32032;&#21462;&#20195;&#28858;0;&#20854;&#20182;&#36681;&#28858;1</span>
<span class="linenr">6: </span><span style="color: #ff5c57;">C</span>[C&lt;=<span style="color: #f3f99d; font-weight: bold;">0</span>] = <span style="color: #f3f99d; font-weight: bold;">0</span>
<span class="linenr">7: </span><span style="color: #ff5c57;">C</span>[C&gt;<span style="color: #f3f99d; font-weight: bold;">0</span>] = <span style="color: #f3f99d; font-weight: bold;">1</span>
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(C)
</pre>
</div>

<pre class="example">
[False  True False False  True]
[1 0 1 1 0]
</pre>
</div>
</div>
<div id="outline-container-orgc30c668" class="outline-4">
<h4 id="orgc30c668"><span class="section-number-4">3.4.9</span> 陣列間元素相乘</h4>
<div class="outline-text-4" id="text-3-4-9">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span><span style="color: #ff5c57;">ar</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>)
<span class="linenr"> 3: </span><span style="color: #ffb86c;">print</span>(ar.prod())
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #ff5c57;">ar1</span> = np.array([np.arange(<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>),np.arange(<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">7</span>),np.arange(<span style="color: #f3f99d; font-weight: bold;">7</span>,<span style="color: #f3f99d; font-weight: bold;">10</span>)])
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(ar1)
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(np.prod(ar1, axis=<span style="color: #f3f99d; font-weight: bold;">1</span>))
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(ar1.<span style="color: #ff6ac1;">sum</span>())
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(ar1.mean())
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(np.median(ar1))
</pre>
</div>

<pre class="example">
24
[[1 2 3]
 [4 5 6]
 [7 8 9]]
[  6 120 504]
45
5.0
5.0
</pre>
</div>
</div>
<div id="outline-container-orge1bf7c1" class="outline-4">
<h4 id="orge1bf7c1"><span class="section-number-4">3.4.10</span> 反陣列</h4>
<div class="outline-text-4" id="text-3-4-10">
<p>
AB=BA=I, 其中 I 為單位陣列<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">A</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">4</span>, -<span style="color: #f3f99d; font-weight: bold;">7</span>], [<span style="color: #f3f99d; font-weight: bold;">2</span>, -<span style="color: #f3f99d; font-weight: bold;">3</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"A:\n"</span>, A)
<span class="linenr">5: </span><span style="color: #ff5c57;">B</span> = np.linalg.inv(A)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"B:\n"</span>, B)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"A dot B:\n"</span>, A.dot(B))
</pre>
</div>

<pre class="example">
A:
 [[ 4 -7]
 [ 2 -3]]
B:
 [[-1.5  3.5]
 [-1.   2. ]]
A dot B:
 [[1. 0.]
 [0. 1.]]
</pre>
</div>
</div>
<div id="outline-container-org3e7a2c5" class="outline-4">
<h4 id="org3e7a2c5"><span class="section-number-4">3.4.11</span> 合併陣列</h4>
<div class="outline-text-4" id="text-3-4-11">
</div>
<div id="outline-container-orgace4862" class="outline-5">
<h5 id="orgace4862">vstack</h5>
<div class="outline-text-5" id="text-orgace4862">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">a</span> = np.ones((<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>))
<span class="linenr">3: </span><span style="color: #ff5c57;">b</span> = np.zeros(<span style="color: #f3f99d; font-weight: bold;">2</span>)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(b)
<span class="linenr">6: </span><span style="color: #ff5c57;">c</span> = np.vstack((a, b))
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(c)
</pre>
</div>

<pre class="example">
[[1. 1.]
 [1. 1.]]
[0. 0.]
[[1. 1.]
 [1. 1.]
 [0. 0.]]
</pre>
</div>
</div>
<div id="outline-container-org9a2c2fe" class="outline-5">
<h5 id="org9a2c2fe">hstack</h5>
<div class="outline-text-5" id="text-org9a2c2fe">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">a</span> = np.ones((<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>))
<span class="linenr">3: </span><span style="color: #ff5c57;">b</span> = [[<span style="color: #f3f99d; font-weight: bold;">3</span>],
<span class="linenr">4: </span>     [<span style="color: #f3f99d; font-weight: bold;">4</span>]]
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(b)
<span class="linenr">7: </span><span style="color: #ff5c57;">c</span> = np.hstack((a, b))
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(c)
<span class="linenr">9: </span>
</pre>
</div>

<pre class="example">
[[1. 1.]
 [1. 1.]]
[[3], [4]]
[[1. 1. 3.]
 [1. 1. 4.]]
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc7ca00b" class="outline-3">
<h3 id="orgc7ca00b"><span class="section-number-3">3.5</span> [課堂練習]分數修改&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li>模擬一個 10 人、5科的全班月考成績(隨機生成, 0~100)<br /></li>
<li>將所有 55&lt;=分數&lt;60 的成績均改為 60 分<br /></li>
<li>將所有低於 40 分的成績均改為 10 分<br /></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org28d579e" class="outline-2">
<h2 id="org28d579e"><span class="section-number-2">4</span> 陣列函數</h2>
<div class="outline-text-2" id="text-4">
<p>
NumPy 提供了一系列用於計算陣列內數據的統計值的函數，如 min()、max()、mean()、std()（標準差）、var()（方差）等。更多的 Numpy function 請參閱<a href="https://numpy.org/doc/2.0/reference/routines.math.html">Numpy官方網站</a>。<br />
</p>
</div>
<div id="outline-container-org253a053" class="outline-3">
<h3 id="org253a053"><span class="section-number-3">4.1</span> numpy.sum()</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-org6e05c25" class="outline-4">
<h4 id="org6e05c25"><span class="section-number-4">4.1.1</span> 語法</h4>
<div class="outline-text-4" id="text-4-1-1">
<div class="org-src-container">
<pre class="src src-python">numpy.<span style="color: #ff6ac1;">sum</span>(a, axis=<span style="color: #5af78e;">None</span>, dtype=<span style="color: #5af78e;">None</span>, out=<span style="color: #5af78e;">None</span>, keepdims=&lt;no value&gt;, initial=&lt;no value&gt;, where=&lt;no value&gt;)
</pre>
</div>
<p>
其他參數用法詳見<a href="https://numpy.org/doc/stable/reference/generated/numpy.sum.html">官方網站</a><br />
</p>
</div>
</div>
<div id="outline-container-org0fc2828" class="outline-4">
<h4 id="org0fc2828"><span class="section-number-4">4.1.2</span> 範例</h4>
<div class="outline-text-4" id="text-4-1-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">np_array_2x3</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">0</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>],[<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>]])
<span class="linenr"> 4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====Array====='</span>)
<span class="linenr"> 5: </span><span style="color: #ffb86c;">print</span>(np_array_2x3)
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#21015;====='</span>)
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">sum</span>(np_array_2x3, axis = <span style="color: #f3f99d; font-weight: bold;">0</span>))
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#34892;====='</span>)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">sum</span>(np_array_2x3, axis = <span style="color: #f3f99d; font-weight: bold;">1</span>))
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#38499;&#21015;&#32317;&#21644;1====='</span>)
<span class="linenr">11: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">sum</span>(np_array_2x3))
<span class="linenr">12: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#38499;&#21015;&#32317;&#21644;2====='</span>)
<span class="linenr">13: </span><span style="color: #ffb86c;">print</span>(np_array_2x3.<span style="color: #ff6ac1;">sum</span>())
<span class="linenr">14: </span>
</pre>
</div>

<pre class="example">
=====Array=====
[[0 2 4]
 [1 3 5]]
=====列=====
[1 5 9]
=====行=====
[6 9]
=====陣列=====
15
=====陣列=====
15
</pre>
</div>
</div>
</div>
<div id="outline-container-org3a216af" class="outline-3">
<h3 id="org3a216af"><span class="section-number-3">4.2</span> sum() v.s. np.sum()</h3>
<div class="outline-text-3" id="text-4-2">
<p>
sum() 是 Python 的內建函數，而 np.sum() 是 NumPy 的函數。這兩者有些差異，特別是在多維數組中的操作方式不同。<br />
</p>
<ul class="org-ul">
<li>sum() 主要用於對 Python 的序列進行求和。<br /></li>
<li>np.sum() 支援多維陣列，可以指定 axis 來沿著某一維度進行求和。<br /></li>
</ul>

<div id="org7942c91" class="figure">
<p><img src="images/NumPy/2sum.png" alt="2sum.png" width="400" /><br />
</p>
<p><span class="figure-number">Figure 3: </span>sum() v.s. np.sum()</p>
</div>
</div>
</div>
<div id="outline-container-orgea36409" class="outline-3">
<h3 id="orgea36409"><span class="section-number-3">4.3</span> 其他常用函數</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>min()<br /></li>
<li>max()<br /></li>
<li>argmin<br /></li>
<li>mean()<br /></li>
<li>std()<br /></li>
<li>var()<br /></li>
<li>sqrt()<br /></li>
<li>size()<br /></li>
<li>dtype()<br /></li>
<li>itemsize()<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">np1</span> = np.random.randint(<span style="color: #f3f99d; font-weight: bold;">0</span>, <span style="color: #f3f99d; font-weight: bold;">10</span>, size=[<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>])
<span class="linenr"> 4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"np\n"</span>, np1)
<span class="linenr"> 5: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"np1.sum"</span>, np1.<span style="color: #ff6ac1;">sum</span>())
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"sum:"</span>, <span style="color: #ff6ac1;">sum</span>(np1))
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"sum:"</span>, <span style="color: #ff6ac1;">sum</span>(np1,<span style="color: #f3f99d; font-weight: bold;">3</span>))
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"min:"</span>, np1.<span style="color: #ff6ac1;">min</span>())
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"max:"</span>, np1.<span style="color: #ff6ac1;">max</span>())
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"mean:"</span>, np.mean(np1))
</pre>
</div>

<pre class="example">
np
 [[3 7]
 [4 1]
 [6 8]]
np1.sum 29
sum: [13 16]
sum: [16 19]
min: 1
max: 8
mean: 4.833333333333333
</pre>
</div>
<div id="outline-container-org45608cc" class="outline-4">
<h4 id="org45608cc"><span class="section-number-4">4.3.1</span> numpy.sum()</h4>
<div class="outline-text-4" id="text-4-3-1">
<p>
numpy.sum() 用來求出陣列的總和，可以沿著指定的維度（行或列）進行操作。你可以對整個陣列求和，或沿著某個軸方向（行或列）進行求和操作。<br />
</p>
</div>
<div id="outline-container-orgd4c93f3" class="outline-5">
<h5 id="orgd4c93f3">語法</h5>
<div class="outline-text-5" id="text-orgd4c93f3">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>numpy.<span style="color: #ff6ac1;">sum</span>(a, axis=<span style="color: #5af78e;">None</span>, dtype=<span style="color: #5af78e;">None</span>, out=<span style="color: #5af78e;">None</span>, keepdims=<span style="color: #5af78e;">False</span>, initial=&lt;no value&gt;, where=<span style="color: #5af78e;">True</span>)
</pre>
</div>
<ul class="org-ul">
<li>a：要進行求和的陣列或數組。<br /></li>
<li>axis：選擇沿著哪個軸進行求和，預設值為 None，即對所有元素進行求和。如果設置為 0，則沿著列進行求和；如果設置為 1，則沿著行進行求和。<br /></li>
<li>dtype：輸出陣列的資料型態，可選。如果未指定，使用輸入陣列的資料型態。<br /></li>
<li>out：可以指定一個與 a 相同形狀的陣列來存儲結果。<br /></li>
<li>keepdims：如果設置為 True，則保留被壓縮的維度，使結果與輸入形狀一致（但值變為 1）。<br /></li>
<li>initial：指定求和的初始值。<br /></li>
<li>where：允許在特定條件下進行求和，預設為 True。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org996c867" class="outline-5">
<h5 id="org996c867">範例</h5>
<div class="outline-text-5" id="text-org996c867">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">ary</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">9</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">8</span>], [<span style="color: #f3f99d; font-weight: bold;">4</span>, <span style="color: #f3f99d; font-weight: bold;">7</span>, <span style="color: #f3f99d; font-weight: bold;">5</span>]])
<span class="linenr"> 4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====Array====='</span>)
<span class="linenr"> 5: </span><span style="color: #ffb86c;">print</span>(ary)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#27839;&#33879;&#21015;&#26041;&#21521;&#65288;axis=0&#65289;&#27714;&#21644;</span>
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#21015;&#27714;&#21644;====='</span>)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">sum</span>(ary, axis=<span style="color: #f3f99d; font-weight: bold;">0</span>))
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#27839;&#33879;&#34892;&#26041;&#21521;&#65288;axis=1&#65289;&#27714;&#21644;</span>
<span class="linenr">12: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#34892;&#27714;&#21644;====='</span>)
<span class="linenr">13: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">sum</span>(ary, axis=<span style="color: #f3f99d; font-weight: bold;">1</span>))
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#27714;&#25972;&#20491;&#38499;&#21015;&#30340;&#32317;&#21644;</span>
<span class="linenr">16: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#32317;&#21644;====='</span>)
<span class="linenr">17: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">sum</span>(ary))
</pre>
</div>

<pre class="example">
=====Array=====
[[9 2 8]
 [4 7 5]]
=====列求和=====
[13  9 13]
=====行求和=====
[19 16]
=====總和=====
35
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfede999" class="outline-4">
<h4 id="orgfede999"><span class="section-number-4">4.3.2</span> numpy.max()</h4>
<div class="outline-text-4" id="text-4-3-2">
<p>
numpy.max() 用來求出陣列的最大值，可以沿著指定的維度（行或列）進行操作。<br />
</p>
</div>
<div id="outline-container-org5e9e6db" class="outline-5">
<h5 id="org5e9e6db">語法</h5>
<div class="outline-text-5" id="text-org5e9e6db">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>numpy.<span style="color: #ff6ac1;">max</span>(a, axis=<span style="color: #5af78e;">None</span>, out=<span style="color: #5af78e;">None</span>, keepdims=<span style="color: #5af78e;">False</span>)
</pre>
</div>
<ul class="org-ul">
<li>求序列的最值<br /></li>
<li>最少接收一個引數<br /></li>
<li>axis：預設為列向（也即 axis=0），axis = 1 時為行方向的最值；<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org8852626" class="outline-5">
<h5 id="org8852626">範例</h5>
<div class="outline-text-5" id="text-org8852626">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">ary</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">9</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">8</span>],[<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">7</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>]])
<span class="linenr"> 4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====Array====='</span>)
<span class="linenr"> 5: </span><span style="color: #ffb86c;">print</span>(ary)
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#21015;====='</span>)
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">max</span>(ary, axis = <span style="color: #f3f99d; font-weight: bold;">0</span>))
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#34892;====='</span>)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">max</span>(ary, axis = <span style="color: #f3f99d; font-weight: bold;">1</span>))
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#38499;&#21015;====='</span>)
<span class="linenr">11: </span><span style="color: #ffb86c;">print</span>(np.<span style="color: #ff6ac1;">max</span>(ary))
</pre>
</div>

<pre class="example">
=====Array=====
[[9 2 8]
 [4 7 5]]
=====列=====
[9 7 8]
=====行=====
[9 7]
=====陣列=====
9
</pre>
</div>
</div>
</div>
<div id="outline-container-orgce6c645" class="outline-4">
<h4 id="orgce6c645"><span class="section-number-4">4.3.3</span> numpy.maxium()</h4>
<div class="outline-text-4" id="text-4-3-3">
<p>
numpy.maximum() 用於比較兩個陣列中逐位元素，並回傳每個位置較大的值。<br />
</p>
</div>
<div id="outline-container-org0eb6150" class="outline-5">
<h5 id="org0eb6150">語法</h5>
<div class="outline-text-5" id="text-org0eb6150">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>numpy.maximum&#65306;(X, Y, out=<span style="color: #5af78e;">None</span>)
</pre>
</div>
<ul class="org-ul">
<li>X 與 Y 逐位比較取其大者；<br /></li>
<li>最少接收兩個引數<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org83f4e71" class="outline-5">
<h5 id="org83f4e71">範例</h5>
<div class="outline-text-5" id="text-org83f4e71">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">npA1</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">9</span>,-<span style="color: #f3f99d; font-weight: bold;">9</span>,<span style="color: #f3f99d; font-weight: bold;">8</span>],[<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">7</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>]])
<span class="linenr">3: </span><span style="color: #ff5c57;">npA2</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">0</span>,<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">8</span>],[<span style="color: #f3f99d; font-weight: bold;">10</span>,-<span style="color: #f3f99d; font-weight: bold;">7</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====npA1====="</span>)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(npA1)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====npA2====="</span>)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(npA2)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====maximum====="</span>)
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(np.maximum(npA1, npA2))
</pre>
</div>

<pre class="example">
=====npA1=====
[[ 9 -9  8]
 [ 4  7  5]]
=====npA2=====
[[ 0  1  8]
 [10 -7  5]]
=====maximum=====
[[ 9  1  8]
 [10  7  5]]
</pre>
</div>
</div>
</div>
<div id="outline-container-org711d9db" class="outline-4">
<h4 id="org711d9db"><span class="section-number-4">4.3.4</span> numpy.argmax()</h4>
<div class="outline-text-4" id="text-4-3-4">
<p>
numpy.argmax() 傳回陣列中最大值的索引。可沿著指定的維度查詢最大值索引。<br />
</p>
</div>
<div id="outline-container-org9b102f4" class="outline-5">
<h5 id="org9b102f4">語法</h5>
<div class="outline-text-5" id="text-org9b102f4">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>numpy.argmax(a, axis=<span style="color: #5af78e;">None</span>, out=<span style="color: #5af78e;">None</span>)[source]&#182;
</pre>
</div>
<ul class="org-ul">
<li>a: 可以轉換為陣列的陣列或物件，我們需要在其中找到最高值的索引。<br /></li>
<li>axis: 沿著行(axis=0)或列(axis=1)查詢最大值的索引。預設情況下，通過對陣列進行展平可以找到最大值的索引。<br /></li>
<li>out: np.argmax 方法結果的佔位符。它必須有適當的大小以容納結果。Returns the indices of the maximum values along an axis.<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org1bdcb77" class="outline-5">
<h5 id="org1bdcb77">範例</h5>
<div class="outline-text-5" id="text-org1bdcb77">
</div>
<ul class="org-ul">
<li><a id="orga7dd111"></a>一維 vector<br />
<div class="outline-text-6" id="text-orga7dd111">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">a</span>=np.array([<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>,<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">9</span>])
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"Array:"</span>)
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #ff5c57;">req_index</span>=np.argmax(a)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"Index with the largest value: {req_index}"</span>)
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"The largest value in the array: {a[req_index]}"</span>)
</pre>
</div>

<pre class="example">
Array:
[2 6 1 9]
Index with the largest value: 3
The largest value in the array: 9
</pre>
</div>
</li>
<li><a id="orgc2eef61"></a>二維陣列<br />
<div class="outline-text-6" id="text-orgc2eef61">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">a</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>],
<span class="linenr"> 4: </span>            [<span style="color: #f3f99d; font-weight: bold;">7</span>,<span style="color: #f3f99d; font-weight: bold;">14</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>]])
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"Array:"</span>)
<span class="linenr"> 7: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #ff5c57;">req_index</span>=np.argmax(a, axis=<span style="color: #f3f99d; font-weight: bold;">0</span>)
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"Index with the largest value(axis=0): {req_index}"</span>)
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #ff5c57;">req_index</span>=np.argmax(a, axis=<span style="color: #f3f99d; font-weight: bold;">1</span>)
<span class="linenr">13: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"Index with the largest value(axis=1): {req_index}"</span>)
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #ff5c57;">req_index</span>=np.argmax(a)
<span class="linenr">16: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#20808;&#25892;&#24179;&#20877;&#21462;&#24471;&#23565;&#25033;&#30340;&#20540;</span>
<span class="linenr">17: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"Index with the largest value: {req_index}"</span>)
<span class="linenr">18: </span><span style="color: #ffb86c;">print</span>(f<span style="color: #f3f99d;">"the largest value: {a.flatten()[req_index]}"</span>)
</pre>
</div>

<pre class="example">
Array:
[[ 2  1  6]
 [ 7 14  5]]
Index with the largest value(axis=0): [1 1 0]
Index with the largest value(axis=1): [2 1]
Index with the largest value: 4
the largest value: 14
</pre>


<div id="orgd86222b" class="figure">
<p><img src="images/NumPy/argSeq.jpg" alt="argSeq.jpg" width="200" /><br />
</p>
<p><span class="figure-number">Figure 4: </span>Sequence of Arg in array</p>
</div>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-org0a1c78a" class="outline-4">
<h4 id="org0a1c78a"><span class="section-number-4">4.3.5</span> tile()</h4>
<div class="outline-text-4" id="text-4-3-5">
<p>
numpy.tile() 用來將陣列沿指定的方向複製。這對於創建大規模重複數據非常有用。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#19968;&#32173;tile====='</span>)
<span class="linenr">3: </span><span style="color: #ff5c57;">b</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>], [<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>]])
<span class="linenr">4: </span><span style="color: #ff5c57;">b1</span> = np.tile(b, <span style="color: #f3f99d; font-weight: bold;">2</span>)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(b1)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====&#20108;&#32173;tile====='</span>)
<span class="linenr">7: </span><span style="color: #ff5c57;">b2</span> = np.tile(b, (<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>))
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(b2)
</pre>
</div>

<pre class="example">
=====一維 tile=====
[[1 2 1 2]
 [3 4 3 4]]
=====二維 tile=====
[[1 2 1 2 1 2]
 [3 4 3 4 3 4]
 [1 2 1 2 1 2]
 [3 4 3 4 3 4]]
</pre>
</div>
</div>
</div>
<div id="outline-container-org85acfc7" class="outline-3">
<h3 id="org85acfc7"><span class="section-number-3">4.4</span> 差不多? 很重要!: numpy.allclose</h3>
<div class="outline-text-3" id="text-4-4">
<p>
numpy.allclose() 用來判斷兩個陣列在給定的容差範圍內是否元素相等。<br />
</p>
<ul class="org-ul">
<li>allclose() 在指定的相對或絕對容差範圍內比較兩個陣列。<br /></li>
<li>當需要比較浮點數時，這個函數非常有用。<br /></li>
<li>容差值通常是非常小的正數。比較時，相對誤差 (rtol * abs(b)) 和絕對誤差 atol 相加，然後與兩個元素的絕對差值進行比較。<br /></li>
<li>如果 NaN 出現在相同位置且 equal_nan=True，則 NaN 被視為相等；如果兩個陣列在相同位置的無限值（Inf）符號相同，也會視為相等。<br /></li>
</ul>
</div>
<div id="outline-container-orge289c72" class="outline-4">
<h4 id="orge289c72"><span class="section-number-4">4.4.1</span> 語法</h4>
<div class="outline-text-4" id="text-4-4-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>numpy.allclose(a, b, rtol=1e-<span style="color: #f3f99d; font-weight: bold;">05</span>, atol=1e-<span style="color: #f3f99d; font-weight: bold;">08</span>, equal_nan=<span style="color: #5af78e;">False</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org5ab151b" class="outline-4">
<h4 id="org5ab151b"><span class="section-number-4">4.4.2</span> Parameters</h4>
<div class="outline-text-4" id="text-4-4-2">
<ul class="org-ul">
<li>a, b: 輸入的兩個陣列，用於比較。<br /></li>
<li>rtol: float. 相對誤差參數（預設值是 1e-05）。<br /></li>
<li>atol: float. 絕對誤差參數（預設值是 1e-08）。<br /></li>
<li>equal_nan: bool. 如果為 True，則將 NaN 視為相等。預設為 False。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgc1eee30" class="outline-4">
<h4 id="orgc1eee30"><span class="section-number-4">4.4.3</span> Returns</h4>
<div class="outline-text-4" id="text-4-4-3">
<ul class="org-ul">
<li>allclose: bool. 如果兩個陣列在給定的容差範圍內逐元素相等，返回 True；否則返回 False。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orga06e0dc" class="outline-4">
<h4 id="orga06e0dc"><span class="section-number-4">4.4.4</span> See also:</h4>
<div class="outline-text-4" id="text-4-4-4">
<ul class="org-ul">
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.isclose.html#numpy.isclose">isclose</a><br /></li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.all.html#numpy.all">all</a><br /></li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.all.html#numpy.all">any</a><br /></li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.equal.html#numpy.equal">equal</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org6c21175" class="outline-4">
<h4 id="org6c21175"><span class="section-number-4">4.4.5</span> DEMO</h4>
<div class="outline-text-4" id="text-4-4-5">
<p>
參考: <a href="https://www.itdaan.com/tw/cc576c8f8162ab7ee9e3d6afdbf454fc">測試兩個numpy數組(接近)是否相等，包括形狀</a><br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span><span style="color: #ffb86c;">import</span> math
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #ff5c57;">a</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>],
<span class="linenr"> 5: </span>              [<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>]])
<span class="linenr"> 6: </span><span style="color: #ff5c57;">b</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>],
<span class="linenr"> 7: </span>              [<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>]])
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====allclose(atol=0.5)====="</span>)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(np.allclose(a, b, atol=<span style="color: #f3f99d; font-weight: bold;">0.5</span>))
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====allclose(atol=1.0)====="</span>)
<span class="linenr">11: </span><span style="color: #ffb86c;">print</span>(np.allclose(a, b, atol=<span style="color: #f3f99d; font-weight: bold;">1.0</span>))
<span class="linenr">12: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"=====equal()====="</span>)
<span class="linenr">13: </span><span style="color: #ffb86c;">print</span>(np.equal(a,b))
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #ff5c57;">a</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>],
<span class="linenr">16: </span>              [<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">3.1</span>]])
<span class="linenr">17: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====alllose(atol=11.0)====='</span>)
<span class="linenr">18: </span><span style="color: #ffb86c;">print</span>(np.allclose(a, b, atol=<span style="color: #f3f99d; font-weight: bold;">1.0</span>))
<span class="linenr">19: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">'=====isclose()====='</span>)
<span class="linenr">20: </span><span style="color: #ffb86c;">print</span>(np.isclose(a, b, atol=<span style="color: #f3f99d; font-weight: bold;">1.0</span>))
</pre>
</div>

<pre class="example">
=====allclose(atol=0.5)=====
False
=====allclose(atol=1.0)=====
True
=====equal()=====
[[ True False  True]
 [ True  True False]]
=====alllose(atol=11.0)=====
False
=====isclose()=====
[[ True  True  True]
 [ True  True False]]
</pre>
</div>
</div>
</div>
<div id="outline-container-org6ed141c" class="outline-3">
<h3 id="org6ed141c"><span class="section-number-3">4.5</span> [作業 1]成績計算&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></h3>
<div class="outline-text-3" id="text-4-5">
<p>
說明: 為了確保大家在使用 numpy 隨機生成分數時能產生相同的結果，請在你的程式碼中加入這段程式: 隨機數生成器的種子（seed）<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#35373;&#23450;&#38568;&#27231;&#25976;&#31278;&#23376;&#65292;&#30906;&#20445;&#27599;&#27425;&#22519;&#34892;&#32080;&#26524;&#19968;&#33268;</span>
<span class="linenr">4: </span>np.random.seed(<span style="color: #f3f99d; font-weight: bold;">9487</span>)
</pre>
</div>
<ol class="org-ol">
<li>隨機產生一組 20*5 個 0~100 的陣列，模擬成一個班級的某次考試成績(20 人*5 科)。<br /></li>
<li>輸出此次 5 科考科的全班總分、平均、最高分、最低分、標準差。<br /></li>
<li>將全班分數以「開根號乘以 10」的方式進行調整。<br /></li>
<li>如果調整完分數還是不及格，把分數改為 39 分。<br /></li>
<li>輸出不及格人數。<br /></li>
<li>輸出全班分數(可以用 f 字串來控制小數位數)<br /></li>
</ol>
</div>
<div id="outline-container-org2031aaa" class="outline-4">
<h4 id="org2031aaa"><span class="section-number-4">4.5.1</span> 結果範例</h4>
<div class="outline-text-4" id="text-4-5-1">
<pre class="example">
各科總分: [1015  805  868  919 1071]
各科平均: [33.83 26.83 28.93 30.63 35.7 ]
各科最高分: [92 94 99 92 97]
各科最低分: [18  5  1 12  0]
各科標準差: [21.07 26.85 30.39 27.25 31.98]
全班不及格人數: 41
調整後分數:

 1: 39.00 83.67 39.00 39.00 90.55
 2: 61.64 39.00 99.50 75.50 39.00
 3: 83.67 67.82 39.00 39.00 39.00
 4: 39.00 39.00 80.00 70.71 78.74
 5: 39.00 87.75 60.00 39.00 98.49
 6: 39.00 39.00 88.88 39.00 90.55
 7: 84.85 39.00 67.82 39.00 39.00
 8: 74.16 39.00 60.00 92.20 39.00
 9: 76.81 89.44 64.03 89.44 72.80
10: 91.65 39.00 39.00 39.00 92.20
11: 72.11 68.56 39.00 87.75 74.16
12: 86.60 69.28 39.00 39.00 93.81
13: 84.26 39.00 39.00 67.08 76.16
14: 95.92 87.18 39.00 95.92 39.00
15: 69.28 76.16 94.34 94.34 84.26
16: 70.71 63.25 81.85 72.11 39.00
17: 39.00 39.00 85.44 62.45 96.44
18: 39.00 96.95 39.00 84.26 39.00
19: 39.00 39.00 85.44 39.00 90.00
20: 74.16 39.00 84.26 39.00 83.07
</pre>
</div>
</div>
</div>
<div id="outline-container-orga03ddbc" class="outline-3">
<h3 id="orga03ddbc"><span class="section-number-3">4.6</span> [作業 2]Z 分數&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TNFSH">TNFSH</span></span></h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>隨機產生一組 20*5 個 0~100 的陣列，模擬成一個班級的某次考試成績(20 人*5 科)。<br /></li>
<li>將所有原始分數轉換為到小數點第 2 位的<a href="https://zh.wikipedia.org/zh-tw/%E6%A8%99%E6%BA%96%E5%88%86%E6%95%B8">Z分數</a><br /></li>
</ul>
</div>
<div id="outline-container-org9e3c285" class="outline-4">
<h4 id="org9e3c285"><span class="section-number-4">4.6.1</span> 結果範例</h4>
<div class="outline-text-4" id="text-4-6-1">
<pre class="example">
Z分數:
 [[-0.89  1.11 -0.93 -0.99  0.89]
 [-0.61 -0.87  1.83  0.41 -0.77]
 [ 0.91  0.21 -1.16 -1.06 -1.05]
 [-1.17 -1.09  0.68  0.15  0.26]
 [-1.46  1.37 -0.24 -0.73  1.36]
 [-0.94 -1.31  1.17 -0.92  0.89]
 [ 1.01 -1.01  0.09 -0.4  -1.52]
 [ 0.2  -0.61 -0.24  1.43 -1.39]
 [ 0.39  1.48 -0.08  1.25 -0.02]
 [ 1.58 -0.38 -0.64 -0.81  0.98]
 [ 0.06  0.25 -0.77  1.14  0.05]
 [ 1.15  0.29 -1.4  -1.25  1.08]
 [ 0.96 -1.09 -1.23 -0.03  0.14]
 [ 1.96  1.33 -1.03  1.69 -1.67]
 [-0.13  0.66  1.5   1.58  0.55]
 [-0.04 -0.01  0.78  0.22 -1.36]
 [-1.55 -0.79  0.97 -0.26  1.23]
 [-0.75  2.   -1.16  0.92 -0.99]
 [-0.89 -0.57  0.97 -1.17  0.86]
 [ 0.2  -0.98  0.91 -1.17  0.48]]
</pre>
</div>
</div>
</div>
<div id="outline-container-org820093b" class="outline-3">
<h3 id="org820093b"><span class="section-number-3">4.7</span> 解聯立方程式</h3>
<div class="outline-text-3" id="text-4-7">
<p>
Numpy 的 linalg function 可以用來解線性方程組，若目標方程式為\[Ax=b\]，其中\[x\]為所求之解，求解語法為：<br />
</p>
<div class="org-src-container">
<pre class="src src-swift"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>x = np.<span style="color: #ff5c57;">linalg</span>.<span style="color: #57c7ff;">solve</span>(A, b)
</pre>
</div>
</div>
<div id="outline-container-orge833d89" class="outline-4">
<h4 id="orge833d89"><span class="section-number-4">4.7.1</span> 範例 1</h4>
<div class="outline-text-4" id="text-4-7-1">
<p>
以如下方程式為例<br />
\[\begin{cases}2x+y=5\\x+y=3\end{cases}\]<br />
可將之視為求解\[Ax=b\]，其中<br />
\[A=\begin{pmatrix}2&1\\1&1 \end{pmatrix}\], \[b=\begin{pmatrix} 5\\3 \end{pmatrix} \]<br />
</p>
</div>
<div id="outline-container-org6c246c9" class="outline-5">
<h5 id="org6c246c9">solution</h5>
<div class="outline-text-5" id="text-org6c246c9">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">A</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>],
<span class="linenr">3: </span>              [<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>]])
<span class="linenr">4: </span><span style="color: #ff5c57;">b</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">5</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>])
<span class="linenr">5: </span><span style="color: #ff5c57;">x</span> = np.linalg.solve(A, b)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(x)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(np.allclose(np.dot(A, x), b)) <span style="color: #606580;">##</span><span style="color: #606580;">&#35413;&#20272;&#20841;&#20491;&#21521;&#37327;&#26159;&#21542;&#25509;&#36817;(relative tolerance:1e-05, absolute tolerance: 1e-08)</span>
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(np.dot(A, x)) <span style="color: #606580;">##</span><span style="color: #606580;">&#39511;&#35657;&#27491;&#30906;&#24615;</span>
</pre>
</div>

<pre class="example">
[2. 1.]
True
[5. 3.]
</pre>
</div>
</div>
</div>
<div id="outline-container-org03f4147" class="outline-4">
<h4 id="org03f4147"><span class="section-number-4">4.7.2</span> 範例 2</h4>
<div class="outline-text-4" id="text-4-7-2">
<p>
求解下列方程式<br />
\[\begin{cases}3x_0+2x_1+x_2=11\\2x_0+3x_1+x_2=13\\x_0+x_1+4x_2=12 \end{cases}\], 以\[Ax=b\]表示，則<br />
\[A=\begin{pmatrix}3&2&1\\2&3&1\\1&1&4\end{pmatrix}, x=\begin{pmatrix}x_0\\x_1\\x_2\end{pmatrix}, b=\begin{pmatrix}11\\13\\12\end{pmatrix}\]<br />
</p>
</div>
<div id="outline-container-orga716897" class="outline-5">
<h5 id="orga716897">solution</h5>
<div class="outline-text-5" id="text-orga716897">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">A</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>],
<span class="linenr">3: </span>              [<span style="color: #f3f99d; font-weight: bold;">2</span>, <span style="color: #f3f99d; font-weight: bold;">3</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>],
<span class="linenr">4: </span>              [<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>]])
<span class="linenr">5: </span><span style="color: #ff5c57;">b</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">11</span>, <span style="color: #f3f99d; font-weight: bold;">13</span>, <span style="color: #f3f99d; font-weight: bold;">12</span>])
<span class="linenr">6: </span><span style="color: #ff5c57;">x</span> = np.linalg.solve(A, b)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(x)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(np.allclose(np.dot(A, x), b))
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(np.dot(A, x))
</pre>
</div>

<pre class="example">
[1. 3. 2.]
True
[11. 13. 12.]
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd123aa7" class="outline-3">
<h3 id="orgd123aa7"><span class="section-number-3">4.8</span> numpy 陣列間的運算</h3>
<div class="outline-text-3" id="text-4-8">
</div>
<div id="outline-container-org604f54a" class="outline-4">
<h4 id="org604f54a"><span class="section-number-4">4.8.1</span> element-wise (逐元素運算)</h4>
<div class="outline-text-4" id="text-4-8-1">
<p>
當我們對兩個陣列進行逐元素運算時，NumPy 會自動對應每個元素進行運算。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">ar</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>],[<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>],[<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(ar)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(ar+ar)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(ar**.<span style="color: #f3f99d; font-weight: bold;">5</span>)
<span class="linenr">7: </span>
<span class="linenr">8: </span><span style="color: #ff5c57;">ar1</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>],[<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>],[<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">1</span>]])
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(ar.dot(ar1))  <span style="color: #606580;">#</span><span style="color: #606580;">&#38499;&#21015;dot</span>
</pre>
</div>

<pre class="example">
[[1 2 3]
 [4 5 6]
 [2 3 4]]
[[ 2  4  6]
 [ 8 10 12]
 [ 4  6  8]]
[[1.         1.41421356 1.73205081]
 [2.         2.23606798 2.44948974]
 [1.41421356 1.73205081 2.        ]]
[[11 11]
 [29 29]
 [17 17]]
</pre>
</div>
</div>

<div id="outline-container-org8afb00f" class="outline-4">
<h4 id="org8afb00f"><span class="section-number-4">4.8.2</span> 條件邏輯運算</h4>
<div class="outline-text-4" id="text-4-8-2">
<p>
使用 np.where() 可以根據條件從兩個陣列中選擇值。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ff5c57;">xr</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">1.1</span>, <span style="color: #f3f99d; font-weight: bold;">1.2</span>, <span style="color: #f3f99d; font-weight: bold;">1.3</span>, <span style="color: #f3f99d; font-weight: bold;">1.4</span>, <span style="color: #f3f99d; font-weight: bold;">1.5</span>])
<span class="linenr"> 4: </span><span style="color: #ff5c57;">yr</span> = np.array([<span style="color: #f3f99d; font-weight: bold;">2.1</span>, <span style="color: #f3f99d; font-weight: bold;">2.2</span>, <span style="color: #f3f99d; font-weight: bold;">2.3</span>, <span style="color: #f3f99d; font-weight: bold;">2.4</span>, <span style="color: #f3f99d; font-weight: bold;">2.5</span>])
<span class="linenr"> 5: </span><span style="color: #ff5c57;">cond</span> = np.array([<span style="color: #5af78e;">True</span>, <span style="color: #5af78e;">False</span>, <span style="color: #5af78e;">True</span>, <span style="color: #5af78e;">True</span>, <span style="color: #5af78e;">False</span>])
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #ff5c57;">result</span> = [(x <span style="color: #ffb86c;">if</span> c <span style="color: #ffb86c;">else</span> y) <span style="color: #ffb86c;">for</span> x, y, c <span style="color: #ffb86c;">in</span> <span style="color: #ff6ac1;">zip</span>(xr, yr, cond)]
<span class="linenr"> 8: </span><span style="color: #ffb86c;">print</span>(result)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(<span style="color: #ff6ac1;">type</span>(result))
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(np.where(cond, xr, yr))
<span class="linenr">11: </span><span style="color: #ffb86c;">print</span>(<span style="color: #ff6ac1;">type</span>(result))
<span class="linenr">12: </span><span style="color: #606580;">#</span><span style="color: #606580;">&#32080;&#26524;&#37117;&#20659;&#22238;list,&#28858;&#20309;&#26377;,&#30340;&#24046;&#30064;</span>
</pre>
</div>

<pre class="example">
[np.float64(1.1), np.float64(2.2), np.float64(1.3), np.float64(1.4), np.float64(2.5)]
&lt;class 'list'&gt;
[1.1 2.2 1.3 1.4 2.5]
&lt;class 'list'&gt;
</pre>
</div>
</div>

<div id="outline-container-org158b4c3" class="outline-4">
<h4 id="org158b4c3"><span class="section-number-4">4.8.3</span> Braodcasting</h4>
<div class="outline-text-4" id="text-4-8-3">
<p>
NumPy 支援廣播運算，允許對形狀不同的陣列進行運算，NumPy 會自動將較小的陣列擴展以符合較大的陣列形狀。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">x1</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">9.0</span>).reshape((<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>))
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(x1)
<span class="linenr">5: </span><span style="color: #ff5c57;">x2</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">1</span>, <span style="color: #f3f99d; font-weight: bold;">4</span>)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(x2)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(np.multiply(x1,x2))
</pre>
</div>

<pre class="example">
[[0. 1. 2.]
 [3. 4. 5.]
 [6. 7. 8.]]
[1 2 3]
[[ 0.  2.  6.]
 [ 3.  8. 15.]
 [ 6. 14. 24.]]
</pre>
</div>
</div>

<div id="outline-container-orgc39bda7" class="outline-4">
<h4 id="orgc39bda7"><span class="section-number-4">4.8.4</span> 陣列排序與反轉</h4>
<div class="outline-text-4" id="text-4-8-4">
</div>
<div id="outline-container-org748d8db" class="outline-5">
<h5 id="org748d8db">sort() 函數可以按指定的軸進行排序。</h5>
<div class="outline-text-5" id="text-org748d8db">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">ar</span> = np.array([[<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>],[<span style="color: #f3f99d; font-weight: bold;">10</span>,-<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">9</span>],[<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">12</span>]])
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"origin:\n"</span>,ar)
<span class="linenr">5: </span>ar.sort(axis=<span style="color: #f3f99d; font-weight: bold;">0</span>)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"axis=0:\n"</span>,ar)
<span class="linenr">7: </span>ar.sort(axis=<span style="color: #f3f99d; font-weight: bold;">1</span>)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"axis=1:\n"</span>,ar)
</pre>
</div>

<pre class="example">
origin:
 [[ 3  2  5]
 [10 -1  9]
 [ 4  1 12]]
axis=0:
 [[ 3 -1  5]
 [ 4  1  9]
 [10  2 12]]
axis=1:
 [[-1  3  5]
 [ 1  4  9]
 [ 2 10 12]]
</pre>
</div>
</div>

<div id="outline-container-orgeff3e54" class="outline-5">
<h5 id="orgeff3e54">Array reverse</h5>
<div class="outline-text-5" id="text-orgeff3e54">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">ar</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">5</span>)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(ar[::-<span style="color: #f3f99d; font-weight: bold;">1</span>])
</pre>
</div>

<pre class="example">
[4 3 2 1 0]
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org4d4cf3c" class="outline-2">
<h2 id="org4d4cf3c"><span class="section-number-2">5</span> Numpy 檔案輸出輸入</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgd1d4415" class="outline-3">
<h3 id="orgd1d4415"><span class="section-number-3">5.1</span> Numpy v.s. 外部檔案</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-org40c6bf8" class="outline-4">
<h4 id="org40c6bf8"><span class="section-number-4">5.1.1</span> save v.s. load</h4>
<div class="outline-text-4" id="text-5-1-1">
</div>
<div id="outline-container-org9e5caa2" class="outline-5">
<h5 id="org9e5caa2">np.save()</h5>
<div class="outline-text-5" id="text-org9e5caa2">
<p>
語法<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>np.save(filename, array, allow_pickle=<span style="color: #5af78e;">True</span>, fix_imports=<span style="color: #5af78e;">True</span>)
</pre>
</div>
<ul class="org-ul">
<li>filename: 要保存的檔案名。它應該以 .npy 結尾。<br /></li>
<li>array: 要保存的 Numpy 陣列。<br /></li>
<li>allow_pickle: 是否允許保存陣列中的 Python 對象，預設為 True(允許保存 pickle 的風險詳見<a href="#risktopickles">允許使用 pickles 的潛在風險</a>。<br /></li>
<li>fix_imports: 在不同版本的 Python 中，保持相容性。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org3f5a58d" class="outline-5">
<h5 id="org3f5a58d">np.load()</h5>
<div class="outline-text-5" id="text-org3f5a58d">
<p>
語法<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>np.load(<span style="color: #ff6ac1;">file</span>, mmap_mode=<span style="color: #5af78e;">None</span>, allow_pickle=<span style="color: #5af78e;">False</span>, fix_imports=<span style="color: #5af78e;">True</span>, encoding=<span style="color: #f3f99d;">'ASCII'</span>)
</pre>
</div>
<ul class="org-ul">
<li>file: 要加載的檔案名，應為 .npy 或 .npz 格式。<br /></li>
<li>mmap_mode: 如果設置為 &rsquo;r&rsquo;、&rsquo;r+&rsquo;、&rsquo;w+&rsquo; 或 &rsquo;c&rsquo;，則會以記憶體映射模式讀取檔案，這樣可以加快處理非常大的數據集。<br /></li>
<li>allow_pickle: 預設值為 False，表示不允許使用 pickle 加載 Python 對象。當讀取的 .npy 檔案包含 Python 對象時，必須設置為 True。使用 pickle 加載的風險詳見<a href="#risktopickles">允許使用 pickles 的潛在風險</a>。<br /></li>
<li>fix_imports: 保持不同 Python 版本間的相容性，適用於 Python 2 和 Python 3 之間的兼容。<br /></li>
<li>encoding: 在讀取包含 Python 對象的檔案時，對字符編碼進行設置，預設值為 &rsquo;ASCII&rsquo;。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org84effbe" class="outline-5">
<h5 id="org84effbe">np.savetxt()</h5>
<div class="outline-text-5" id="text-org84effbe">
<p>
語法<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>np.savetxt(filenamename, array, fmt=<span style="color: #f3f99d;">'%.18e'</span>, delimiter=<span style="color: #f3f99d;">' '</span>, newline=<span style="color: #f3f99d;">'\n'</span>, header=<span style="color: #f3f99d;">''</span>, footer=<span style="color: #f3f99d;">''</span>, comments=<span style="color: #f3f99d;">'# '</span>, encoding=<span style="color: #5af78e;">None</span>)
</pre>
</div>
<ul class="org-ul">
<li>filenamename: 文件名（可以是 .txt 或 .csv）。<br /></li>
<li>array: 要保存的 Numpy 陣列。<br /></li>
<li>fmt: 格式化字符串，控制每個數據項的輸出格式，預設值為 %.18e。<br /></li>
<li>delimiter: 資料分隔符，默認為空格。<br /></li>
<li>header: 可以在文件的開頭添加註解，作為文件的標題。<br /></li>
<li>footer: 文件結尾的註解。<br /></li>
<li>comments: 註解前的字符，默認為 #。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgb1d795b" class="outline-5">
<h5 id="orgb1d795b">np.loadtxt()</h5>
<div class="outline-text-5" id="text-orgb1d795b">
<p>
語法<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span>np.loadtxt(fname, dtype=<span style="color: #ff6ac1;">float</span>, comments=<span style="color: #f3f99d;">'#'</span>, delimiter=<span style="color: #5af78e;">None</span>, converters=<span style="color: #5af78e;">None</span>, skiprows=<span style="color: #f3f99d; font-weight: bold;">0</span>, usecols=<span style="color: #5af78e;">None</span>, unpack=<span style="color: #5af78e;">False</span>, ndmin=<span style="color: #f3f99d; font-weight: bold;">0</span>, encoding=<span style="color: #f3f99d;">'bytes'</span>, max_rows=<span style="color: #5af78e;">None</span>)
</pre>
</div>
<ul class="org-ul">
<li>fname: 文件名，可以是 .txt 或 .csv 文件。<br /></li>
<li>dtype: 數據類型，預設值為 float，用來指定讀取後的數據類型。<br /></li>
<li>comments: 用來指定註解行的開頭，預設值為 #。這些行在讀取時會被忽略。<br /></li>
<li>delimiter: 資料的分隔符，預設值為 None，可以是空格、逗號或其他自定義符號。<br /></li>
<li>converters: 用來將每列的數據轉換成指定的格式。<br /></li>
<li>skiprows: 忽略文件開頭的幾行，預設值為 0。<br /></li>
<li>usecols: 只讀取指定的列，格式為索引或元組列表。<br /></li>
<li>unpack: 如果為 True，返回的數組將分解為多個變數，預設值為 False。<br /></li>
<li>ndmin: 指定結果數據的最小維度，預設值為 0。<br /></li>
<li>encoding: 字符編碼，預設值為 &rsquo;bytes&rsquo;。<br /></li>
<li>max_rows: 讀取文件時最多讀取的行數，預設值為 None，即讀取整個文件。<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga20c2c5" class="outline-4">
<h4 id="orga20c2c5"><span class="section-number-4">5.1.2</span> Colab</h4>
<div class="outline-text-4" id="text-5-1-2">
<ul class="org-ul">
<li>先<a href="images/scores.csv">點這裡下載範例資料(scores.csv)</a><br /></li>
<li><a href="https://letranger.github.io/AI/20240106142947-colab.html#orga293c31">如何在Colab上傳檔案</a><br /></li>
</ul>
</div>
<div id="outline-container-org27f96bb" class="outline-5">
<h5 id="org27f96bb">load</h5>
<div class="outline-text-5" id="text-org27f96bb">
<p>
在 Numpy 內會使用.loadtxt 或特定的 np.genfromtxt 來讀取文字檔<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">myAry</span> = np.loadtxt(<span style="color: #f3f99d;">'drive/MyDrive/scores.csv'</span>, delimiter=<span style="color: #f3f99d;">','</span>)
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(myAry)
</pre>
</div>

<pre class="example">
[[109.    87.   100.    86.    50.  ]
 [ 86.    66.    68.97  33.2   55.  ]
 [ 82.    51.    72.87  57.    70.  ]
 [ 90.    81.   100.   100.   100.  ]
 [ 80.    45.    39.66   0.     0.  ]
 [ 83.    36.    74.14  20.    10.  ]
 [ 84.    51.    67.24  25.     0.  ]
 [ 75.    72.    89.66  43.    40.  ]
 [ 76.    63.    96.55  40.     0.  ]
 [ 80.    75.   100.    32.8   50.  ]
 [ 85.    96.    89.48  83.7   30.  ]]
</pre>
</div>
</div>
<div id="outline-container-org6c73d3c" class="outline-5">
<h5 id="org6c73d3c">save</h5>
<div class="outline-text-5" id="text-org6c73d3c">
<p>
將處理完的陣列回存成 csv 檔：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">myAry</span> = np.loadtxt(<span style="color: #f3f99d;">'drive/MyDrive/scores.csv'</span>, delimiter=<span style="color: #f3f99d;">','</span>)
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(myAry)
<span class="linenr">4: </span>np.savetxt(<span style="color: #f3f99d;">'drive/MyDrive/newScores.csv'</span>, myAry)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge2d3d46" class="outline-4">
<h4 id="orge2d3d46"><span class="section-number-4">5.1.3</span> PyCharm</h4>
<div class="outline-text-4" id="text-5-1-3">
</div>
<div id="outline-container-org40c55a8" class="outline-5">
<h5 id="org40c55a8">load</h5>
<div class="outline-text-5" id="text-org40c55a8">
<p>
假設:<br />
</p>
<ul class="org-ul">
<li>作業系統: MacOS<br /></li>
<li>使用者名稱: student<br /></li>
<li>資料檔儲存位置: 桌面<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">myAry</span> = np.loadtxt(<span style="color: #f3f99d;">'/Users/student/Desktop/scores.csv'</span>, delimiter=<span style="color: #f3f99d;">','</span>)
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(myAry)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org0ae0650" class="outline-3">
<h3 id="org0ae0650"><span class="section-number-3">5.2</span> 不同格式</h3>
<div class="outline-text-3" id="text-5-2">
<p>
NumPy 提供了多種存取陣列內容的檔案操作函式。儲存陣列資料的檔案可以是二進位制格式或者文字格式。二進位制格式的檔案又分為 NumPy 專用的格式化二進位制型別和無格式型別。<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup><sup>, </sup><sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup><br />
</p>
</div>
</div>
<div id="outline-container-org79dc56e" class="outline-3">
<h3 id="org79dc56e"><span class="section-number-3">5.3</span> Bineary Format</h3>
<div class="outline-text-3" id="text-5-3">
</div>
<div id="outline-container-org3f4cc65" class="outline-4">
<h4 id="org3f4cc65"><span class="section-number-4">5.3.1</span> save(), load()</h4>
<div class="outline-text-4" id="text-5-3-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">a</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">0</span>, <span style="color: #f3f99d; font-weight: bold;">12</span>).reshape(<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>)
<span class="linenr">3: </span><span style="color: #ffb86c;">print</span>(a)
<span class="linenr">4: </span>np.save(<span style="color: #f3f99d;">'a'</span>, a)
<span class="linenr">5: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#35712;&#20837;</span>
<span class="linenr">6: </span><span style="color: #ff5c57;">b</span> = np.load(<span style="color: #f3f99d;">'a.npy'</span>)
<span class="linenr">7: </span><span style="color: #ffb86c;">print</span>(b)
</pre>
</div>

<pre class="example">
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
</pre>
</div>
</div>
<div id="outline-container-orge305501" class="outline-4">
<h4 id="orge305501"><span class="section-number-4">5.3.2</span> savez()</h4>
<div class="outline-text-4" id="text-5-3-2">
<p>
我們可以儲存多個陣列在一個 zip 的檔案中，使用 np.savez 就可以了！<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">aAry</span> = [<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>]
<span class="linenr">3: </span><span style="color: #ff5c57;">bAry</span> = [<span style="color: #f3f99d; font-weight: bold;">7</span>,<span style="color: #f3f99d; font-weight: bold;">8</span>,<span style="color: #f3f99d; font-weight: bold;">9</span>,<span style="color: #f3f99d; font-weight: bold;">10</span>,<span style="color: #f3f99d; font-weight: bold;">11</span>,<span style="color: #f3f99d; font-weight: bold;">12</span>]
<span class="linenr">4: </span><span style="color: #606580;">#</span><span style="color: #606580;">save</span>
<span class="linenr">5: </span>np.savez(<span style="color: #f3f99d;">'ab.npz'</span>, a = aAry, b = bAry)
<span class="linenr">6: </span><span style="color: #606580;">#</span><span style="color: #606580;">load</span>
<span class="linenr">7: </span><span style="color: #ff5c57;">myZip</span> = np.load(<span style="color: #f3f99d;">'ab.npz'</span>)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(myZip[<span style="color: #f3f99d;">'a'</span>])
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(myZip[<span style="color: #f3f99d;">'b'</span>])
</pre>
</div>

<pre class="example">
[1 2 3 4 5 6]
[ 7  8  9 10 11 12]
</pre>
</div>

<div id="outline-container-org8a7f651" class="outline-5">
<h5 id="org8a7f651">讀取</h5>
<div class="outline-text-5" id="text-org8a7f651">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">myZip</span> = np.load(<span style="color: #f3f99d;">'ab.npz'</span>)
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #ff5c57;">a_array</span> = myZip[<span style="color: #f3f99d;">'a'</span>]
<span class="linenr">6: </span><span style="color: #ff5c57;">b_array</span> = myZip[<span style="color: #f3f99d;">'b'</span>]
<span class="linenr">7: </span>
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"a &#38499;&#21015;:"</span>, a_array)
<span class="linenr">9: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"b &#38499;&#21015;:"</span>, b_array)
</pre>
</div>

<pre class="example">
a 陣列: [1 2 3 4 5 6]
b 陣列: [ 7  8  9 10 11 12]
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4594191" class="outline-3">
<h3 id="org4594191"><span class="section-number-3">5.4</span> 讀取混合格式的文字資料</h3>
<div class="outline-text-3" id="text-5-4">
<p>
如果資料中某些欄位的資料格式是字串 (string)，處理起來相當麻煩，改用 numpy.genfromtxt 會比較簡單。<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup><br />
<a href="https://numpy.org/doc/stable/user/basics.io.genfromtxt.html">Importing data with genfromtxt</a><br />
目標文字檔(csv)如下：<br />
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span><span style="color: #9aedfe;">cat</span> cs-scores2.csv
</pre>
</div>
<pre class="example">
學號,平時成績,打字成績,作業成績,期中考,期末考
201811101,109.00,87,100.00,86.00,50.00
201811102,86.00,66,68.97,33.20,55.00
201811103,82.00,51,72.87,57.00,70.00
201811104,90.00,81,100.00,100.00,100.00
201811105,80.00,45,39.66,0.00,0.00
201811106,83.00,36,74.14,20.00,10.00
201811107,84.00,51,67.24,25.00,0.00
201811108,75.00,72,89.66,43.00,40.00
201811109,76.00,63,96.55,40.00,0.00
201811110,80.00,75,100.00,32.80,50.00
201811111,85.00,96,89.48,83.70,30.00
</pre>
<p>
Pyton 3 在讀取文字時，dtype 應設為 U(Unicode)，否則會在讀到的字首多出 b<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span><span style="color: #606580;"># </span><span style="color: #606580;">Python3 is working with Unicode.</span>
<span class="linenr"> 3: </span><span style="color: #606580;"># </span><span style="color: #606580;">I had the same issue when using loadtxt with dtype='S'. But using dtype='U as Unicode string in both numpy.loadtxt or numpy.genfromtxt, it will give output without b</span>
<span class="linenr"> 4: </span><span style="color: #ff5c57;">data</span> = np.genfromtxt(<span style="color: #f3f99d;">"cs-scores2.csv"</span>, delimiter=<span style="color: #f3f99d;">','</span>,
<span class="linenr"> 5: </span>                     dtype=[(<span style="color: #f3f99d;">'id'</span>, <span style="color: #f3f99d;">'U10'</span>), (<span style="color: #f3f99d;">'cls'</span>, <span style="color: #ff6ac1;">float</span>),
<span class="linenr"> 6: </span>                            (<span style="color: #f3f99d;">'typing'</span>, <span style="color: #ff6ac1;">float</span>), (<span style="color: #f3f99d;">'hw'</span>, <span style="color: #ff6ac1;">float</span>),
<span class="linenr"> 7: </span>                            (<span style="color: #f3f99d;">'mid'</span>, <span style="color: #ff6ac1;">float</span>), (<span style="color: #f3f99d;">'finl'</span>, <span style="color: #ff6ac1;">float</span>)],
<span class="linenr"> 8: </span>                     skip_header=<span style="color: #f3f99d; font-weight: bold;">1</span>, encoding=<span style="color: #f3f99d;">'UTF-8'</span>)
<span class="linenr"> 9: </span><span style="color: #ffb86c;">print</span>(<span style="color: #ff6ac1;">type</span>(data))
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(data)
</pre>
</div>

<pre class="example">
&lt;class 'numpy.ndarray'&gt;
[('201811101', 109., 87., 100.  ,  86. ,  50.)
 ('201811102',  86., 66.,  68.97,  33.2,  55.)
 ('201811103',  82., 51.,  72.87,  57. ,  70.)
 ('201811104',  90., 81., 100.  , 100. , 100.)
 ('201811105',  80., 45.,  39.66,   0. ,   0.)
 ('201811106',  83., 36.,  74.14,  20. ,  10.)
 ('201811107',  84., 51.,  67.24,  25. ,   0.)
 ('201811108',  75., 72.,  89.66,  43. ,  40.)
 ('201811109',  76., 63.,  96.55,  40. ,   0.)
 ('201811110',  80., 75., 100.  ,  32.8,  50.)
 ('201811111',  85., 96.,  89.48,  83.7,  30.)]
</pre>
</div>
</div>
<div id="outline-container-orgfd92caa" class="outline-3">
<h3 id="orgfd92caa"><span class="section-number-3">5.5</span> 讀取一個欄位資料</h3>
<div class="outline-text-3" id="text-5-5">
<p>
在 numpy.genfromtxt() 中, 使用 usecols 參數指定取出的欄位編號, 即可取出特定欄位<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ff5c57;">classScore</span> = np.genfromtxt(<span style="color: #f3f99d;">"cs-scores2.csv"</span>, delimiter=<span style="color: #f3f99d;">','</span>, skip_header=<span style="color: #f3f99d; font-weight: bold;">1</span>,
<span class="linenr">4: </span>                     dtype=<span style="color: #ff6ac1;">float</span>, usecols=(<span style="color: #f3f99d; font-weight: bold;">2</span>,), unpack=<span style="color: #5af78e;">True</span>, encoding=<span style="color: #f3f99d;">'UTF-8'</span>)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(classScore)
</pre>
</div>

<pre class="example">
[87. 66. 51. 81. 45. 36. 51. 72. 63. 75. 96.]
</pre>

<p>
*<br />
</p>
</div>
</div>
<div id="outline-container-org6fbca00" class="outline-3">
<h3 id="org6fbca00"><span class="section-number-3">5.6</span> Binary Format  <sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup></h3>
<div class="outline-text-3" id="text-5-6">
<ul class="org-ul">
<li>save() / load()<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ffb86c;">import</span> subprocess
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #ff5c57;">x</span> = np.arange(<span style="color: #f3f99d; font-weight: bold;">20</span>)
<span class="linenr">5: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"&#21407;&#22987;&#20839;&#23481;:"</span>, x)
<span class="linenr">6: </span>np.save(<span style="color: #f3f99d;">"test_array.npy"</span>, x) <span style="color: #606580;">#</span><span style="color: #606580;">.npy</span>
<span class="linenr">7: </span><span style="color: #ff5c57;">y</span> = np.load(<span style="color: #f3f99d;">"test_array.npy"</span>)
<span class="linenr">8: </span><span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"&#35712;&#22238;&#20358;:"</span>, y)
</pre>
</div>

<pre class="example">
原始內容: [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19]
讀回來: [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19]
</pre>


<ul class="org-ul">
<li>savez(): 儲存多個陣列在一個 zip 的檔案中<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #ff5c57;">aData</span> = [<span style="color: #f3f99d; font-weight: bold;">1</span>,<span style="color: #f3f99d; font-weight: bold;">2</span>,<span style="color: #f3f99d; font-weight: bold;">3</span>,<span style="color: #f3f99d; font-weight: bold;">4</span>,<span style="color: #f3f99d; font-weight: bold;">5</span>,<span style="color: #f3f99d; font-weight: bold;">6</span>]
<span class="linenr">3: </span><span style="color: #ff5c57;">bData</span> = [<span style="color: #f3f99d; font-weight: bold;">7</span>,<span style="color: #f3f99d; font-weight: bold;">8</span>,<span style="color: #f3f99d; font-weight: bold;">9</span>,<span style="color: #f3f99d; font-weight: bold;">10</span>,<span style="color: #f3f99d; font-weight: bold;">11</span>,<span style="color: #f3f99d; font-weight: bold;">12</span>]
<span class="linenr">4: </span>np.savez(<span style="color: #f3f99d;">'my_archive.npz'</span>, a=aData, b=bData)
<span class="linenr">5: </span><span style="color: #ff5c57;">myArch</span> = np.load(<span style="color: #f3f99d;">'my_archive.npz'</span>)
<span class="linenr">6: </span><span style="color: #ffb86c;">print</span>(myArch[<span style="color: #f3f99d;">'a'</span>])
</pre>
</div>

<pre class="example">
[1 2 3 4 5 6]
</pre>
</div>
</div>
<div id="outline-container-orge9848b2" class="outline-3">
<h3 id="orge9848b2"><span class="section-number-3">5.7</span> 由網路讀取資料</h3>
<div class="outline-text-3" id="text-5-7">
<p>
Numpy 本身並不能直接從網路讀取文件，它只能從本地文件系統中讀取數據，但可結合其他 Python 標準庫或第三方庫，如 requests、urllib 或 pandas，來從網路獲取文件並將其轉換為 Numpy 數組。<br />
</p>
</div>
<div id="outline-container-org9472bfc" class="outline-4">
<h4 id="org9472bfc"><span class="section-number-4">5.7.1</span> requests</h4>
<div class="outline-text-4" id="text-5-7-1">
<ul class="org-ul">
<li>StringIO(response.text)：將下載的文件內容轉換為類似文件的對象，使 Numpy 可以進一步讀取。<br /></li>
<li>np.genfromtxt()：用 Numpy 讀取該文件對象，並將其轉換為 Numpy 陣列。<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 2: </span><span style="color: #ffb86c;">import</span> requests
<span class="linenr"> 3: </span><span style="color: #ffb86c;">from</span> io <span style="color: #ffb86c;">import</span> StringIO
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #ff5c57;">url</span> = <span style="color: #f3f99d;">'https://letranger.github.io/PythonCourse/scores.csv'</span>
<span class="linenr"> 6: </span><span style="color: #ff5c57;">response</span> = requests.get(url)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #ff5c57;">data</span> = np.genfromtxt(StringIO(response.text), delimiter=<span style="color: #f3f99d;">','</span>)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(data)
</pre>
</div>

<pre class="example">
[[   nan    nan    nan    nan    nan    nan]
 [   nan 100.    72.    92.11  48.    16.  ]
 [   nan  96.    56.    93.42  60.    40.  ]
 ...
 [   nan  83.    48.   102.63  83.    75.  ]
 [   nan  87.    84.   105.26 112.3  103.  ]
 [   nan  96.    72.   102.63  91.   100.  ]]
</pre>
</div>
</div>
<div id="outline-container-org2d7a298" class="outline-4">
<h4 id="org2d7a298"><span class="section-number-4">5.7.2</span> pandas</h4>
<div class="outline-text-4" id="text-5-7-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> pandas <span style="color: #ffb86c;">as</span> pd
<span class="linenr"> 2: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#24478;&#32178;&#36335;&#19978;&#35712;&#21462; CSV &#25991;&#20214;</span>
<span class="linenr"> 5: </span><span style="color: #ff5c57;">url</span> = <span style="color: #f3f99d;">'https://letranger.github.io/PythonCourse/scores.csv'</span>
<span class="linenr"> 6: </span><span style="color: #ff5c57;">dataframe</span> = pd.read_csv(url)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #ff5c57;">numpy_array</span> = dataframe.to_numpy()
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #ffb86c;">print</span>(numpy_array)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-risktopickles" class="outline-2">
<h2 id="risktopickles"><span class="section-number-2">6</span> 允許使用 pickles 的潛在風險</h2>
<div class="outline-text-2" id="text-risktopickles">
<p>
關於在 python 中使用 pickles 可能有的問題可以來看<a href="https://www.ithome.com.tw/news/163545">這篇文章</a><sup><a id="fnr.10" class="footref" href="#fn.10">10</a></sup>，這裡只簡單示範一下情境。<br />
</p>

<p>
當 Numpy 陣列包含非數字類型的資料（如自定義 Python object、函數等）時，Numpy 會使用 Python 的 pickle 機制來序列化（保存）和反序列化（載入）這些資料。<br />
</p>

<p>
np.save() 函數中的 allow_pickle 參數決定了是否允許使用 pickle 來保存和加載這些 object。如果你保存的 Numpy 陣列只包含數字類型的數據（如整數、浮點數等），pickle 並不會被用到。但如果陣列包含 Python object，Numpy 會使用 pickle 來處理這些 obejct。<br />
</p>
</div>
<div id="outline-container-org8f5d3e5" class="outline-3">
<h3 id="org8f5d3e5"><span class="section-number-3">6.1</span> 安全範例</h3>
<div class="outline-text-3" id="text-6-1">
</div>
<div id="outline-container-orgbc2c838" class="outline-4">
<h4 id="orgbc2c838"><span class="section-number-4">6.1.1</span> 儲存</h4>
<div class="outline-text-4" id="text-6-1-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#24314;&#31435;&#19968;&#20491;&#21253;&#21547; Python &#23383;&#20856;&#30340; Numpy &#38499;&#21015;</span>
<span class="linenr">4: </span><span style="color: #ff5c57;">arr</span> = np.array([{<span style="color: #f3f99d;">'name'</span>: <span style="color: #f3f99d;">'Alice'</span>}, {<span style="color: #f3f99d;">'name'</span>: <span style="color: #f3f99d;">'Bob'</span>}])
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#20445;&#23384;&#38499;&#21015;&#21040; 'array_with_dict.npy' &#25991;&#20214;&#20013;&#65292;&#20351;&#29992; allow_pickle=True</span>
<span class="linenr">7: </span>np.save(<span style="color: #f3f99d;">'array_with_dict.npy'</span>, arr, allow_pickle=<span style="color: #5af78e;">True</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org6412938" class="outline-4">
<h4 id="org6412938"><span class="section-number-4">6.1.2</span> 載入</h4>
<div class="outline-text-4" id="text-6-1-2">
</div>
<div id="outline-container-org9304d37" class="outline-5">
<h5 id="org9304d37">允許 pickle</h5>
<div class="outline-text-5" id="text-org9304d37">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#21152;&#36617;&#20445;&#23384;&#30340; 'array_with_dict.npy' &#25991;&#20214;</span>
<span class="linenr">3: </span><span style="color: #ff5c57;">loaded_arr</span> = np.load(<span style="color: #f3f99d;">'array_with_dict.npy'</span>, allow_pickle=<span style="color: #5af78e;">True</span>)
<span class="linenr">4: </span><span style="color: #ffb86c;">print</span>(loaded_arr)
</pre>
</div>

<pre class="example">
[{'name': 'Alice'} {'name': 'Bob'}]
</pre>
</div>
</div>
<div id="outline-container-orgd94f91d" class="outline-5">
<h5 id="orgd94f91d">禁止 pickle</h5>
<div class="outline-text-5" id="text-orgd94f91d">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#22039;&#35430;&#21152;&#36617;&#26178;&#31105;&#27490;&#20351;&#29992; pickle&#65292;&#23559;&#25291;&#20986;&#37679;&#35492;</span>
<span class="linenr">3: </span><span style="color: #ff5c57;">loaded_arr</span> = np.load(<span style="color: #f3f99d;">'array_with_dict.npy'</span>, allow_pickle=<span style="color: #5af78e;">False</span>)
</pre>
</div>

<pre class="example">
ValueError: Object arrays cannot be loaded when allow_pickle=False
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb36d715" class="outline-3">
<h3 id="orgb36d715"><span class="section-number-3">6.2</span> 危險範例(npy)</h3>
<div class="outline-text-3" id="text-6-2">
<ul class="org-ul">
<li>.npy 文件中的函數並非真正的函數代碼，而是對該函數的引用。<br /></li>
<li>Python 需要在反序列化時依據記錄的名稱和模組信息找到該函數的定義。如果這個函數沒有重新定義，Python 就找不到它。<br /></li>
</ul>
</div>
<div id="outline-container-org838a001" class="outline-4">
<h4 id="org838a001"><span class="section-number-4">6.2.1</span> 儲存</h4>
<div class="outline-text-4" id="text-6-2-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #ffb86c;">def</span> <span style="color: #57c7ff;">malicious_function</span>():
<span class="linenr">4: </span>    <span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"&#25105;&#26159;&#24801;&#24847;&#20195;&#30908;&#65292;&#20320;&#24050;&#32147;&#34987;&#20837;&#20405;&#20102;&#21834;&#21704;&#21704;&#21704;...."</span>)
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #ff5c57;">arr</span> = np.array([malicious_function], dtype=<span style="color: #ff6ac1;">object</span>)
<span class="linenr">7: </span>
<span class="linenr">8: </span>np.save(<span style="color: #f3f99d;">'malicious_array.npy'</span>, arr, allow_pickle=<span style="color: #5af78e;">True</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org818a890" class="outline-4">
<h4 id="org818a890"><span class="section-number-4">6.2.2</span> 載入</h4>
<div class="outline-text-4" id="text-6-2-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> numpy <span style="color: #ffb86c;">as</span> np
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#22312;&#36617;&#20837;&#20043;&#21069;&#65292;&#37325;&#26032;&#23450;&#32681;&#35442;&#20989;&#25976;</span>
<span class="linenr">4: </span><span style="color: #ffb86c;">def</span> <span style="color: #57c7ff;">malicious_function</span>():
<span class="linenr">5: </span>    <span style="color: #ffb86c;">print</span>(<span style="color: #f3f99d;">"&#25105;&#26159;&#27604;&#36611;&#27794;&#27578;&#20663;&#21147;&#30340;&#24801;&#24847;&#20195;&#30908;QQ&#65292;&#20320;&#24050;&#32147;&#34987;&#20837;&#20405;&#20102;...."</span>)
<span class="linenr">6: </span>
<span class="linenr">7: </span><span style="color: #ff5c57;">loaded_arr</span> = np.load(<span style="color: #f3f99d;">'malicious_array.npy'</span>, allow_pickle=<span style="color: #5af78e;">True</span>)
<span class="linenr">8: </span>
<span class="linenr">9: </span>loaded_arr[<span style="color: #f3f99d; font-weight: bold;">0</span>]()
</pre>
</div>

<pre class="example">
我是比較沒殺傷力的惡意代碼 QQ，你已經被入侵了....
</pre>
</div>
</div>
</div>
<div id="outline-container-orga634ce1" class="outline-3">
<h3 id="orga634ce1"><span class="section-number-3">6.3</span> 危險範例(pickle)</h3>
<div class="outline-text-3" id="text-6-3">
</div>
<div id="outline-container-orgbb480a3" class="outline-4">
<h4 id="orgbb480a3"><span class="section-number-4">6.3.1</span> 儲存</h4>
<div class="outline-text-4" id="text-6-3-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #ffb86c;">import</span> pickle
<span class="linenr"> 2: </span><span style="color: #ffb86c;">import</span> os
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #ffb86c;">class</span> <span style="color: #9aedfe;">MaliciousClass</span>:
<span class="linenr"> 5: </span>    <span style="color: #ffb86c;">def</span> <span style="color: #57c7ff;">__reduce__</span>(<span style="color: #ffb86c;">self</span>):
<span class="linenr"> 6: </span>        <span style="color: #606580;"># </span><span style="color: #606580;">&#22312;&#21453;&#24207;&#21015;&#21270;&#26178;&#26371;&#22519;&#34892;&#36889;&#34892;&#65292;&#36889;&#35041;&#25105;&#20497;&#20351;&#29992; os.system() &#22519;&#34892;&#21629;&#20196;</span>
<span class="linenr"> 7: </span>        <span style="color: #ffb86c;">return</span> (os.system, (<span style="color: #f3f99d;">"echo '&#25105;&#26159;&#24801;&#24847;&#20195;&#30908;&#65292;&#20320;&#24050;&#32147;&#34987;&#20837;&#20405;&#20102;&#21834;&#21704;&#21704;&#21704;....'"</span>,))
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #ffb86c;">with</span> <span style="color: #ff6ac1;">open</span>(<span style="color: #f3f99d;">'malicious.pkl'</span>, <span style="color: #f3f99d;">'wb'</span>) <span style="color: #ffb86c;">as</span> f:
<span class="linenr">10: </span>    pickle.dump(MaliciousClass(), f)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc5d4760" class="outline-4">
<h4 id="orgc5d4760"><span class="section-number-4">6.3.2</span> 載入</h4>
<div class="outline-text-4" id="text-6-3-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #ffb86c;">import</span> pickle
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #606580;"># </span><span style="color: #606580;">&#24478; pickle &#27284;&#26696;&#20013;&#36617;&#20837;&#36039;&#26009;&#65292;&#26371;&#22519;&#34892; __reduce__ &#26041;&#27861;&#20013;&#30340;&#24801;&#24847;&#20195;&#30908;</span>
<span class="linenr">4: </span><span style="color: #ffb86c;">with</span> <span style="color: #ff6ac1;">open</span>(<span style="color: #f3f99d;">'malicious.pkl'</span>, <span style="color: #f3f99d;">'rb'</span>) <span style="color: #ffb86c;">as</span> f:
<span class="linenr">5: </span>    pickle.load(f)
</pre>
</div>

<pre class="example">
我是惡意代碼，你已經被入侵了啊哈哈哈....
</pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
DEFINITION NOT FOUND.<br />
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://zh.wikipedia.org/wiki/NumPy">NumPy</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
ChatGPT 4o. 提示詞:&ldquo;numpy 的 ndarray 和 matrix 有什麼差異?&rdquo;<br />
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.brilliantcode.net/1093/numpy-1-14-tutorial-04-indexing-slicing-iterating-from-function/">NumPy 1.14 教學:索引(Indexing)、切片(Slicing)、迭代(Iterating)、From Function</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10196167">[Day18]Numpy檔案輸入與輸出！ </a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/570647/">NumPy 檔案存取 tofile，fromfile， load，save</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://hackmd.io/@yizhewang/HJjG8ha5r">使用 numpy.genfromtxt 讀取混合格式的資料</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
<a href="https://stackoverflow.com/questions/33655641/b-character-added-when-using-numpy-loadtxt">&rsquo;b&rsquo; character added when using numpy loadtxt</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10196167">Day18-Numpy檔案輸入與輸出!</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.ithome.com.tw/news/163545">研究人員揭露針對機器學習模型而來的攻擊手法Sleepy Pickle</a><br />
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Yung Chin, Yen</p>
<p class="date">Created: 2025-02-11 Tue 09:46</p>
</div>
</body>
</html>
