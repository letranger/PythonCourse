<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-04-28 Mon 16:22 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Advanced Materials of Python</title>
<meta name="author" content="Yung-Chin Yen" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="../css/muse.css" />
<script src="../css/copy_code.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Advanced Materials of Python</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org7f6c9a2">1. Function II</a>
<ul>
<li><a href="#org3e01c97">1.1. Function的特性</a></li>
<li><a href="#org7048225">1.2. lambda</a></li>
<li><a href="#orgc1ed05b">1.3. decorator</a></li>
<li><a href="#orgcfe3a74">1.4. *args and **kwargs</a></li>
<li><a href="#org62edffe">1.5. Unpack function parameters</a></li>
<li><a href="#org186925b">1.6. Return or not</a></li>
</ul>
</li>
<li><a href="#org8e76e6b">2. Class v.s. Object</a>
<ul>
<li><a href="#orga50a328">2.1. <span class="todo TODO">TODO</span> 什麼是class? 什麼是object?</a></li>
<li><a href="#org889bac4">2.2. 建立自己的class</a></li>
<li><a href="#orgfa24d13">2.3. == v.s. is</a></li>
<li><a href="#org7f9680c">2.4. Shallow copy v.s. Deep copy</a></li>
<li><a href="#orgcf402b0">2.5. ABC: Abstract Base Class</a></li>
<li><a href="#orge1f973c">2.6. object/class/static method</a></li>
<li><a href="#org09d7ef6">2.7. class variable v.s. instance variable</a></li>
</ul>
</li>
<li><a href="#org5cc2e0a">3. 資料型別 II</a>
<ul>
<li><a href="#org6def7d6">3.1. Dict</a></li>
<li><a href="#org1944ea6">3.2. types.MappingProxyType</a></li>
<li><a href="#org3b25ba1">3.3. array.array</a></li>
<li><a href="#orgffc4e97">3.4. Record</a></li>
<li><a href="#org0ab623b">3.5. Set</a></li>
<li><a href="#org10eb216">3.6. Stack</a></li>
<li><a href="#orga89b2cb">3.7. Queue</a></li>
</ul>
</li>
<li><a href="#org54f65cf">4. <span class="todo LOOP">LOOP</span> </a>
<ul>
<li><a href="#org98a8df5">4.1. enumerate()</a></li>
<li><a href="#org829f877">4.2. zip()</a></li>
<li><a href="#orgd980cdf">4.3. comprehension</a></li>
<li><a href="#org1d20136">4.4. list</a></li>
</ul>
</li>
<li><a href="#org0fd135e">5. Python 套件管理</a>
<ul>
<li><a href="#org40ae3e7">5.1. pip v.s. conda</a></li>
<li><a href="#org5e374d1">5.2. conda 安裝與使用</a></li>
<li><a href="#org6834bf2">5.3. python package 安裝(conda)</a></li>
<li><a href="#orga1a0e5a">5.4. Python 常用函式庫</a></li>
<li><a href="#org9fe5621">5.5. python 執行環境建立與維護</a></li>
<li><a href="#orgd81d24c">5.6. 將執行環境匯入 jupyter</a></li>
<li><a href="#orga610651">5.7. poetry</a></li>
</ul>
</li>
<li><a href="#orga2e6987">6. <span class="todo TODO">TODO</span> Multiprocessing</a>
<ul>
<li><a href="#orgd70056f">6.1. 執行緒 vs. 程序</a></li>
<li><a href="#org4be13a3">6.2. 非執行緒的程式</a></li>
<li><a href="#org8bf6ec6">6.3. 建立及執行執行緒</a></li>
<li><a href="#org6604e02">6.4. Futher Reading</a></li>
</ul>
</li>
<li><a href="#orgf342f6b">7. <span class="todo TODO">TODO</span> Interactive Plots in Jupyter Notebook</a></li>
</ul>
</div>
</div>
<a href="https://hits.sh/letranger.github.io/PythonCourse/PythonAdvanced.html/"><img align="right" alt="Hits" src="https://hits.sh/letranger.github.io/PythonCourse/PythonAdvanced.html.svg?style=plastic"/></a>
<div id="outline-container-org7f6c9a2" class="outline-2">
<h2 id="org7f6c9a2"><span class="section-number-2">1.</span> Function II</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org3e01c97" class="outline-3">
<h3 id="org3e01c97"><span class="section-number-3">1.1.</span> Function的特性</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-org80976f2" class="outline-4">
<h4 id="org80976f2"><span class="section-number-4">1.1.1.</span> Fnction為物件</h4>
<div class="outline-text-4" id="text-1-1-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">yell</span>(text):
<span class="linenr">2: </span>    <span style="color: #51afef;">return</span> text.upper() + <span style="color: #98be65;">'!'</span>
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(yell(<span style="color: #98be65;">'hello'</span>))
<span class="linenr">5: </span><span style="color: #dcaeea;">bark</span> = yell <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assign&#32102;&#20854;&#20182;&#35722;&#25976;</span>
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(bark(<span style="color: #98be65;">'woof'</span>))
</pre>
</div>

<pre class="example">
HELLO!
WOOF!
</pre>
</div>
</div>
<div id="outline-container-orgb01adb0" class="outline-4">
<h4 id="orgb01adb0"><span class="section-number-4">1.1.2.</span> Function可被放在資料結構中</h4>
<div class="outline-text-4" id="text-1-1-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">yell</span>(text):
<span class="linenr">2: </span>    <span style="color: #51afef;">return</span> text.upper() + <span style="color: #98be65;">'!'</span>
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #dcaeea;">bark</span> = yell
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #dcaeea;">funcs</span> = [bark, <span style="color: #c678dd;">str</span>.lower, <span style="color: #c678dd;">str</span>.capitalize]
<span class="linenr">7: </span>
<span class="linenr">8: </span><span style="color: #51afef;">for</span> func <span style="color: #51afef;">in</span> funcs:
<span class="linenr">9: </span>    <span style="color: #c678dd;">print</span>(func(<span style="color: #98be65;">'hey there!'</span>))
</pre>
</div>

<pre class="example">
HEY THERE!!
hey there!
Hey there!
</pre>
</div>
</div>
<div id="outline-container-org80277b5" class="outline-4">
<h4 id="org80277b5"><span class="section-number-4">1.1.3.</span> Function可做為參數傳給其他function</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
Function是物件，所以除了能指定給變數，更可以當成其他function的參數。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">yell</span>(text):
<span class="linenr"> 2: </span>    <span style="color: #51afef;">return</span> text.upper() + <span style="color: #98be65;">'!'</span>
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #dcaeea;">bark</span> = yell
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">greet</span>(func):
<span class="linenr"> 7: </span>    <span style="color: #dcaeea;">greeting</span> = func(<span style="color: #98be65;">'Hi, I am a Python Program'</span>)
<span class="linenr"> 8: </span>    <span style="color: #c678dd;">print</span>(greeting)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>greet(bark)
</pre>
</div>

<pre class="example">
HI, I AM A PYTHON PROGRAM!
</pre>

<p>
這種能接續其他function做為參數的格式也稱為高階function(higher-order function)。Python內建的map function即為higher-order的經典範例，它接受一個function object與一個可走訪物件(iterable)做為參數，然後會套用該function到iterable object內的每一元素，產出一系列結果：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #c678dd;">list</span> = <span style="color: #c678dd;">map</span>(function, iterable <span style="color: #c678dd;">object</span>)
</pre>
</div>

<p>
例如：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">yellp</span>(text):
<span class="linenr">2: </span>    <span style="color: #51afef;">return</span> text.upper() + <span style="color: #98be65;">'!'</span>
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #dcaeea;">bark</span> = yell
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #dcaeea;">list1</span> = [<span style="color: #98be65;">'hello'</span>, <span style="color: #98be65;">'hey'</span>, <span style="color: #98be65;">'hi'</span>]
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">list</span>(<span style="color: #c678dd;">map</span>(bark, list1)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga6964c1" class="outline-4">
<h4 id="orga6964c1"><span class="section-number-4">1.1.4.</span> Function可構成巢狀結構</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
在function內定義function，稱之為巢狀function(nested function)或內部function(inner function)<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">speak</span>(text):
<span class="linenr">2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">whisper</span>(t):
<span class="linenr">3: </span>        <span style="color: #51afef;">return</span> t.lower() + <span style="color: #98be65;">'...'</span>
<span class="linenr">4: </span>    <span style="color: #51afef;">return</span> whisper(text)
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(speak(<span style="color: #98be65;">'Hello, world'</span>))
</pre>
</div>

<pre class="example">
hello, world...
</pre>

<p>
每次呼叫speak時，它會先定義內部function,而這個inner function在speak外並不存在。若一定要在speak之外存取內部function whisper，則要先把內部function傳回給父function的呼叫者：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">get_speak_func</span>(volume):
<span class="linenr"> 2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">whisper</span>(text):
<span class="linenr"> 3: </span>        <span style="color: #51afef;">return</span> text.lower() + <span style="color: #98be65;">'...'</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">yell</span>(text):
<span class="linenr"> 5: </span>        <span style="color: #51afef;">return</span> text.upper() + <span style="color: #98be65;">'!'</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">if</span> volume &gt; <span style="color: #da8548; font-weight: bold;">0.5</span>:
<span class="linenr"> 7: </span>        <span style="color: #51afef;">return</span> yell
<span class="linenr"> 8: </span>    <span style="color: #51afef;">else</span>:
<span class="linenr"> 9: </span>        <span style="color: #51afef;">return</span> whisper
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #c678dd;">print</span>(get_speak_func(<span style="color: #da8548; font-weight: bold;">0.3</span>))
<span class="linenr">12: </span><span style="color: #c678dd;">print</span>(get_speak_func(<span style="color: #da8548; font-weight: bold;">0.7</span>))
</pre>
</div>

<pre class="example">
&lt;function get_speak_func.&lt;locals&gt;.whisper at 0x101986af0&gt;
&lt;function get_speak_func.&lt;locals&gt;.yell at 0x101986a60&gt;
</pre>
</div>
</div>
<div id="outline-container-org68536e7" class="outline-4">
<h4 id="org68536e7"><span class="section-number-4">1.1.5.</span> Inner function可記住父function的參數狀態</h4>
<div class="outline-text-4" id="text-1-1-5">
<p>
Function還可「捕捉並保留父function的部份狀態」：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">get_speak_func</span>(text, volume):
<span class="linenr"> 2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">whisper</span>():
<span class="linenr"> 3: </span>        <span style="color: #51afef;">return</span> text.lower() + <span style="color: #98be65;">'...'</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">yell</span>():
<span class="linenr"> 5: </span>        <span style="color: #51afef;">return</span> text.upper() + <span style="color: #98be65;">'!'</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">if</span> volume &gt; <span style="color: #da8548; font-weight: bold;">0.5</span>:
<span class="linenr"> 7: </span>        <span style="color: #51afef;">return</span> yell
<span class="linenr"> 8: </span>    <span style="color: #51afef;">else</span>:
<span class="linenr"> 9: </span>        <span style="color: #51afef;">return</span> whisper
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #dcaeea;">func</span> = get_speak_func(<span style="color: #98be65;">'Hello, world'</span>, <span style="color: #da8548; font-weight: bold;">0.7</span>)
<span class="linenr">12: </span><span style="color: #c678dd;">print</span>(func())
</pre>
</div>

<pre class="example">
HELLO, WORLD!
</pre>

<p>
這種會捕捉並記住外部參數的function，稱之為詞法閉包(lexical closuer)，或簡稱閉包(closure)。閉包會記住外圍程式範圍裡的變數值，即便其程式流程已經離開該變數所在的範圍也一樣。<br />
</p>
</div>
</div>
<div id="outline-container-orgc1f60d5" class="outline-4">
<h4 id="orgc1f60d5"><span class="section-number-4">1.1.6.</span> 物件也能像function一樣被呼叫</h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
在Python中，function皆為object，反之object不見得是function，不過，我們能讓不是function的object變成可呼叫(callable)，許多情況下，甚至可以把callable object當成function，在後面加上小括號來呼叫它，甚至能傳入參數。要使object變為callable，方法是在類別加入__call__：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Addr</span>:
<span class="linenr">2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">__init__</span>(<span style="color: #51afef;">self</span>, n):
<span class="linenr">3: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">n</span> = n
<span class="linenr">4: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">__call__</span>(<span style="color: #51afef;">self</span>, x):
<span class="linenr">5: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.n + x
<span class="linenr">6: </span>
<span class="linenr">7: </span><span style="color: #dcaeea;">plus_3</span> = Addr(<span style="color: #da8548; font-weight: bold;">3</span>) <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#24314;&#31435;Addr&#29289;&#20214;&#65292;&#23660;&#24615;n=3</span>
<span class="linenr">8: </span><span style="color: #c678dd;">print</span>(plus_3(<span style="color: #da8548; font-weight: bold;">4</span>))
</pre>
</div>

<pre class="example">
7
</pre>
</div>
</div>
</div>
<div id="outline-container-org7048225" class="outline-3">
<h3 id="org7048225"><span class="section-number-3">1.2.</span> lambda</h3>
<div class="outline-text-3" id="text-1-2">
<p>
lambda提供了可用來宣告小型匿㢱function的快速宣告方式:<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #dcaeea;">&#20989;&#24335;&#21517;&#31281;</span> = <span style="color: #51afef;">lambda</span> &#21443;&#25976;:&#36939;&#31639;&#24335;
</pre>
</div>

<p>
這種語法也稱為function expression，這與用def宣告的function一樣<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">add</span> = <span style="color: #51afef;">lambda</span> x, y : x + y
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #c678dd;">print</span>(add(<span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">3</span>))
</pre>
</div>

<pre class="example">
8
</pre>

<p>
那麼，以lambda定義function的優勢為何？<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #c678dd;">print</span>((<span style="color: #51afef;">lambda</span> x, y : x + y)(<span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">3</span>))
</pre>
</div>

<pre class="example">
8
</pre>

<p>
在許多場合中，使用lambda來定義臨時性的function就比較方便，但labmda function有個語法上的限制：只能含有一條運算式。<br />
</p>

<p>
lambda function使用時機: 任何需要快速用上function object的地方，例如sorted()：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #c678dd;">sorted</span>(iterable <span style="color: #c678dd;">object</span>, key=function)
</pre>
</div>

<p>
其中參數key可輸入一個function, sorted()會依據function的傳回值來排序物件的元素，如果忽略key參數，則會依據原始元素(或者元素的第一個值)來排序。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">tuples_list</span> = [(<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #98be65;">'d'</span>), (<span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #98be65;">'b'</span>), (<span style="color: #da8548; font-weight: bold;">4</span>, <span style="color: #98be65;">'a'</span>), (<span style="color: #da8548; font-weight: bold;">3</span>, <span style="color: #98be65;">'c'</span>)]
<span class="linenr">2: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">sorted</span>(tuples_list))
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">sorted</span>(tuples_list, key=<span style="color: #51afef;">lambda</span> x: x[<span style="color: #da8548; font-weight: bold;">1</span>])) <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#25351;&#23450;key&#20197;tuple&#20803;&#32032;&#30340;&#31532;&#20108;&#23376;&#20803;&#32032;&#20358;&#25490;&#24207;</span>
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">sorted</span>(<span style="color: #c678dd;">range</span>(-<span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">6</span>), key=<span style="color: #51afef;">lambda</span> x: x**<span style="color: #da8548; font-weight: bold;">2</span>)) <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#25351;&#23450;&#20381;&#24179;&#26041;&#20540;&#20358;&#25490;&#24207;</span>
<span class="linenr">6: </span><span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#19978;&#36848;&#26041;&#24335;&#21482;&#26159;&#28858;&#23637;&#31034;lambda&#29992;&#27861;&#65292;&#26356;&#31934;&#31777;&#30340;&#26041;&#24335;&#28858;:</span>
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">sorted</span>(<span style="color: #c678dd;">range</span>(-<span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">6</span>), key=<span style="color: #c678dd;">abs</span>))
</pre>
</div>

<pre class="example">
[(1, 'd'), (2, 'b'), (3, 'c'), (4, 'a')]
[(4, 'a'), (2, 'b'), (3, 'c'), (1, 'd')]
[0, -1, 1, -2, 2, -3, 3, -4, 4, -5, 5]
[0, -1, 1, -2, 2, -3, 3, -4, 4, -5, 5]
</pre>


<p>
使用lambda的缺點：不易閱讀<br />
</p>
</div>
</div>
<div id="outline-container-orgc1ed05b" class="outline-3">
<h3 id="orgc1ed05b"><span class="section-number-3">1.3.</span> decorator</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Python的修飾器(decorator)可用來間接修改callable object(function, method, class)的行為，但不直接改動object本身，其用途包括:<br />
</p>
<ul class="org-ul">
<li>加入日誌(logging)<br /></li>
<li>存取權限管控與身份驗證<br /></li>
<li>加入監測function及衡量執行時間<br /></li>
<li>限制function執行頻率<br /></li>
<li>用快取暫存function的執行結果<br /></li>
</ul>
</div>
<div id="outline-container-orgfc52a41" class="outline-4">
<h4 id="orgfc52a41"><span class="section-number-4">1.3.1.</span> 修飾無參數function</h4>
<div class="outline-text-4" id="text-1-3-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">uppercase</span>(func):
<span class="linenr"> 2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">wrapper</span>():
<span class="linenr"> 3: </span>        <span style="color: #dcaeea;">original_result</span> = func()
<span class="linenr"> 4: </span>        <span style="color: #dcaeea;">modified_result</span> = original_result.upper()
<span class="linenr"> 5: </span>        <span style="color: #51afef;">return</span> modified_result
<span class="linenr"> 6: </span>    <span style="color: #51afef;">return</span> wrapper
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #ECBE7B;">@uppercase</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#20197;uppercase&#20462;&#39166;greet</span>
<span class="linenr"> 9: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">greet</span>():
<span class="linenr">10: </span>    <span style="color: #51afef;">return</span> <span style="color: #98be65;">'Hello'</span>
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #c678dd;">print</span>(greet())
</pre>
</div>

<pre class="example">
HELLO
</pre>
</div>
</div>
<div id="outline-container-orga34f9a4" class="outline-4">
<h4 id="orga34f9a4"><span class="section-number-4">1.3.2.</span> 多重修飾</h4>
<div class="outline-text-4" id="text-1-3-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">strong</span>(func):
<span class="linenr"> 2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">wrapper</span>():
<span class="linenr"> 3: </span>        <span style="color: #51afef;">return</span> f<span style="color: #98be65;">'&lt;strong&gt; </span>{ func() }<span style="color: #98be65;"> &lt;/strong&gt;'</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">return</span> wrapper
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">emphasis</span>(func):
<span class="linenr"> 7: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">wrapper</span>():
<span class="linenr"> 8: </span>        <span style="color: #51afef;">return</span> f<span style="color: #98be65;">'&lt;em&gt; </span>{ func() }<span style="color: #98be65;"> &lt;/em&gt;'</span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">return</span> wrapper
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #ECBE7B;">@strong</span>
<span class="linenr">12: </span><span style="color: #ECBE7B;">@emphasis</span>
<span class="linenr">13: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">greet</span>():
<span class="linenr">14: </span>    <span style="color: #51afef;">return</span> <span style="color: #98be65;">'Hello!'</span>
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #c678dd;">print</span>(greet)
<span class="linenr">17: </span><span style="color: #c678dd;">print</span>(greet())
</pre>
</div>

<pre class="example">
&lt;function strong.&lt;locals&gt;.wrapper at 0x10fd3ab80&gt;
&lt;strong&gt; &lt;em&gt; Hello! &lt;/em&gt; &lt;/strong&gt;
</pre>

<p>
唯一要注意的是：若套用修飾器的層級過多會影響程式執行效能。<br />
</p>
</div>
</div>
<div id="outline-container-orgf8843b5" class="outline-4">
<h4 id="orgf8843b5"><span class="section-number-4">1.3.3.</span> 修飾有傳入參數的function</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
若要修飾的function有帶參數，則wrapper()要改為wrapper(*args, **kwargs),這分別用來收集所有傳入的positional與keyword類參數，以tuple及dict形式儲存在arfs與kwargs變數裡，然後wrapper利用*與**將收集到的參數unpack後傳給原始func，如此就不會限制到參數個數。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">trace</span>(func):
<span class="linenr"> 2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">wrapper</span>(*args, **kwargs):
<span class="linenr"> 3: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'trace: callable function </span>{func.<span style="color: #c678dd;">__name__</span>}<span style="color: #98be65;">, with arguments: </span>{args}<span style="color: #98be65;">, </span>{kwargs}<span style="color: #98be65;">'</span>)
<span class="linenr"> 4: </span>        <span style="color: #dcaeea;">original_results</span> = func(*args, **kwargs)
<span class="linenr"> 5: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'trace: function </span>{func.<span style="color: #c678dd;">__name__</span>}<span style="color: #98be65;"> reutrn results: </span>{original_results}<span style="color: #98be65;">!'</span>)
<span class="linenr"> 6: </span>        <span style="color: #51afef;">return</span> original_results
<span class="linenr"> 7: </span>    <span style="color: #51afef;">return</span> wrapper
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #ECBE7B;">@trace</span>
<span class="linenr">10: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">say</span>(name, line):
<span class="linenr">11: </span>    <span style="color: #51afef;">return</span> f<span style="color: #98be65;">'</span>{name}<span style="color: #98be65;">, </span>{line}<span style="color: #98be65;">'</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(say(<span style="color: #98be65;">'James'</span>, <span style="color: #98be65;">'hi'</span>))
</pre>
</div>

<pre class="example">
trace: callable function say, with arguments: ('James', 'hi'), {}
trace: function say reutrn results: James, hi!
James, hi
</pre>


<p>
幫function加上效能監測功能<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> time
<span class="linenr"> 2: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">eval_time</span>(func):
<span class="linenr"> 3: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">wrapper</span>(*args, **kwargs):
<span class="linenr"> 4: </span>        <span style="color: #dcaeea;">start</span> = time.perf_counter()
<span class="linenr"> 5: </span>        <span style="color: #dcaeea;">res</span> = func(*args, **kwargs)
<span class="linenr"> 6: </span>        <span style="color: #dcaeea;">finish</span> = time.perf_counter()
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'Finished in </span>{<span style="color: #c678dd;">round</span>(finish-start, 2)}<span style="color: #98be65;"> second(s)'</span>)
<span class="linenr"> 8: </span>        <span style="color: #51afef;">return</span> res
<span class="linenr"> 9: </span>    <span style="color: #51afef;">return</span> wrapper
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #ECBE7B;">@eval_time</span>
<span class="linenr">12: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">sigma</span>(n):
<span class="linenr">13: </span>    <span style="color: #c678dd;">sum</span> = <span style="color: #da8548; font-weight: bold;">0</span>
<span class="linenr">14: </span>    <span style="color: #51afef;">for</span> i <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(n):
<span class="linenr">15: </span>        <span style="color: #c678dd;">sum</span> = <span style="color: #c678dd;">sum</span> + i
<span class="linenr">16: </span>    <span style="color: #51afef;">return</span> <span style="color: #c678dd;">sum</span>
<span class="linenr">17: </span>
<span class="linenr">18: </span><span style="color: #c678dd;">print</span>(sigma(<span style="color: #da8548; font-weight: bold;">100000000</span>))
</pre>
</div>

<pre class="example">
Finished in 5.3 second(s)
4999999950000000
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcfe3a74" class="outline-3">
<h3 id="orgcfe3a74"><span class="section-number-3">1.4.</span> *args and **kwargs</h3>
<div class="outline-text-3" id="text-1-4">
<p>
*與**能讓function接受數量不定的額外參數，讓module與class能提供更有彈性的存取介面：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">foo</span>(required, *args, **kwargs):
<span class="linenr"> 2: </span>    <span style="color: #c678dd;">print</span>(required)
<span class="linenr"> 3: </span>    <span style="color: #51afef;">if</span> args:
<span class="linenr"> 4: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'args: </span>{args}<span style="color: #98be65;">'</span>)
<span class="linenr"> 5: </span>    <span style="color: #51afef;">if</span> kwargs:
<span class="linenr"> 6: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'kwargs: </span>{kwargs}<span style="color: #98be65;">'</span>)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>foo(<span style="color: #98be65;">'1. Hi'</span>)
<span class="linenr"> 9: </span>foo(<span style="color: #98be65;">'2. Hi'</span>, <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>)
<span class="linenr">10: </span>foo(<span style="color: #98be65;">'3. Hi'</span>, <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>, Key1=<span style="color: #98be65;">'value1'</span>, key2=<span style="color: #da8548; font-weight: bold;">456</span>)
</pre>
</div>

<pre class="example">
1. Hi
2. Hi
args: (1, 2, 3)
3. Hi
args: (1, 2, 3)
kwargs: {'Key1': 'value1', 'key2': 456}
</pre>

<ul class="org-ul">
<li>*args接收額外的位置型參數(positional paramenters)(沒有鍵的參數)，將之放入一個tuple。<br /></li>
<li>**kwargs接收額外的關鍵字參數(keyword parameters)(有鍵的參數)，將之放入一個dict。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org62edffe" class="outline-3">
<h3 id="org62edffe"><span class="section-number-3">1.5.</span> Unpack function parameters</h3>
<div class="outline-text-3" id="text-1-5">
<p>
*與**也可用來unpack function的args與kwargs，在呼叫function時，若在iterable object前加上*，就會unpack這個物件，將元素當成個別的positional parameters傳入參數;若加上**，則可unpack keyword parameters。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">print_vector</span>(x, y, z):
<span class="linenr">2: </span>    <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'&lt;</span>{x}<span style="color: #98be65;">, </span>{y}<span style="color: #98be65;">, </span>{z}<span style="color: #98be65;">&gt;'</span>)
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #dcaeea;">tuple_vector</span> = (<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">0</span>, <span style="color: #da8548; font-weight: bold;">1</span>)
<span class="linenr">5: </span>print_vector(tuple_vector[<span style="color: #da8548; font-weight: bold;">0</span>], tuple_vector[<span style="color: #da8548; font-weight: bold;">1</span>], tuple_vector[<span style="color: #da8548; font-weight: bold;">2</span>])
<span class="linenr">6: </span>print_vector(*tuple_vector)
<span class="linenr">7: </span>
<span class="linenr">8: </span><span style="color: #dcaeea;">dict_vector</span> = { <span style="color: #98be65;">'y'</span>: <span style="color: #da8548; font-weight: bold;">4</span>, <span style="color: #98be65;">'z'</span>: <span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #98be65;">'x'</span>: <span style="color: #da8548; font-weight: bold;">3</span>}
<span class="linenr">9: </span>print_vector(**dict_vector)
</pre>
</div>

<pre class="example">
&lt;1, 0, 1&gt;
&lt;1, 0, 1&gt;
&lt;3, 4, 5&gt;
</pre>
</div>
</div>
<div id="outline-container-org186925b" class="outline-3">
<h3 id="org186925b"><span class="section-number-3">1.6.</span> Return or not</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>return 與return None效果一樣<br /></li>
<li>如果沒有傳回值，則可省略return，例如，一個只負責print的function並無任值可傳回，寫return會很奇怪。<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org8e76e6b" class="outline-2">
<h2 id="org8e76e6b"><span class="section-number-2">2.</span> Class v.s. Object</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orga50a328" class="outline-3">
<h3 id="orga50a328"><span class="section-number-3">2.1.</span> <span class="todo TODO">TODO</span> 什麼是class? 什麼是object?</h3>
<div class="outline-text-3" id="text-2-1">
<p>
把這個看完: <a href="https://youtu.be/JeznW_7DlB0">https://youtu.be/JeznW_7DlB0</a>:<br />
</p>
<blockquote>
<p>
Everything in Python is object.<br />
</p>
</blockquote>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">a</span> = <span style="color: #da8548; font-weight: bold;">2022</span>
<span class="linenr">2: </span><span style="color: #dcaeea;">b</span> = <span style="color: #98be65;">'TNFSH'</span>
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">c</span>():
<span class="linenr">5: </span>    <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">'TNFSH'</span>)
<span class="linenr">6: </span>
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">type</span>(a))
<span class="linenr">8: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">type</span>(b))
<span class="linenr">9: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">type</span>(c))
</pre>
</div>

<pre class="example">
&lt;class 'int'&gt;
&lt;class 'str'&gt;
&lt;class 'function'&gt;
</pre>

<p>
由上面的例子，我們可以發現：在Python裡，幾乎所有我們用到的變數、函數都是class。<br />
當我們寫下<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">a</span> = <span style="color: #da8548; font-weight: bold;">2022</span>
</pre>
</div>
<p>
其實是在說，我們有一個變數，它是一種int class，它的值是2022。這個變數就是一個object: 某種屬於某一類class的實體。<br />
一種常見的說法是：class是一張藍圖，依照這張藍圖蓋出的房子有同樣的架構，有同樣的功能，但是可能在外觀或顏色上會有些許差異，就好比一樣是整數物件，每個變數的值可能會有所不同。<br />
</p>

<p>
不同的class有其特定的功能與限制，例如:<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">x</span> = <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr">2: </span><span style="color: #dcaeea;">y</span> = <span style="color: #98be65;">'TNFSH'</span>
<span class="linenr">3: </span><span style="color: #c678dd;">print</span>(x+y)
</pre>
</div>
<p>
執行上述程式會得到以下錯誤訊息：<br />
</p>
<div class="org-src-container">
<pre class="src src-shell">  File <span style="color: #98be65;">"&lt;stdin&gt;"</span>, line 3,<span style="color: #51afef;"> in</span> &lt;module&gt;
TypeError: unsupported operand type<span style="color: #51afef;">(</span>s<span style="color: #51afef;">)</span> <span style="color: #51afef;">for</span> +: <span style="color: #98be65;">'int'</span> and <span style="color: #98be65;">'str'</span>
</pre>
</div>
<p>
這裡告訴我們：int與str這兩種class的object不支援+這個運算。我們再來看另一個例子：<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">x</span> = <span style="color: #98be65;">'tnfsh'</span>
<span class="linenr">2: </span><span style="color: #dcaeea;">y</span> = <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr">3: </span><span style="color: #c678dd;">print</span>(x.upper())
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(y.upper())
</pre>
</div>
<pre class="example">
TNFSH
</pre>

<p>
上述程式會產生如下錯誤訊息：<br />
#+begin_src shell -r -n :results output :exports both<br />
Traceback (most recent call last):<br />
  File &ldquo;&lt;stdin&gt;&rdquo;, line 4, in &lt;module&gt;<br />
AttributeError: &rsquo;int&rsquo; object has no attribute &rsquo;upper&rsquo;<br />
#+end_src&lt;&lt;sh<br />
意思是：int這種class的object沒有一種叫做upper的屬性。這就是我們上面所說的，不同的class有其特定的功能與限制。<br />
</p>
</div>
</div>
<div id="outline-container-org889bac4" class="outline-3">
<h3 id="org889bac4"><span class="section-number-3">2.2.</span> 建立自己的class</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Dog</span>:
<span class="linenr">2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">bark</span>(<span style="color: #51afef;">self</span>):
<span class="linenr">3: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">'&#27754;&#27754;&#27754;'</span>)
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #dcaeea;">a</span> = Dog()
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">type</span>(a))
<span class="linenr">7: </span>a.bark()
</pre>
</div>

<pre class="example">
&lt;class '__main__.Dog'&gt;
汪汪汪
</pre>

<p>
在上述範例中，我們建立了一個叫Dog的class，然後再建立一個屬於Dog這個class的object。<br />
從這個object的type，可以看出這是一個叫&lt;class &rsquo;<span class="underline"><span class="underline">main</span></span>.Dog&rsquo;&gt;的類別，這裡的__main__意思是這個class被定義(或撰寫)在目前這支Python程式中，當然我們也可以另外開一個新的.py檔專問來儲存這個class。<br />
</p>
</div>
</div>
<div id="outline-container-orgfa24d13" class="outline-3">
<h3 id="orgfa24d13"><span class="section-number-3">2.3.</span> == v.s. is</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>==: equal<br /></li>
<li>is: identical<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">a</span> = [<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">b</span> = [<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>]
<span class="linenr">3: </span><span style="color: #dcaeea;">c</span> = a
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(a == b)
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(a <span style="color: #51afef;">is</span> b)
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(a == c)
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(a <span style="color: #51afef;">is</span> c)
</pre>
</div>

<pre class="example">
True
False
True
True
</pre>
</div>
</div>
<div id="outline-container-org7f9680c" class="outline-3">
<h3 id="org7f9680c"><span class="section-number-3">2.4.</span> Shallow copy v.s. Deep copy</h3>
<div class="outline-text-3" id="text-2-4">
<p>
簡單來說，淺與深的區別<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup>：<br />
</p>
<ul class="org-ul">
<li>淺複製僅複製容器中元素的地址<br /></li>
<li>深複製完全複製了一份副本，容器與容器中的元素地址都不一樣<br /></li>
</ul>
</div>
<div id="outline-container-org37747d3" class="outline-4">
<h4 id="org37747d3"><span class="section-number-4">2.4.1.</span> shallow copy</h4>
<div class="outline-text-4" id="text-2-4-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #dcaeea;">xs</span> = [[<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>], [<span style="color: #da8548; font-weight: bold;">4</span>, <span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">6</span>], [<span style="color: #da8548; font-weight: bold;">7</span>, <span style="color: #da8548; font-weight: bold;">8</span>, <span style="color: #da8548; font-weight: bold;">9</span>]]
<span class="linenr"> 2: </span><span style="color: #dcaeea;">ys</span> = <span style="color: #c678dd;">list</span>(xs) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">shallow copy</span>
<span class="linenr"> 3: </span><span style="color: #c678dd;">print</span>(xs == ys) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#20108;&#32773;&#20839;&#23481;&#30456;&#21516;</span>
<span class="linenr"> 4: </span><span style="color: #c678dd;">print</span>(xs <span style="color: #51afef;">is</span> ys) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#20294;&#28858;&#19981;&#21516;&#29289;&#20214;</span>
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>xs.append([<span style="color: #da8548; font-weight: bold;">10</span>, <span style="color: #da8548; font-weight: bold;">11</span>, <span style="color: #da8548; font-weight: bold;">12</span>])
<span class="linenr"> 7: </span><span style="color: #c678dd;">print</span>(xs)
<span class="linenr"> 8: </span><span style="color: #c678dd;">print</span>(ys)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#20294;&#33509;&#26159;&#20462;&#25913;&#20108;&#32773;&#30456;&#21516;&#30340;&#37096;&#20221;&#65292;&#22914;</span>
<span class="linenr">11: </span>xs[<span style="color: #da8548; font-weight: bold;">1</span>][<span style="color: #da8548; font-weight: bold;">0</span>] = <span style="color: #98be65;">'X'</span>
<span class="linenr">12: </span><span style="color: #c678dd;">print</span>(xs)
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(ys)
</pre>
</div>

<pre class="example">
True
False
[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]
[[1, 2, 3], [4, 5, 6], [7, 8, 9]]
[[1, 2, 3], ['X', 5, 6], [7, 8, 9], [10, 11, 12]]
[[1, 2, 3], ['X', 5, 6], [7, 8, 9]]
</pre>

<p>
由上述例子中可發現，xs與ys其實共享同一份資料。<br />
</p>
</div>
</div>
<div id="outline-container-orgcafea2f" class="outline-4">
<h4 id="orgcafea2f"><span class="section-number-4">2.4.2.</span> deep copy</h4>
<div class="outline-text-4" id="text-2-4-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> copy
<span class="linenr"> 2: </span><span style="color: #dcaeea;">xs</span> = [[<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>], [<span style="color: #da8548; font-weight: bold;">4</span>, <span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">6</span>], [<span style="color: #da8548; font-weight: bold;">7</span>, <span style="color: #da8548; font-weight: bold;">8</span>, <span style="color: #da8548; font-weight: bold;">9</span>]]
<span class="linenr"> 3: </span><span style="color: #dcaeea;">zs</span> = copy.deepcopy(xs)
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span style="color: #c678dd;">print</span>(xs == zs)
<span class="linenr"> 6: </span><span style="color: #c678dd;">print</span>(xs <span style="color: #51afef;">is</span> zs)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>xs[<span style="color: #da8548; font-weight: bold;">1</span>][<span style="color: #da8548; font-weight: bold;">0</span>] = <span style="color: #98be65;">'X'</span>
<span class="linenr"> 9: </span><span style="color: #c678dd;">print</span>(xs)
<span class="linenr">10: </span><span style="color: #c678dd;">print</span>(zs)
</pre>
</div>

<pre class="example">
True
False
[[1, 2, 3], ['X', 5, 6], [7, 8, 9]]
[[1, 2, 3], [4, 5, 6], [7, 8, 9]]
</pre>
</div>
</div>
<div id="outline-container-org595c7cf" class="outline-4">
<h4 id="org595c7cf"><span class="section-number-4">2.4.3.</span> copy any object</h4>
<div class="outline-text-4" id="text-2-4-3">
<p>
不管想copy什麼object，包括自訂物件，解決之道亦是用copy module的copy()與deepcopy()。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> copy
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Point</span>:
<span class="linenr"> 4: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">__init__</span>(<span style="color: #51afef;">self</span>, x, y):
<span class="linenr"> 5: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">x</span> = x
<span class="linenr"> 6: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">y</span> = y
<span class="linenr"> 7: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">__repr__</span>(<span style="color: #51afef;">self</span>):
<span class="linenr"> 8: </span>        <span style="color: #51afef;">return</span> f<span style="color: #98be65;">'Point(</span>{<span style="color: #51afef;">self</span>.x}<span style="color: #98be65;">, </span>{<span style="color: #51afef;">self</span>.y}<span style="color: #98be65;">)'</span>
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #dcaeea;">a</span> = Point(<span style="color: #da8548; font-weight: bold;">23</span>, <span style="color: #da8548; font-weight: bold;">42</span>)
<span class="linenr">11: </span><span style="color: #dcaeea;">b</span> = Point(<span style="color: #da8548; font-weight: bold;">23</span>, <span style="color: #da8548; font-weight: bold;">42</span>)
<span class="linenr">12: </span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">b = copy.copy(a)</span>
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(a)
<span class="linenr">14: </span><span style="color: #c678dd;">print</span>(b)
<span class="linenr">15: </span><span style="color: #c678dd;">print</span>(a == b)
<span class="linenr">16: </span><span style="color: #c678dd;">print</span>(a <span style="color: #51afef;">is</span> b)
</pre>
</div>

<pre class="example">
Point(23, 42)
Point(23, 42)
False
False
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcf402b0" class="outline-3">
<h3 id="orgcf402b0"><span class="section-number-3">2.5.</span> ABC: Abstract Base Class</h3>
<div class="outline-text-3" id="text-2-5">
<p>
C++、Java等語言都有「介面」(interface)這種本身無法建立object、卻能當成建立object template的機制。Python則可藉由ABC來實作。藉由ABC來建立class，便是可確保繼承之sub-class均有正確的特定method。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> abc <span style="color: #51afef;">import</span> ABC, abstractmethod
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Base</span>(ABC):
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #ECBE7B;">@abstractmethod</span>
<span class="linenr"> 6: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">foo</span>(<span style="color: #51afef;">self</span>):
<span class="linenr"> 7: </span>        <span style="color: #51afef;">pass</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #ECBE7B;">@abstractmethod</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">bar</span>(<span style="color: #51afef;">self</span>):
<span class="linenr">11: </span>        <span style="color: #51afef;">pass</span>
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Concrete</span>(Base):
<span class="linenr">14: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">foo</span>(<span style="color: #51afef;">self</span>):
<span class="linenr">15: </span>        <span style="color: #51afef;">pass</span>
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">issubclass</span>(Concrete, Base))
</pre>
</div>

<pre class="example">
True
</pre>
</div>
</div>
<div id="outline-container-orge1f973c" class="outline-3">
<h3 id="orge1f973c"><span class="section-number-3">2.6.</span> object/class/static method</h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">MyClass</span>:
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">objmethod</span>(<span style="color: #51afef;">self</span>): <span style="color: #5B6268;">#</span><span style="color: #5B6268;">object method</span>
<span class="linenr"> 4: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'&#21628;&#21483;object method: </span>{<span style="color: #51afef;">self</span>}<span style="color: #98be65;">'</span>)
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    @<span style="color: #c678dd;">classmethod</span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">clsmethod</span>(cls):
<span class="linenr"> 8: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'&#21628;&#21483;class method: </span>{cls}<span style="color: #98be65;">'</span>)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    @<span style="color: #c678dd;">staticmethod</span>
<span class="linenr">11: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">stcmethod</span>():
<span class="linenr">12: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'&#21628;&#21483;static method'</span>)
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #dcaeea;">obj</span> = MyClass()
<span class="linenr">15: </span>obj.objmethod()
<span class="linenr">16: </span>obj.clsmethod()
<span class="linenr">17: </span>obj.stcmethod()
</pre>
</div>

<pre class="example">
呼叫object method: &lt;__main__.MyClass object at 0x1081f7940&gt;
呼叫class method: &lt;class '__main__.MyClass'&gt;
呼叫static method
</pre>

<ul class="org-ul">
<li>objmethod為一般object method，必須有self參數，該參數指向object本身<br /></li>
<li>csmethod為class method，必項有cls參數，指向class本身<br /></li>
<li>stcmethod為static method，沒有參數，無法修改物件或類別狀態，只能處理user傳入的參數<br /></li>
</ul>
</div>
<div id="outline-container-org3b60190" class="outline-4">
<h4 id="org3b60190"><span class="section-number-4">2.6.1.</span> DEMO</h4>
<div class="outline-text-4" id="text-2-6-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Drink</span>:
<span class="linenr"> 2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">__init__</span>(<span style="color: #51afef;">self</span>, name, price, counts):
<span class="linenr"> 3: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">name</span> = name
<span class="linenr"> 4: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">price</span> = price
<span class="linenr"> 5: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">counts</span> = counts
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">costs</span>(<span style="color: #51afef;">self</span>):
<span class="linenr"> 8: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.drink_costs(<span style="color: #51afef;">self</span>.price, <span style="color: #51afef;">self</span>.counts)
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>    @<span style="color: #c678dd;">classmethod</span>
<span class="linenr">11: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">blacktea</span>(cls):
<span class="linenr">12: </span>        <span style="color: #51afef;">return</span> cls(<span style="color: #98be65;">'&#32005;&#33590;'</span>, <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">25</span>)
<span class="linenr">13: </span>
<span class="linenr">14: </span>    @<span style="color: #c678dd;">classmethod</span>
<span class="linenr">15: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">coffee</span>(cls):
<span class="linenr">16: </span>        <span style="color: #51afef;">return</span> cls(<span style="color: #98be65;">'&#29105;&#32654;&#24335;'</span>, <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">50</span>)
<span class="linenr">17: </span>
<span class="linenr">18: </span>    @<span style="color: #c678dd;">staticmethod</span>
<span class="linenr">19: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">drink_costs</span>(price, counts):
<span class="linenr">20: </span>        <span style="color: #51afef;">return</span> price * counts
<span class="linenr">21: </span>
<span class="linenr">22: </span><span style="color: #dcaeea;">drink1</span> = Drink.blacktea()
<span class="linenr">23: </span><span style="color: #dcaeea;">drink2</span> = Drink.coffee()
<span class="linenr">24: </span><span style="color: #dcaeea;">drink3</span> = Drink(<span style="color: #98be65;">'&#32681;&#24335;'</span>, <span style="color: #da8548; font-weight: bold;">60</span>, <span style="color: #da8548; font-weight: bold;">3</span>)
<span class="linenr">25: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'</span>{drink1.name}<span style="color: #98be65;">'</span>)
<span class="linenr">26: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'</span>{drink2.price}<span style="color: #98be65;">'</span>)
<span class="linenr">27: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'</span>{drink3.name!r}<span style="color: #98be65;"> * </span>{drink3.counts}<span style="color: #98be65;"> = </span>{drink3.costs()}<span style="color: #98be65;">'</span>)
</pre>
</div>

<pre class="example">
紅茶
1
'義式' * 3 = 180
</pre>
</div>
</div>
</div>
<div id="outline-container-org09d7ef6" class="outline-3">
<h3 id="org09d7ef6"><span class="section-number-3">2.7.</span> class variable v.s. instance variable</h3>
<div class="outline-text-3" id="text-2-7">
<ul class="org-ul">
<li>class variable: 宣告在classs定義裡，但宣告位置在所有method之外<br /></li>
<li>instance variable: 屬於由class所建立的某個instance，其內容並非存在class中，而是由各別instance負責<br /></li>
</ul>
</div>
<div id="outline-container-orgcb5c461" class="outline-4">
<h4 id="orgcb5c461"><span class="section-number-4">2.7.1.</span> 差異</h4>
<div class="outline-text-4" id="text-2-7-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Dog</span>:
<span class="linenr"> 2: </span>    <span style="color: #dcaeea;">num_dogs</span> = <span style="color: #da8548; font-weight: bold;">0</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">Demo class variable&#30340;&#36969;&#29992;&#26178;&#27231;</span>
<span class="linenr"> 3: </span>    <span style="color: #dcaeea;">num_leg</span> = <span style="color: #da8548; font-weight: bold;">4</span>
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">__init__</span>(<span style="color: #51afef;">self</span>, name):
<span class="linenr"> 6: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">name</span> = name
<span class="linenr"> 7: </span>        <span style="color: #51afef;">self</span>.__class__.<span style="color: #dcaeea;">num_dogs</span> += <span style="color: #da8548; font-weight: bold;">1</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #dcaeea;">dd</span> = Dog(<span style="color: #98be65;">'DaiDai'</span>)
<span class="linenr">10: </span><span style="color: #dcaeea;">bd</span> = Dog(<span style="color: #98be65;">'Bad luck'</span>)
<span class="linenr">11: </span><span style="color: #dcaeea;">lk</span> = Dog(<span style="color: #98be65;">'Lucky'</span>)
<span class="linenr">12: </span>bd.<span style="color: #dcaeea;">num_leg</span> = <span style="color: #da8548; font-weight: bold;">3</span>
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(dd.num_leg)
<span class="linenr">14: </span><span style="color: #c678dd;">print</span>(bd.num_leg)
<span class="linenr">15: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'&#30446;&#21069;&#20849;&#26377;</span>{Dog.num_dogs}<span style="color: #98be65;">&#38587;&#29399;'</span>)
</pre>
</div>

<pre class="example">
4
3
目前共有3隻狗
</pre>

<p>
由class variable num_dogs的示範也可看出，善用class variable可以在各個instance object間取得某程程度的連繫。<br />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org5cc2e0a" class="outline-2">
<h2 id="org5cc2e0a"><span class="section-number-2">3.</span> 資料型別 II</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org6def7d6" class="outline-3">
<h3 id="org6def7d6"><span class="section-number-3">3.1.</span> Dict</h3>
<div class="outline-text-3" id="text-3-1">
</div>
<div id="outline-container-orgc6d3808" class="outline-4">
<h4 id="orgc6d3808"><span class="section-number-4">3.1.1.</span> collections.ChainMap</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
collections.ChainMap可以把多個dict集結串成單一個dict，如<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">import</span> collections
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #dcaeea;">dict1</span> = {<span style="color: #98be65;">'one'</span>:<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #98be65;">'two'</span>: <span style="color: #da8548; font-weight: bold;">2</span>}
<span class="linenr"> 4: </span><span style="color: #dcaeea;">dict2</span> = {<span style="color: #98be65;">'two'</span>:<span style="color: #98be65;">'&#36019;'</span>, <span style="color: #98be65;">'three'</span>: <span style="color: #98be65;">'III'</span>, <span style="color: #98be65;">'four'</span>: <span style="color: #da8548; font-weight: bold;">4</span>}
<span class="linenr"> 5: </span><span style="color: #dcaeea;">chain</span> = collections.ChainMap(dict1, dict2)
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #c678dd;">print</span>(chain)
<span class="linenr"> 8: </span><span style="color: #c678dd;">print</span>(chain[<span style="color: #98be65;">'two'</span>])
<span class="linenr"> 9: </span><span style="color: #dcaeea;">chain</span>[<span style="color: #98be65;">'five'</span>] = <span style="color: #da8548; font-weight: bold;">5</span>
<span class="linenr">10: </span><span style="color: #c678dd;">print</span>(chain)
</pre>
</div>

<pre class="example">
ChainMap({'one': 1, 'two': 2}, {'two': '貳', 'three': 'III', 'four': 4})
2
ChainMap({'one': 1, 'two': 2, 'five': 5}, {'two': '貳', 'three': 'III', 'four': 4})
</pre>

<p>
要留意的是：若對ChainMap做新增、修改、刪除，則只會影響裡面的第一個dict。<br />
</p>
</div>
</div>
</div>
<div id="outline-container-org1944ea6" class="outline-3">
<h3 id="org1944ea6"><span class="section-number-3">3.2.</span> types.MappingProxyType</h3>
<div class="outline-text-3" id="text-3-2">
<p>
透過MappingProxyType class可以把dict變為唯讀。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">from</span> types <span style="color: #51afef;">import</span> MappingProxyType
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #dcaeea;">writable</span> = {<span style="color: #98be65;">'one'</span>: <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #98be65;">'two'</span>: <span style="color: #da8548; font-weight: bold;">2</span>}
<span class="linenr">4: </span><span style="color: #dcaeea;">writable</span>[<span style="color: #98be65;">'three'</span>] = <span style="color: #da8548; font-weight: bold;">3</span>
<span class="linenr">5: </span><span style="color: #dcaeea;">readOnly</span> = MappingProxyType(writable)
<span class="linenr">6: </span><span style="color: #dcaeea;">readOnly</span>[<span style="color: #98be65;">'three'</span>] = <span style="color: #da8548; font-weight: bold;">4</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">TypeError: 'mappingproxy' object does not support item assignment</span>
<span class="linenr">7: </span><span style="color: #dcaeea;">readOnly</span>[<span style="color: #98be65;">'four'</span>] = <span style="color: #da8548; font-weight: bold;">4</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">TypeError: 'mappingproxy' object does not support item assignment</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3b25ba1" class="outline-3">
<h3 id="org3b25ba1"><span class="section-number-3">3.3.</span> array.array</h3>
<div class="outline-text-3" id="text-3-3">
<p>
若要和C語言程式交換資料，或是只需要一個儲存數值型態資料的空間，則可用array.array，優點是比list或tuple省空間。array.array的method與list大致相同，許多情況下甚至可直接交換二者的資料型別而無需修改相關程式碼。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">import</span> array
<span class="linenr">2: </span><span style="color: #dcaeea;">arr</span> = array.array(<span style="color: #98be65;">'f'</span>, (<span style="color: #da8548; font-weight: bold;">1.0</span>, <span style="color: #da8548; font-weight: bold;">3.5</span>, <span style="color: #da8548; font-weight: bold;">2.0</span>, <span style="color: #da8548; font-weight: bold;">6.1</span>))
<span class="linenr">3: </span><span style="color: #c678dd;">print</span>(arr)
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(arr[<span style="color: #da8548; font-weight: bold;">1</span>])
<span class="linenr">5: </span>arr.append(<span style="color: #da8548; font-weight: bold;">2.1</span>)
<span class="linenr">6: </span><span style="color: #51afef;">del</span> arr[<span style="color: #da8548; font-weight: bold;">1</span>]
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(arr)
</pre>
</div>

<pre class="example">
array('f', [1.0, 3.5, 2.0, 6.099999904632568])
3.5
array('f', [1.0, 2.0, 6.099999904632568, 2.0999999046325684])
</pre>
</div>
</div>
<div id="outline-container-orgffc4e97" class="outline-3">
<h3 id="orgffc4e97"><span class="section-number-3">3.4.</span> Record</h3>
<div class="outline-text-3" id="text-3-4">
<p>
同樣以儲存car record(color, mileage, automatic)來比較<br />
</p>
</div>
<div id="outline-container-orgd8b2f6d" class="outline-4">
<h4 id="orgd8b2f6d"><span class="section-number-4">3.4.1.</span> list/tuple</h4>
<div class="outline-text-4" id="text-3-4-1">
<ul class="org-ul">
<li>建立速度快、執行效率高，<br /></li>
<li>但沒有欄位名稱，建立資料時可能弄錯順序<br /></li>
<li>很難檢查兩個資料物件是否有一致的欄位<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">car1</span> = [<span style="color: #98be65;">'red'</span>, <span style="color: #da8548; font-weight: bold;">3812</span>, <span style="color: #a9a1e1;">True</span>] <span style="color: #5B6268;">#</span><span style="color: #5B6268;">list, &#21487;&#35722;</span>
<span class="linenr">2: </span><span style="color: #dcaeea;">car2</span> = (<span style="color: #98be65;">'blue'</span>, <span style="color: #da8548; font-weight: bold;">3123</span>, <span style="color: #a9a1e1;">False</span>) <span style="color: #5B6268;">#</span><span style="color: #5B6268;">tuple, &#19981;&#21487;&#35722;</span>
<span class="linenr">3: </span><span style="color: #dcaeea;">car3</span> = (<span style="color: #da8548; font-weight: bold;">343</span>, <span style="color: #98be65;">'black'</span>, <span style="color: #a9a1e1;">True</span>, <span style="color: #98be65;">'James'</span>) <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#38918;&#24207;&#37679;&#35492;&#12289;&#27396;&#20301;&#20063;&#19981;&#19968;&#33268;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org53f634a" class="outline-4">
<h4 id="org53f634a"><span class="section-number-4">3.4.2.</span> dict</h4>
<div class="outline-text-4" id="text-3-4-2">
<ul class="org-ul">
<li>可透過key/value來當成欄位名稱<br /></li>
<li>仍缺乏欄位監控機制，防止使用者在建立object時打錯或漏打欄位<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">Car</span> = {
<span class="linenr">2: </span>    <span style="color: #98be65;">'color'</span>: <span style="color: #98be65;">'red'</span>,
<span class="linenr">3: </span>    <span style="color: #98be65;">'mileage'</span>: <span style="color: #da8548; font-weight: bold;">3213</span>,
<span class="linenr">4: </span>    <span style="color: #98be65;">'automatic'</span>: <span style="color: #a9a1e1;">True</span>
<span class="linenr">5: </span>}
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(Car)
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(Car[<span style="color: #98be65;">'color'</span>])
<span class="linenr">8: </span><span style="color: #dcaeea;">Car</span>[<span style="color: #98be65;">'windshield'</span>] = <span style="color: #98be65;">'broken'</span>
<span class="linenr">9: </span><span style="color: #c678dd;">print</span>(Car)
</pre>
</div>

<pre class="example">
{'color': 'red', 'mileage': 3213, 'automatic': True}
red
{'color': 'red', 'mileage': 3213, 'automatic': True, 'windshield': 'broken'}
</pre>
</div>
</div>
<div id="outline-container-org47ebf02" class="outline-4">
<h4 id="org47ebf02"><span class="section-number-4">3.4.3.</span> 自訂類別</h4>
<div class="outline-text-4" id="text-3-4-3">
<ul class="org-ul">
<li>麻煩，在要__init__建構子內設定每個欄位，還要自己寫__repr__ method<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Car</span>:
<span class="linenr">2: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">__init__</span>(<span style="color: #51afef;">self</span>, color, mileage):
<span class="linenr">3: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">color</span> = color
<span class="linenr">4: </span>        <span style="color: #51afef;">self</span>.<span style="color: #dcaeea;">mileage</span> = mileage
<span class="linenr">5: </span>
<span class="linenr">6: </span><span style="color: #dcaeea;">car</span> = Car(<span style="color: #98be65;">'red'</span>, <span style="color: #da8548; font-weight: bold;">1234</span>)
<span class="linenr">7: </span>car.<span style="color: #dcaeea;">mileage</span> = <span style="color: #da8548; font-weight: bold;">4343</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#21487;&#20462;&#25913;&#27396;&#20301;&#20839;&#23481;</span>
<span class="linenr">8: </span>car.<span style="color: #dcaeea;">automatic</span> = <span style="color: #a9a1e1;">True</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#21487;&#26032;&#22686;&#27396;&#20301;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb69b851" class="outline-4">
<h4 id="orgb69b851"><span class="section-number-4">3.4.4.</span> typing.NamedTuple</h4>
<div class="outline-text-4" id="text-3-4-4">
<ul class="org-ul">
<li>readonly<br /></li>
<li>欄位型別無強制性<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> typing <span style="color: #51afef;">import</span> NamedTuple
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Car</span>(NamedTuple):
<span class="linenr"> 4: </span>    color: <span style="color: #c678dd;">str</span>
<span class="linenr"> 5: </span>    mileage: <span style="color: #c678dd;">float</span>
<span class="linenr"> 6: </span>    automatic: <span style="color: #c678dd;">bool</span>
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #dcaeea;">car</span> = Car(<span style="color: #98be65;">'red'</span>, <span style="color: #da8548; font-weight: bold;">3123</span>, <span style="color: #a9a1e1;">True</span>)
<span class="linenr"> 9: </span><span style="color: #c678dd;">print</span>(car)
<span class="linenr">10: </span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">car.mileage = 3123 # &#19981;&#33021;&#35722;&#26356;&#27396;&#20301;&#20839;&#23481;</span>
<span class="linenr">11: </span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">car.windshield = 'broken' #&#19981;&#33021;&#26032;&#22686;&#27396;&#20301;</span>
<span class="linenr">12: </span><span style="color: #dcaeea;">car2</span> = Car(<span style="color: #98be65;">'blue'</span>, <span style="color: #98be65;">'test'</span>, <span style="color: #da8548; font-weight: bold;">1234</span>)
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(car2)
</pre>
</div>

<pre class="example">
Car(color='red', mileage=3123, automatic=True)
Car(color='blue', mileage='test', automatic=1234)
</pre>
</div>
</div>
<div id="outline-container-orgec1fe01" class="outline-4">
<h4 id="orgec1fe01"><span class="section-number-4">3.4.5.</span> types.SimpleNamespace</h4>
<div class="outline-text-4" id="text-3-4-5">
<ul class="org-ul">
<li>本質上是dict,把dict的key變成class attribute<br /></li>
<li>可以新增、修改、刪除attribute<br /></li>
<li>不若想動用到class，此為簡易替代品<br /></li>
<li>仍缺乏結構<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">from</span> types <span style="color: #51afef;">import</span> SimpleNamespace
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #dcaeea;">car</span> = SimpleNamespace(color = <span style="color: #98be65;">'red'</span>,
<span class="linenr">4: </span>                      mileage = <span style="color: #da8548; font-weight: bold;">1341</span>,
<span class="linenr">5: </span>                      automatic = <span style="color: #a9a1e1;">True</span>)
<span class="linenr">6: </span>
<span class="linenr">7: </span>car.<span style="color: #dcaeea;">color</span> = <span style="color: #98be65;">'blue'</span>
<span class="linenr">8: </span><span style="color: #c678dd;">print</span>(car)
</pre>
</div>

<pre class="example">
namespace(color='blue', mileage=1341, automatic=True)
</pre>
</div>
</div>
<div id="outline-container-orgc988354" class="outline-4">
<h4 id="orgc988354"><span class="section-number-4">3.4.6.</span> dataclass (Python 3.7+)</h4>
<div class="outline-text-4" id="text-3-4-6">
<ul class="org-ul">
<li>能自動建立__init__、__repr__等method<br /></li>
<li>可加入自訂method<br /></li>
<li>可繼承<br /></li>
<li>可設為read only(在@dataclass後加入參數 frozen=True)<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> dataclasses <span style="color: #51afef;">import</span> dataclass
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ECBE7B;">@dataclass</span>
<span class="linenr"> 4: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Car</span>:
<span class="linenr"> 5: </span>    color: <span style="color: #c678dd;">str</span>
<span class="linenr"> 6: </span>    mileage: <span style="color: #c678dd;">float</span>
<span class="linenr"> 7: </span>    automatic: <span style="color: #c678dd;">bool</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">def</span> <span style="color: #c678dd;">mileage_km</span>(<span style="color: #51afef;">self</span>): <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#21487;&#33258;&#35330;method</span>
<span class="linenr">10: </span>        <span style="color: #51afef;">return</span> <span style="color: #51afef;">self</span>.mileage * <span style="color: #da8548; font-weight: bold;">1.609</span>
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #dcaeea;">car</span> = Car(<span style="color: #98be65;">'red'</span>, <span style="color: #da8548; font-weight: bold;">3123</span>, <span style="color: #a9a1e1;">True</span>)
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">dir</span>(car))
<span class="linenr">14: </span><span style="color: #c678dd;">print</span>(car.mileage_km)
<span class="linenr">15: </span><span style="color: #c678dd;">print</span>(car.__repr__)
<span class="linenr">16: </span>
<span class="linenr">17: </span><span style="color: #ECBE7B;">@dataclass</span>
<span class="linenr">18: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">ElectronicCar</span>(Car): <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#32380;&#25215;</span>
<span class="linenr">19: </span>    <span style="color: #dcaeea;">charge</span>: <span style="color: #c678dd;">float</span> = <span style="color: #da8548; font-weight: bold;">0.0</span>
<span class="linenr">20: </span>
<span class="linenr">21: </span><span style="color: #dcaeea;">car2</span> = ElectronicCar(<span style="color: #98be65;">'white'</span>, <span style="color: #da8548; font-weight: bold;">3123</span>, <span style="color: #a9a1e1;">True</span>, <span style="color: #da8548; font-weight: bold;">1000</span>)
<span class="linenr">22: </span><span style="color: #c678dd;">print</span>(car2)
<span class="linenr">23: </span>
</pre>
</div>

<pre class="example">
['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'automatic', 'color', 'mileage', 'mileage_km']
&lt;bound method Car.mileage_km of Car(color='red', mileage=3123, automatic=True)&gt;
&lt;bound method __create_fn__.&lt;locals&gt;.__repr__ of Car(color='red', mileage=3123, automatic=True)&gt;
ElectronicCar(color='white', mileage=3123, automatic=True, charge=1000)
</pre>
</div>
<div id="outline-container-org6f27f15" class="outline-5">
<h5 id="org6f27f15"><span class="underline"><span class="underline">slots</span></span></h5>
<div class="outline-text-5" id="text-org6f27f15">
<p>
如果你的程式會建立同一類別的大量object，但不會增刪object attribute，則可以考慮使用__slots__來節省object占用的記憶體，同時加快存取速度。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> dataclasses <span style="color: #51afef;">import</span> dataclass
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #ECBE7B;">@dataclass</span>
<span class="linenr"> 4: </span><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">Car</span>:
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>    <span style="color: #dcaeea;">__slots__</span> = [<span style="color: #98be65;">'color'</span>, <span style="color: #98be65;">'mileage'</span>, <span style="color: #98be65;">'automatic'</span>]
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>    color: <span style="color: #c678dd;">str</span>
<span class="linenr"> 9: </span>    mileage: <span style="color: #c678dd;">float</span>
<span class="linenr">10: </span>    automatic: <span style="color: #c678dd;">bool</span>
</pre>
</div>

<p>
__slots__不限於dataclass，在任何class均可使用<br />
</p>
</div>
</div>
</div>
<div id="outline-container-org109458f" class="outline-4">
<h4 id="org109458f"><span class="section-number-4">3.4.7.</span> struct.struct</h4>
<div class="outline-text-4" id="text-3-4-7">
<ul class="org-ul">
<li>與C的struct交換資料的管道<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">from</span> struct <span style="color: #51afef;">import</span> Struct
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #dcaeea;">MyStruct</span> = struct(<span style="color: #98be65;">'1?f'</span>) <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#25351;&#23450;&#36039;&#26009;&#26684;&#24335;</span>
<span class="linenr">4: </span><span style="color: #dcaeea;">data</span> = MyStruct.pack(<span style="color: #da8548; font-weight: bold;">23</span>, <span style="color: #a9a1e1;">False</span>, <span style="color: #da8548; font-weight: bold;">42.0</span>) <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#36039;&#26009;&#25171;&#21253;&#25104;&#20108;&#36914;&#20301;&#36039;&#26009;</span>
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(data)
<span class="linenr">6: </span><span style="color: #dcaeea;">x</span> = MyStruct.unpack(data)
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(x)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0ab623b" class="outline-3">
<h3 id="org0ab623b"><span class="section-number-3">3.5.</span> Set</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li>Python建立set，除了用{}、也可以用set comprehension<br /></li>
<li>若要建立empty set，一定要call set()建構子，因為空的{}會被當成dict<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">vowels</span> = {<span style="color: #98be65;">'a'</span>, <span style="color: #98be65;">'e'</span>, <span style="color: #98be65;">'i'</span>, <span style="color: #98be65;">'o'</span>, <span style="color: #98be65;">'u'</span>}
<span class="linenr">2: </span><span style="color: #dcaeea;">squares</span> = { x ** <span style="color: #da8548; font-weight: bold;">2</span> <span style="color: #51afef;">for</span> x <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>) }
<span class="linenr">3: </span><span style="color: #dcaeea;">empty</span> = <span style="color: #c678dd;">set</span>()
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(vowels)
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(squares)
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(empty)
</pre>
</div>

<pre class="example">
{'a', 'o', 'i', 'u', 'e'}
{0, 1, 64, 4, 36, 9, 16, 49, 81, 25}
set()
</pre>
</div>
<div id="outline-container-orgc9ba1b5" class="outline-4">
<h4 id="orgc9ba1b5"><span class="section-number-4">3.5.1.</span> frozenset</h4>
<div class="outline-text-4" id="text-3-5-1">
<ul class="org-ul">
<li>frozenset class為set的不可變版本，一旦建立就無法增刪修，只能查詢<br /></li>
<li>但frozenset為靜態iterable object,故為hashable object,能當成dict object的key或其他set的element，這是一般set無法做到的事<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">vowels</span> = <span style="color: #c678dd;">frozenset</span>({<span style="color: #98be65;">'a'</span>, <span style="color: #98be65;">'e'</span>, <span style="color: #98be65;">'i'</span>, <span style="color: #98be65;">'o'</span>, <span style="color: #98be65;">'u'</span>})
<span class="linenr">2: </span><span style="color: #dcaeea;">d</span> = {vowels: <span style="color: #98be65;">'hello'</span>} <span style="color: #5B6268;"># </span><span style="color: #5B6268;">set&#35722;&#28858;dict&#30340;key</span>
<span class="linenr">3: </span><span style="color: #c678dd;">print</span>(d)
<span class="linenr">4: </span>
</pre>
</div>

<pre class="example">
{frozenset({'e', 'o', 'u', 'a', 'i'}): 'hello'}
</pre>
</div>
</div>
<div id="outline-container-org644e9ba" class="outline-4">
<h4 id="org644e9ba"><span class="section-number-4">3.5.2.</span> collections.Counter</h4>
<div class="outline-text-4" id="text-3-5-2">
<ul class="org-ul">
<li>collections module底下的Counter實作了「多重集合」(multisets)，能輸入多個iterable object(set, dict, string)並統整各元素的出現次數<br /></li>
<li>Counter實際為dict的subclass，當我們把新的iterable object輸入Counter object時，該iterable object的element會新增為dict的key，而該element出現次數則為dict的value<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> collections <span style="color: #51afef;">import</span> Counter
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #dcaeea;">inventory</span> = Counter()
<span class="linenr"> 4: </span><span style="color: #dcaeea;">loot</span> = {<span style="color: #98be65;">'sward'</span>: <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #98be65;">'bread'</span>: <span style="color: #da8548; font-weight: bold;">3</span>}  <span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#35037;&#20633;&#21697;&#21517;&#21450;&#25976;&#37327;</span>
<span class="linenr"> 5: </span>inventory.update(loot)
<span class="linenr"> 6: </span><span style="color: #c678dd;">print</span>(inventory)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #dcaeea;">more_loot</span> = [<span style="color: #98be65;">'sward'</span>, <span style="color: #98be65;">'coins'</span>]
<span class="linenr"> 9: </span>inventory.update(more_loot)
<span class="linenr">10: </span>
<span class="linenr">11: </span><span style="color: #dcaeea;">yet_more_loot</span> = [<span style="color: #98be65;">'sward'</span>, <span style="color: #98be65;">'bread'</span>, <span style="color: #98be65;">'drink'</span>]
<span class="linenr">12: </span>inventory.update(yet_more_loot)
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(inventory)
</pre>
</div>

<pre class="example">
Counter({'bread': 3, 'sward': 1})
Counter({'bread': 4, 'sward': 3, 'coins': 1, 'drink': 1})
</pre>
</div>
</div>
</div>
<div id="outline-container-org10eb216" class="outline-3">
<h3 id="org10eb216"><span class="section-number-3">3.6.</span> Stack</h3>
<div class="outline-text-3" id="text-3-6">
<p>
幾種實作Stack的結構<br />
</p>
</div>
<div id="outline-container-org311a0eb" class="outline-4">
<h4 id="org311a0eb"><span class="section-number-4">3.6.1.</span> list</h4>
<div class="outline-text-4" id="text-3-6-1">
<ul class="org-ul">
<li>python內部以動態陣列來實作list，所以會配置比element所需更大的空間，視需要增減。故push與pop不見會需要調整大小，平均效率可達O(1)<br /></li>
<li>但為了達到這種效率，element必須從tail做push, pop<br /></li>
<li>若改由list的head做push,pop，則list內所有element均需位移，效率會降為O(n)<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #dcaeea;">a</span> = []
<span class="linenr"> 2: </span>a.append(<span style="color: #98be65;">'eating'</span>)
<span class="linenr"> 3: </span>a.append(<span style="color: #98be65;">'sleeping'</span>)
<span class="linenr"> 4: </span>a.append(<span style="color: #98be65;">'coding'</span>)
<span class="linenr"> 5: </span><span style="color: #c678dd;">print</span>(a)
<span class="linenr"> 6: </span>a.pop()
<span class="linenr"> 7: </span><span style="color: #c678dd;">print</span>(a)
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#33258;head&#20570;push, pop</span>
<span class="linenr">10: </span>a.insert(<span style="color: #da8548; font-weight: bold;">0</span>, <span style="color: #98be65;">'drinking'</span>)
<span class="linenr">11: </span>a.insert(<span style="color: #da8548; font-weight: bold;">0</span>, <span style="color: #98be65;">'playing'</span>)
<span class="linenr">12: </span>a.pop(<span style="color: #da8548; font-weight: bold;">0</span>)
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(a)
</pre>
</div>

<pre class="example">
['eating', 'sleeping', 'coding']
['eating', 'sleeping']
['drinking', 'eating', 'sleeping']
</pre>
</div>
</div>
<div id="outline-container-org54ded34" class="outline-4">
<h4 id="org54ded34"><span class="section-number-4">3.6.2.</span> collections.deque</h4>
<div class="outline-text-4" id="text-3-6-2">
<ul class="org-ul">
<li>快速穩定的stack<br /></li>
<li>支援從head,tail做push,pop，效率均為O(1)<br /></li>
<li>若要取出中間element，效率為O(n)<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> collections <span style="color: #51afef;">import</span> deque
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #dcaeea;">a</span> = deque()
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>a.append(<span style="color: #98be65;">'eating'</span>)
<span class="linenr"> 6: </span>a.append(<span style="color: #98be65;">'sleeping'</span>)
<span class="linenr"> 7: </span>a.append(<span style="color: #98be65;">'coding'</span>)
<span class="linenr"> 8: </span><span style="color: #c678dd;">print</span>(a)
<span class="linenr"> 9: </span>a.pop()
<span class="linenr">10: </span><span style="color: #c678dd;">print</span>(a)
<span class="linenr">11: </span>
<span class="linenr">12: </span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">&#33258;&#20013;&#38291;&#21462;&#20540;&#65292;&#25928;&#33021;&#24046;</span>
<span class="linenr">13: </span><span style="color: #c678dd;">print</span>(a[<span style="color: #da8548; font-weight: bold;">1</span>])
<span class="linenr">14: </span>
</pre>
</div>

<pre class="example">
deque(['eating', 'sleeping', 'coding'])
deque(['eating', 'sleeping'])
sleeping
</pre>
</div>
</div>
<div id="outline-container-org761d083" class="outline-4">
<h4 id="org761d083"><span class="section-number-4">3.6.3.</span> queue.LifoQueue</h4>
<div class="outline-text-4" id="text-3-6-3">
<ul class="org-ul">
<li>可用於multithreadin進行parallelism平行運算時的共享資料<br /></li>
<li>這些資料結構還提供了上鎖機制，好讓同一時間只有一個thread能從queue取出資料<br /></li>
<li>queue module裡的LifoQueue class雖名為queue,但採Last In, First Out(LIFO)，運作上與Stack相同<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">from</span> queue <span style="color: #51afef;">import</span> LifoQueue
<span class="linenr">2: </span><span style="color: #dcaeea;">s</span> = LifoQueue()
<span class="linenr">3: </span>s.put(<span style="color: #98be65;">'eating'</span>)
<span class="linenr">4: </span>s.put(<span style="color: #98be65;">'sleeping'</span>)
<span class="linenr">5: </span>s.put(<span style="color: #98be65;">'coding'</span>)
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(s.get())
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(s.get())
</pre>
</div>
<pre class="example">
coding
sleeping
</pre>
</div>
</div>
</div>
<div id="outline-container-orga89b2cb" class="outline-3">
<h3 id="orga89b2cb"><span class="section-number-3">3.7.</span> Queue</h3>
<div class="outline-text-3" id="text-3-7">
<p>
幾種實作queue的資料結構<br />
</p>
</div>
<div id="outline-container-org71fd76b" class="outline-4">
<h4 id="org71fd76b"><span class="section-number-4">3.7.1.</span> list</h4>
<div class="outline-text-4" id="text-3-7-1">
<ul class="org-ul">
<li>非常慢，沒有效率<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgcd54f8f" class="outline-4">
<h4 id="orgcd54f8f"><span class="section-number-4">3.7.2.</span> collections.deque</h4>
<div class="outline-text-4" id="text-3-7-2">
<ul class="org-ul">
<li>快速穩定<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> collections <span style="color: #51afef;">import</span> deque
<span class="linenr"> 2: </span><span style="color: #dcaeea;">q</span> = deque()
<span class="linenr"> 3: </span>q.append(<span style="color: #98be65;">'eating'</span>)
<span class="linenr"> 4: </span>q.append(<span style="color: #98be65;">'sleeping'</span>)
<span class="linenr"> 5: </span>q.append(<span style="color: #98be65;">'coding'</span>)
<span class="linenr"> 6: </span>q.append(<span style="color: #98be65;">'writing'</span>)
<span class="linenr"> 7: </span><span style="color: #c678dd;">print</span>(q)
<span class="linenr"> 8: </span><span style="color: #c678dd;">print</span>(q.popleft())
<span class="linenr"> 9: </span><span style="color: #c678dd;">print</span>(q.popleft())
<span class="linenr">10: </span><span style="color: #c678dd;">print</span>(q)
<span class="linenr">11: </span>
</pre>
</div>

<pre class="example">
deque(['eating', 'sleeping', 'coding', 'writing'])
eating
sleeping
deque(['coding', 'writing'])
</pre>
</div>
</div>
<div id="outline-container-orga73a9bc" class="outline-4">
<h4 id="orga73a9bc"><span class="section-number-4">3.7.3.</span> queue.Queue</h4>
<div class="outline-text-4" id="text-3-7-3">
<ul class="org-ul">
<li>和queue.LifoQueue一樣，內建上鎖機制，可以用來讓multithreading共享資料或任務<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgaf2cf88" class="outline-4">
<h4 id="orgaf2cf88"><span class="section-number-4">3.7.4.</span> multiprocessing.Queue</h4>
<div class="outline-text-4" id="text-3-7-4">
<ul class="org-ul">
<li>multi-thread在python中其實不算真正的平行運算，各thread實際上是在同一個interpreter下執行，只用到一個core，藉由不斷切換的方式來達到平行運算的效果。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgdb59ee8" class="outline-4">
<h4 id="orgdb59ee8"><span class="section-number-4">3.7.5.</span> priority queue</h4>
<div class="outline-text-4" id="text-3-7-5">
<ul class="org-ul">
<li>不遵循FIFO原則，而是以priority為順序考量<br /></li>
<li>priority由totally-ordered key來決定<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgc672298" class="outline-4">
<h4 id="orgc672298"><span class="section-number-4">3.7.6.</span> heapq</h4>
<div class="outline-text-4" id="text-3-7-6">
<ul class="org-ul">
<li>借用list實作的binary tree(heap)結構<br /></li>
<li>可實作priority<br /></li>
<li>可於O(log n)的時間完成插入元素或取出最小元素<br /></li>
<li>heapq的各note實際上是存在一個list中；node在list中是依binary tree的順序儲存<br /></li>
<li>借由binary tree所依據的sort key即可實作出priority queue<br /></li>
<li>限制之一是預設為由小到大排序<br /></li>
</ul>

<div id="org4f6aed8" class="figure">
<p><img src="images/heapq.png" alt="heapq.png" width="300" /><br />
</p>
<p><span class="figure-number">Figure 1: </span>heapq</p>
</div>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">import</span> heapq
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #dcaeea;">q</span> = []
<span class="linenr">4: </span>heapq.heappush(q, (<span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #98be65;">'coding'</span>))
<span class="linenr">5: </span>heapq.heappush(q, (<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #98be65;">'eating'</span>))
<span class="linenr">6: </span>heapq.heappush(q, (<span style="color: #da8548; font-weight: bold;">3</span>, <span style="color: #98be65;">'sleeping'</span>))
<span class="linenr">7: </span><span style="color: #51afef;">while</span> q:
<span class="linenr">8: </span>    <span style="color: #dcaeea;">next_item</span> = heapq.heappop(q)
<span class="linenr">9: </span>    <span style="color: #c678dd;">print</span>(next_item)
</pre>
</div>

<pre class="example">
(1, 'eating')
(2, 'coding')
(3, 'sleeping')
</pre>
</div>
</div>
<div id="outline-container-orgec38bd8" class="outline-4">
<h4 id="orgec38bd8"><span class="section-number-4">3.7.7.</span> queue.PriorityQueue</h4>
<div class="outline-text-4" id="text-3-7-7">
<ul class="org-ul">
<li>可用於multi-thread的heapq<br />
**<br /></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org54f65cf" class="outline-2">
<h2 id="org54f65cf"><span class="section-number-2">4.</span> <span class="todo LOOP">LOOP</span> </h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org98a8df5" class="outline-3">
<h3 id="org98a8df5"><span class="section-number-3">4.1.</span> enumerate()</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>如果想保留for-each的寫法，但同時又希望能取得每個element的index<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">my_items</span> = [<span style="color: #98be65;">'a'</span>, <span style="color: #98be65;">'b'</span>, <span style="color: #98be65;">'c'</span>]
<span class="linenr">2: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">list</span>(<span style="color: #c678dd;">enumerate</span>(my_items)))
<span class="linenr">3: </span><span style="color: #51afef;">for</span> i, item <span style="color: #51afef;">in</span> <span style="color: #c678dd;">enumerate</span>(my_items):
<span class="linenr">4: </span>    <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'</span>{i}<span style="color: #98be65;">: </span>{item}<span style="color: #98be65;">'</span>)
</pre>
</div>

<pre class="example">
[(0, 'a'), (1, 'b'), (2, 'c')]
0: a
1: b
2: c
</pre>
</div>
</div>
<div id="outline-container-org829f877" class="outline-3">
<h3 id="org829f877"><span class="section-number-3">4.2.</span> zip()</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>可用來同時走訪多個container<br /></li>
<li>可用來旋轉二維list<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">my_items</span> = [<span style="color: #98be65;">'a'</span>, <span style="color: #98be65;">'b'</span>, <span style="color: #98be65;">'c'</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">my_no</span> = [<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>]
<span class="linenr">3: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">list</span>(<span style="color: #c678dd;">zip</span>(my_no, my_items)))
<span class="linenr">4: </span>
<span class="linenr">5: </span><span style="color: #51afef;">for</span> no, item <span style="color: #51afef;">in</span> <span style="color: #c678dd;">zip</span>(my_no, my_items):
<span class="linenr">6: </span>    <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'</span>{no}<span style="color: #98be65;">: </span>{item}<span style="color: #98be65;">'</span>)
</pre>
</div>

<pre class="example">
[(1, 'a'), (2, 'b'), (3, 'c')]
1: a
2: b
3: c
</pre>
</div>
<div id="outline-container-org270b4f0" class="outline-4">
<h4 id="org270b4f0"><span class="section-number-4">4.2.1.</span> 旋轉list</h4>
<div class="outline-text-4" id="text-4-2-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">a</span> = [<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">b</span> = [<span style="color: #da8548; font-weight: bold;">4</span>, <span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">6</span>]
<span class="linenr">3: </span><span style="color: #dcaeea;">c</span> = [<span style="color: #da8548; font-weight: bold;">7</span>, <span style="color: #da8548; font-weight: bold;">8</span>, <span style="color: #da8548; font-weight: bold;">9</span>]
<span class="linenr">4: </span><span style="color: #dcaeea;">matrix</span> = [a, b, c]
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(matrix)
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">list</span>(<span style="color: #c678dd;">zip</span>(*matrix)))
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">list</span>(<span style="color: #c678dd;">zip</span>(*<span style="color: #c678dd;">reversed</span>(matrix))))
</pre>
</div>

<pre class="example">
[[1, 2, 3], [4, 5, 6], [7, 8, 9]]
[(1, 4, 7), (2, 5, 8), (3, 6, 9)]
[(7, 4, 1), (8, 5, 2), (9, 6, 3)]
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd980cdf" class="outline-3">
<h3 id="orgd980cdf"><span class="section-number-3">4.3.</span> comprehension</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>即簡單的單行for-loop<br /></li>
<li>可以讓我們用單行程式產生出包含特定元素的list, set, dict<br /></li>
</ul>
</div>
<div id="outline-container-orga43aa1c" class="outline-4">
<h4 id="orga43aa1c"><span class="section-number-4">4.3.1.</span> 語法</h4>
<div class="outline-text-4" id="text-4-3-1">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #c678dd;">list</span> = [&#36939;&#31639;&#24335; <span style="color: #51afef;">for</span> &#35722;&#25976; <span style="color: #51afef;">in</span> iterable <span style="color: #c678dd;">object</span>]
</pre>
</div>
</div>
</div>
<div id="outline-container-org441382b" class="outline-4">
<h4 id="org441382b"><span class="section-number-4">4.3.2.</span> list comprehension</h4>
<div class="outline-text-4" id="text-4-3-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">squares</span> = [x ** <span style="color: #da8548; font-weight: bold;">2</span> <span style="color: #51afef;">for</span> x <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>)]
<span class="linenr">2: </span><span style="color: #c678dd;">print</span>(squares)
</pre>
</div>

<pre class="example">
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
</pre>
</div>
</div>
<div id="outline-container-org857f8f8" class="outline-4">
<h4 id="org857f8f8"><span class="section-number-4">4.3.3.</span> comprehension過濾條件</h4>
<div class="outline-text-4" id="text-4-3-3">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #c678dd;">list</span> = [x ** <span style="color: #da8548; font-weight: bold;">2</span> <span style="color: #51afef;">for</span> x <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>) <span style="color: #51afef;">if</span> x % <span style="color: #da8548; font-weight: bold;">2</span> == <span style="color: #da8548; font-weight: bold;">0</span>]
<span class="linenr">2: </span><span style="color: #c678dd;">print</span>(<span style="color: #c678dd;">list</span>)
</pre>
</div>

<pre class="example">
[0, 4, 16, 36, 64]
</pre>
</div>
</div>
<div id="outline-container-org80eeefe" class="outline-4">
<h4 id="org80eeefe"><span class="section-number-4">4.3.4.</span> set與dict comprehension</h4>
<div class="outline-text-4" id="text-4-3-4">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">setA</span> = [x ** <span style="color: #da8548; font-weight: bold;">2</span> <span style="color: #51afef;">for</span> x <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>)]
<span class="linenr">2: </span><span style="color: #c678dd;">print</span>(setA)
<span class="linenr">3: </span><span style="color: #dcaeea;">dicA</span> = {x: x ** <span style="color: #da8548; font-weight: bold;">2</span> <span style="color: #51afef;">for</span> x <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>)}
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(dicA)
</pre>
</div>

<pre class="example">
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
{0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}
</pre>
</div>
</div>
</div>
<div id="outline-container-org1d20136" class="outline-3">
<h3 id="org1d20136"><span class="section-number-3">4.4.</span> list</h3>
<div class="outline-text-3" id="text-4-4">
</div>
<div id="outline-container-org929a5cf" class="outline-4">
<h4 id="org929a5cf"><span class="section-number-4">4.4.1.</span> slice</h4>
<div class="outline-text-4" id="text-4-4-1">
<p>
語法<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #c678dd;">list</span>[index start: index end: step]
</pre>
</div>

<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">nums</span> = [<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>, <span style="color: #da8548; font-weight: bold;">4</span>, <span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">6</span>, <span style="color: #da8548; font-weight: bold;">7</span>, <span style="color: #da8548; font-weight: bold;">8</span>]
<span class="linenr">2: </span><span style="color: #c678dd;">print</span>(nums[::])
<span class="linenr">3: </span><span style="color: #c678dd;">print</span>(nums[<span style="color: #da8548; font-weight: bold;">1</span>:<span style="color: #da8548; font-weight: bold;">6</span>:<span style="color: #da8548; font-weight: bold;">2</span>])
<span class="linenr">4: </span><span style="color: #dcaeea;">nums</span>[<span style="color: #da8548; font-weight: bold;">1</span>:<span style="color: #da8548; font-weight: bold;">6</span>:<span style="color: #da8548; font-weight: bold;">2</span>] = [<span style="color: #da8548; font-weight: bold;">10</span>, <span style="color: #da8548; font-weight: bold;">20</span>, <span style="color: #da8548; font-weight: bold;">30</span>]
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(nums)
<span class="linenr">6: </span>
</pre>
</div>

<pre class="example">
[1, 2, 3, 4, 5, 6, 7, 8]
[2, 4, 6]
[1, 10, 3, 20, 5, 30, 7, 8]
</pre>
</div>
</div>
<div id="outline-container-org3fedab1" class="outline-4">
<h4 id="org3fedab1"><span class="section-number-4">4.4.2.</span> copy</h4>
<div class="outline-text-4" id="text-4-4-2">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #dcaeea;">l</span> = <span style="color: #c678dd;">list</span>(<span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">6</span>))
<span class="linenr">2: </span><span style="color: #c678dd;">print</span>(l)
<span class="linenr">3: </span><span style="color: #dcaeea;">cl</span> = l <span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#25351;&#21521;&#21516;&#19968;list</span>
<span class="linenr">4: </span><span style="color: #dcaeea;">dl</span> = l[::] <span style="color: #5B6268;"># </span><span style="color: #5B6268;">shallow copy</span>
<span class="linenr">5: </span><span style="color: #dcaeea;">l</span>[<span style="color: #da8548; font-weight: bold;">3</span>] = <span style="color: #da8548; font-weight: bold;">10</span>
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(cl)
<span class="linenr">7: </span><span style="color: #c678dd;">print</span>(dl)
</pre>
</div>

<pre class="example">
[0, 1, 2, 3, 4, 5]
[0, 1, 2, 10, 4, 5]
[0, 1, 2, 3, 4, 5]
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0fd135e" class="outline-2">
<h2 id="org0fd135e"><span class="section-number-2">5.</span> Python 套件管理</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org40ae3e7" class="outline-3">
<h3 id="org40ae3e7"><span class="section-number-3">5.1.</span> pip v.s. conda</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-org5f202b4" class="outline-4">
<h4 id="org5f202b4"><span class="section-number-4">5.1.1.</span> pip or conda</h4>
<div class="outline-text-4" id="text-5-1-1">
<ul class="org-ul">
<li>Python 的一大優勢之一便是龐大的第三方函式庫，讓使用 python 的程式設計師可以方便的呼叫、進行如網路資料下載解析、資料的視覺化、甚或是大數據的複雜分析與人工智慧的相關套件。，<br /></li>
<li>目前用來管理這些龐大套件的工具主要有二：pip 與 Conda。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orga9e3362" class="outline-4">
<h4 id="orga9e3362"><span class="section-number-4">5.1.2.</span> pip</h4>
<div class="outline-text-4" id="text-5-1-2">
<ul class="org-ul">
<li>Pip是<a href="https://www.pypa.io/en/latest/">Python Packaging Authority</a>推薦、用於從<a href="https://pypi.org/">Python Package Index</a>安裝套件的工具，提供了對 Python 套件的搜㝷、下載、安裝、卸載的功能。<br /></li>
<li>若在 python.org 下載最新版本的 python，則已內建 pip 安裝套件。 Python 3.4+ 以上版本均已包括 pip<br /></li>
<li>該工具類似 Linux 下的 apt/yum 或 MAC 下的<a href="https://brew.sh/index_zh-tw">Homebrew</a>。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org27caf37" class="outline-4">
<h4 id="org27caf37"><span class="section-number-4">5.1.3.</span> conda</h4>
<div class="outline-text-4" id="text-5-1-3">
<ul class="org-ul">
<li>Conda 是一個開源的跨平台工具軟體，它被設計作為 Python、R、Lua、Scala、C/C++、FORTRAN/ 與 Java 等任何程式語言的套件、依賴性以及工作環境管理員，特別受到以 Python 作為主要程式語言的資料科學團隊所喜愛。<br /></li>
<li>適用平台：Windows, macOS, Linux<br /></li>
<li>傳統 Python 使用者以 pip 作為套件管理員（package manager）、以 venv 作為工作環境管理員（environment manager），而 conda 則達成了「兩個願望、一次滿足」既可以管理套件亦能夠管理工作環境。<sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org89c0fe5" class="outline-4">
<h4 id="org89c0fe5"><span class="section-number-4">5.1.4.</span> In both cases:</h4>
<div class="outline-text-4" id="text-5-1-4">
<ul class="org-ul">
<li>Written in Python<br /></li>
<li>Open source (Conda is BSD and pip is MIT)<br /></li>
<li><a href="http://inspiregate.com/internet/trends/74-comparison-of-five-kinds-of-standard-open-source-license-bsd-apache-gpl-lgpl-mit.html">五種開源授權規範的比較 (BSD, Apache, GPL, LGPL, MIT)</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org8b8cf3b" class="outline-4">
<h4 id="org8b8cf3b"><span class="section-number-4">5.1.5.</span> difference between conda, anaconda, and miniconda</h4>
<div class="outline-text-4" id="text-5-1-5">
<ul class="org-ul">
<li>conda is both a command line tool, and a python package. <sup><a id="fnr.3" class="footref" href="#fn.3" role="doc-backlink">3</a></sup><br /></li>
<li>Anaconda 發行版會預裝很多套件，而 Miniconda 是最小的 conda 安裝環境， 一個乾淨的 conda 環境。<br /></li>
<li>pip  只是運與安裝 python package，而 conda 用來安裝管理任何語言的包。<br /></li>
<li><p>
不一定要安裝 Anaconda 或 Miniconda，也可透過 pip 直接安裝 conda<br />
</p>
<div class="org-src-container">
<pre class="src src-shell">  pip install conda
</pre>
</div></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5e374d1" class="outline-3">
<h3 id="org5e374d1"><span class="section-number-3">5.2.</span> conda 安裝與使用</h3>
<div class="outline-text-3" id="text-5-2">
</div>
<div id="outline-container-orgf870f4b" class="outline-4">
<h4 id="orgf870f4b"><span class="section-number-4">5.2.1.</span> 下載 v.s. 安裝</h4>
<div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li><a href="https://www.anaconda.com/distribution/">Anaconda</a><br /></li>
<li><a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgeb66a23" class="outline-4">
<h4 id="orgeb66a23"><span class="section-number-4">5.2.2.</span> 安裝conda</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
for macOS<br />
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span>brew install --cask anaconda
<span class="linenr">2: </span><span style="color: #c678dd;">export</span> <span style="color: #dcaeea;">PATH</span>=<span style="color: #98be65;">"/usr/local/anaconda3/bin:</span><span style="color: #a9a1e1;">$</span><span style="color: #dcaeea;">PATH</span><span style="color: #98be65;">"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org71f3342" class="outline-4">
<h4 id="org71f3342"><span class="section-number-4">5.2.3.</span> 移除</h4>
<div class="outline-text-4" id="text-5-2-3">
<ul class="org-ul">
<li>Windows: uninstall<br /></li>
<li>Linux/macOS:<br />
<code class="src src-shell"> <span style="color: #ECBE7B;">rm</span> -rf ~/anaconda </code><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6834bf2" class="outline-3">
<h3 id="org6834bf2"><span class="section-number-3">5.3.</span> python package 安裝(conda)</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li><p>
安裝 package:<br />
<code class="src src-python"> conda install packageName </code><br />
</p>
<div class="org-src-container">
<pre class="src src-shell">  conda install pandas
</pre>
</div></li>
<li><p>
移除 package:<br />
<code class="src src-python"> conda remove packageName </code><br />
</p>
<div class="org-src-container">
<pre class="src src-shell">  conda remove pandas
</pre>
</div></li>
<li><p>
安裝特定版本 python<br />
<code class="src src-python"> conda install <span style="color: #dcaeea;">python</span>=version </code><br />
</p>
<div class="org-src-container">
<pre class="src src-shell">  conda install <span style="color: #dcaeea;">python</span>=<span style="color: #da8548; font-weight: bold;">3.5</span>
</pre>
</div></li>
<li><p>
了解目前系統可用套件<br />
</p>
<div class="org-src-container">
<pre class="src src-shell">    conda list
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orga1a0e5a" class="outline-3">
<h3 id="orga1a0e5a"><span class="section-number-3">5.4.</span> Python 常用函式庫</h3>
<div class="outline-text-3" id="text-5-4">
</div>
<div id="outline-container-orgf458367" class="outline-4">
<h4 id="orgf458367"><span class="section-number-4">5.4.1.</span> 爬蟲</h4>
<div class="outline-text-4" id="text-5-4-1">
</div>
<div id="outline-container-orged17317" class="outline-5">
<h5 id="orged17317">Scrapy:</h5>
<div class="outline-text-5" id="text-orged17317">

<div id="orge2e476a" class="figure">
<p><img src="images/scrapy.jpg" alt="scrapy.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Scrapy，Python 開發的一個快速、高層次的 web 數據抓取框架，用於抓取 web 站點並從頁面中提取結構化的數據。Scrapy 用途廣泛，可以用於數據挖掘、監測和自動化測試<sup><a id="fnr.4" class="footref" href="#fn.4" role="doc-backlink">4</a></sup>。<br /></li>
<li>Scrapy 吸引人的地方在於它是一個框架，任何人都可以根據需求方便的修改。它也提供了多種類型爬蟲的基類，如 BaseSpider、sitemap 爬蟲等。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org04ad843" class="outline-5">
<h5 id="org04ad843">beautifulsoup4:</h5>
<div class="outline-text-5" id="text-org04ad843">

<div id="org87d32fe" class="figure">
<p><img src="images/bs.png" alt="bs.png" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Beautiful Soup 是一個 Python 的函式庫模組，可以讓開發者僅須撰寫非常少量的程式<br />
碼，就可以快速解析網頁 HTML 碼，從中翠取出使用者有興趣的資料、去蕪存菁，降低網<br />
路爬蟲程式的開發門檻、加快程式撰寫速度。<sup><a id="fnr.5" class="footref" href="#fn.5" role="doc-backlink">5</a></sup><br /></li>
<li>而 Beautiful Soup 是基於 HTML DOM 的，會載入整個文檔，解析整個 DOM 樹，因此時間和內存開銷都會大很多，所以性能要低於 lxml。<sup><a id="fnr.6" class="footref" href="#fn.6" role="doc-backlink">6</a></sup><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgebe071f" class="outline-5">
<h5 id="orgebe071f">Selenium</h5>
<div class="outline-text-5" id="text-orgebe071f">

<div id="orge0232e3" class="figure">
<p><img src="images/selenium.jpg" alt="selenium.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>原為網頁測試工具，但由於可以直接以程式碼操控瀏覽器的特性，使其成為網路爬蟲必備<br />
的工具之一。<sup><a id="fnr.7" class="footref" href="#fn.7" role="doc-backlink">7</a></sup><br /></li>
<li>Selenium 執行「真實的瀏覽器」來進行網站操作的自動化，它能夠直接獲取即時的內容，包括被 JavaScript 修改過的 DOM 內容，讓程式可以直接與網頁元素即時互動、執行 JavaScript 程式，因此也適用於前端採用 AJAX 技術的網站。<sup><a id="fnr.8" class="footref" href="#fn.8" role="doc-backlink">8</a></sup><br /></li>
<li>Selenium 是許多 Web Testing 工具的核心，利用 Selenium 操作網頁表單資料、點選按鈕或連結、取得網頁內容並進行檢驗，可以滿足相當多測試的需求。<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7f0701d" class="outline-4">
<h4 id="org7f0701d"><span class="section-number-4">5.4.2.</span> 網站</h4>
<div class="outline-text-4" id="text-5-4-2">
</div>
<div id="outline-container-orgf44076d" class="outline-5">
<h5 id="orgf44076d">Django</h5>
<div class="outline-text-5" id="text-orgf44076d">

<div id="org5176a0e" class="figure">
<p><img src="images/django.jpg" alt="django.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Django (<i>ˈdʒæŋɡoʊ</i> jang-goh) 可以說是 Python 最著名的 Web Framework，一些知名的網站如 Pinterest, Instagram, Disqus 等等都使用過它來開發。<sup><a id="fnr.9" class="footref" href="#fn.9" role="doc-backlink">9</a></sup><br /></li>
<li>免費開放原始碼<br /></li>
<li>著重快速開發、高效能<br /></li>
<li>遵從 DRY ( Don&rsquo;t Repeat Yourself ) 守則，致力於淺顯易懂和優雅的程式碼<br /></li>
<li>使用類似 Model–view–controller (MVC) pattern 的架構<br /></li>
<li><a href="https://djangostars.com/blog/10-popular-sites-made-on-django/">10 Popular Websites Built With Django</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org85f5554" class="outline-5">
<h5 id="org85f5554">Flask</h5>
<div class="outline-text-5" id="text-org85f5554">

<div id="org25c29f2" class="figure">
<p><img src="images/flask.png" alt="flask.png" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Flask 是一個使用 Python 撰寫的輕量級 Web 應用程式框架，由於其輕量特性，也稱為<br />
micro-framework（微框架）。<sup><a id="fnr.10" class="footref" href="#fn.10" role="doc-backlink">10</a></sup><br /></li>
<li>Flask 和 Django 不同的地方在於 Flask 給予開發者非常大的彈性（當然你也可以說是<br />
需要思考更多事情），可以選用不同的用的 extension 來增加其功能。<br /></li>
<li>相比之下，Django 雖然完善但技術選擇相對不彈性，不論是 ORM、表單驗證或是模版引<br />
擎都有自己的作法。<br /></li>
<li>沒有最好的框架，只有合適的使用情境。<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd61b2af" class="outline-4">
<h4 id="orgd61b2af"><span class="section-number-4">5.4.3.</span> 資料處理科學計算</h4>
<div class="outline-text-4" id="text-5-4-3">
</div>
<div id="outline-container-org0c7734b" class="outline-5">
<h5 id="org0c7734b">Numpy</h5>
<div class="outline-text-5" id="text-org0c7734b">

<div id="orgfd98a44" class="figure">
<p><img src="images/numpy.jpg" alt="numpy.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Numpy 底層以 C 和 Fortran 語言實作，所以能快速操作多重維度的陣列。<sup><a id="fnr.11" class="footref" href="#fn.11" role="doc-backlink">11</a></sup><br /></li>
<li>當 Python 處理龐大資料時，其原生 list 效能表現並不理想（但可以動態存異質資料），而 Numpy 具備平行處理的能力，可以將操作動作一次套用在大型陣列上。<br /></li>
<li>此外 Python 其餘重量級的資料科學相關套件（例如：Pandas、SciPy、Scikit-learn 等）都幾乎是奠基在 Numpy 的基礎上。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgf3fc655" class="outline-5">
<h5 id="orgf3fc655">Scipy</h5>
<div class="outline-text-5" id="text-orgf3fc655">

<div id="orgd2246a6" class="figure">
<p><img src="images/scipy.png" alt="scipy.png" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>科學計算神器<br /></li>
<li>Numpy 是以矩陣基礎做數據的數學運算，SciPy 就是以 Numpy 為基礎做科學、工程的運算處理的 package，包含統計、優化、整合、線性代數、傅立葉轉換圖像等較高階的科學運算。<sup><a id="fnr.12" class="footref" href="#fn.12" role="doc-backlink">12</a></sup><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgc546e22" class="outline-5">
<h5 id="orgc546e22">Pandas</h5>
<div class="outline-text-5" id="text-orgc546e22">

<div id="orgd0a3486" class="figure">
<p><img src="images/pandas.png" alt="pandas.png" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>建構在 NumPy 之上，提供資料結構與資料處理工具，讓資料清理與分析更為快速與方便<br /></li>
<li>適合處理表格或異質資料 (NumPy 適合處理同質之數值陣列資料)<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga962b95" class="outline-4">
<h4 id="orga962b95"><span class="section-number-4">5.4.4.</span> 視覺化</h4>
<div class="outline-text-4" id="text-5-4-4">
</div>
<div id="outline-container-org3cc0835" class="outline-5">
<h5 id="org3cc0835">matplotlib</h5>
<div class="outline-text-5" id="text-org3cc0835">

<div id="org3a08c27" class="figure">
<p><img src="images/matplotlib.jpg" alt="matplotlib.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Matplotlib 就是 MATLAB+Plot+Library 的簡稱，因為是模仿 MATLAB 建立的繪圖庫，所以繪<br />
圖風格會與 MATLAB 有點類似。<sup><a id="fnr.13" class="footref" href="#fn.13" role="doc-backlink">13</a></sup><br /></li>
<li>為了提高處理大量資料的性能，Matplotlib 大量使用了 NumPy 和其相關的擴展代碼。 為了方便快速繪圖， Matplotlib 通過 pyplot 模組提供了一套和 MATLAB 類似的繪圖 API，只需要調用 pyplot 模組所提供的函數，就可以實現快速繪圖及設置圖表的各種細節。<br /></li>
<li>另一方面 Matplotlib 也適合互動式繪製圖表，可以很方便地處理二維和三維的圖表。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org6aef979" class="outline-5">
<h5 id="org6aef979">seaborn</h5>
<div class="outline-text-5" id="text-org6aef979">

<div id="org45634c3" class="figure">
<p><img src="images/seaborn.png" alt="seaborn.png" width="400" /><br />
</p>
</div>

<div id="orgbe99f74" class="figure">
<p><img src="images/seabornPlots.jpg" alt="seabornPlots.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>散點圖矩陣神器<br /></li>
<li>Seaborn 是 Python 一個著名的數據視覺化的 package, 以 matplotlib 為基底的一個擴<br />
展包, 它提供了易於理解的統計圖和便利的繪圖指令<sup><a id="fnr.14" class="footref" href="#fn.14" role="doc-backlink">14</a></sup><br /></li>
<li>seaborn 庫是對 matplotlib 庫更高級別的封裝，相當於提供了各種統計圖的模板<sup><a id="fnr.15" class="footref" href="#fn.15" role="doc-backlink">15</a></sup><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org0142dd3" class="outline-5">
<h5 id="org0142dd3">ggplot</h5>
<div class="outline-text-5" id="text-org0142dd3">

<div id="orgecef4c5" class="figure">
<p><img src="images/ggplot.jpg" alt="ggplot.jpg" width="300" /><br />
</p>
</div>
<ul class="org-ul">
<li>R 語言視覺化神器的 Python 版本<br /></li>
<li>ggplot2 是一個十分強大的 R 語言可視化包。它的核心理念是將繪圖與數據分離，數據相關<br />
的繪圖與數據無關的繪圖分離。<sup><a id="fnr.16" class="footref" href="#fn.16" role="doc-backlink">16</a></sup><br /></li>
<li>它是按圖層作圖的，一個語句做一個僅包含基礎作圖單元的圖層，然後通過不同圖層的疊<br />
加最後成圖。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org3090c55" class="outline-5">
<h5 id="org3090c55">plotly</h5>
<div class="outline-text-5" id="text-org3090c55">

<div id="org3753f93" class="figure">
<p><img src="images/plotly.png" alt="plotly.png" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>這個神器是個 js 庫，不過也有各種流行的語言介面<br /></li>
<li>plotly 是一個能讓你畫出互動式圖表的一個開源套件,其基本操作是免費的,如果你想要使用網頁的版本,可以使用更多 plotly 的進階功能的話,就必須付費<br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org39279d6" class="outline-4">
<h4 id="org39279d6"><span class="section-number-4">5.4.5.</span> 機器學習</h4>
<div class="outline-text-4" id="text-5-4-5">
</div>
<div id="outline-container-org80eb90c" class="outline-5">
<h5 id="org80eb90c">scikit-learn</h5>
<div class="outline-text-5" id="text-org80eb90c">

<div id="orgc12f426" class="figure">
<p><img src="images/scikit-learn.png" alt="scikit-learn.png" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>幾乎所有機器學習演算法都囊括<br /></li>
<li>scikit-learn，又寫作 sklearn，是一個開源的基於 python 語言的機器學習工具包。它通過 NumPy, SciPy 和 Matplotlib 等 python 數值計算的庫實現高效的算法應用，並且涵蓋了幾乎所有主流機器學習算法。<sup><a id="fnr.17" class="footref" href="#fn.17" role="doc-backlink">17</a></sup><br /></li>
<li>sklearn 中常用的 module 有分類、回歸、聚類、降維、模型選擇、預處理。<br /></li>
</ul>
</div>
</div>
<div id="outline-container-org413d58b" class="outline-5">
<h5 id="org413d58b">NLTK</h5>
<div class="outline-text-5" id="text-org413d58b">

<div id="org9e530f2" class="figure">
<p><img src="images/NLTK.png" alt="NLTK.png" width="300" /><br />
</p>
</div>
<ul class="org-ul">
<li>NLTK 全文是 “Nature Language Tool Kit” (NLTK)，是 Python 中一個經典的、專門用於進行自然語言處理的工具。<sup><a id="fnr.18" class="footref" href="#fn.18" role="doc-backlink">18</a></sup><br /></li>
<li>雖然也能進行部份中文的處理，但是對於中文的支援度自然沒有英文來得好<br /></li>
<li>目前而言，繁體中文有兩個套件可以使用，一個是中研院開發的斷詞系統，另一套系統為<br />
jieba(結巴)。<br /></li>
<li><a href="https://poem.msxiaobing.com/">少女詩人小冰</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org2c4cc79" class="outline-5">
<h5 id="org2c4cc79">TensorFlow</h5>
<div class="outline-text-5" id="text-org2c4cc79">

<div id="orgaa2e2ff" class="figure">
<p><img src="images/tensorflow.jpg" alt="tensorflow.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Tensorflow 最初為 Google Brian 所開發。在 2015 時，Google 將之開源，為現今重要的深<br />
度學習框架之一，它支援各式不同的深度學習演算法，並已應用於各大企業服務上，Ex:<br />
Google, Youtube, Airbnb, Paypal &#x2026; 等。<sup><a id="fnr.19" class="footref" href="#fn.19" role="doc-backlink">19</a></sup><br /></li>
<li>此外，Tensorflow 也支援在各式不同的<br />
device 上運行深度學習 Ex: Tensorflow Lite 、 Tensorflow.js 等等。<br /></li>
<li>Tensorflow 為目<br />
前最受歡迎的機器學習、深度學習開源專案。不管是 github fork 的數量、論文的使用次<br />
數以及熱門程度，均比其他的框架來的多<sup><a id="fnr.20" class="footref" href="#fn.20" role="doc-backlink">20</a></sup>。<br /></li>
</ul>

<p>
深度學習套件<br />
</p>
</div>
</div>
<div id="outline-container-org3855daf" class="outline-5">
<h5 id="org3855daf">Keras</h5>
<div class="outline-text-5" id="text-org3855daf">

<div id="org4d2fdb6" class="figure">
<p><img src="images/keras.png" alt="keras.png" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>在 2015 年 TensorFlow 推出的同時，美國麻省理工學院（又是它，這學校開門就能賺錢）<br />
也推出一套能很容易被使用者透過 Python 寫 Deep learning 的應用程式介面 API ，叫<br />
做 Keras 。<br /></li>
<li>Keras 只有介面喔！ <a href="https://www.math.ntnu.no/emner/TMA4268/2018v/11NN/3-keras.html">Keras 本身還是得透過 TensorFlow ，或者其<br />
他像是微軟的 CNTK 這類引擎當作底層，才能執行</a>。<sup><a id="fnr.21" class="footref" href="#fn.21" role="doc-backlink">21</a></sup><br /></li>
<li>Keras 使用上比較接近人類的想法（ TensorFlow 設計上沒有錯，只不過比較是針對電腦<br />
系統跟網路通訊的想法），所以透過 Python 呼叫 Keras 能夠很簡單地描述我們人類想<br />
要電腦達到 Deep Learning 要做的事情。目前在教學上， Keras 的普及率相當高<br /></li>
<li>Keras 可以快速有方便運算的主要原因是，它已經將訓練模型的輸入層、隱藏層、輸出層，做好架構，使用者只需要加入並且填寫正確的參數 ex.神經元個數、activation function 的函式…等。<sup><a id="fnr.22" class="footref" href="#fn.22" role="doc-backlink">22</a></sup><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orge082bf2" class="outline-5">
<h5 id="orge082bf2">PyTorch</h5>
<div class="outline-text-5" id="text-orge082bf2">

<div id="org528df5d" class="figure">
<p><img src="images/pytorch.jpg" alt="pytorch.jpg" width="400" /><br />
</p>
</div>
<ul class="org-ul">
<li>Numpy 的 GPU 版<br /></li>
<li>PyTorch 為 Facebook 在 2017 年初開源的深度學習框架，其建立在 Torch 之上，且標<br />
榜 Python First ，為量身替 Python 語言所打造，使用起來就跟寫一般 Python 專案沒<br />
兩樣，也能和其他 Python 套件無痛整合。PyTorch 的優勢在於其概念相當直觀且語法簡<br />
潔優雅，因此視為新手入門的一個好選項；再來其輕量架構讓模型得以快速訓練且有效運<br />
用資源。<sup><a id="fnr.23" class="footref" href="#fn.23" role="doc-backlink">23</a></sup><br /></li>
<li>於 PyTorch 框架中，資料類型定義為張量(Tensor)，張量可以是純量、向量或是更高維度的矩陣，而 torch 函式庫負責張量在 CPU/GPU 的運算。<br /></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org9fe5621" class="outline-3">
<h3 id="org9fe5621"><span class="section-number-3">5.5.</span> python 執行環境建立與維護</h3>
<div class="outline-text-3" id="text-5-5">
<ul class="org-ul">
<li><p>
建立<sup><a id="fnr.24" class="footref" href="#fn.24" role="doc-backlink">24</a></sup><br />
</p>
<div class="org-src-container">
<pre class="src src-shell">conda create -n envName
</pre>
</div></li>
<li><p>
啟用<br />
</p>
<div class="org-src-container">
<pre class="src src-shell">conda activate envName
</pre>
</div></li>
<li><p>
退出<br />
</p>
<div class="org-src-container">
<pre class="src src-shell"> conda deactiveate
</pre>
</div></li>
<li><p>
刪除<br />
</p>
<div class="org-src-container">
<pre class="src src-shell">conda env remove -n envName
</pre>
</div></li>
<li><p>
列出目前系統中所有的虛擬環境<br />
</p>
<div class="org-src-container">
<pre class="src src-shell">conda env list
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orgd81d24c" class="outline-3">
<h3 id="orgd81d24c"><span class="section-number-3">5.6.</span> 將執行環境匯入 jupyter</h3>
<div class="outline-text-3" id="text-5-6">
<ul class="org-ul">
<li>於終端機(for windows: Anaconda prompt)下建立、啟用所需虛擬環境<br /></li>
<li>將環境滙至 jupyter kernel<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-shell">python -m ipykernel install --user --name &#34395;&#25836;&#29872;&#22659;&#21517;&#31281; --display-name <span style="color: #98be65;">"&#22312;jupyter&#20013;&#30340;&#21517;&#31281;"</span>
</pre>
</div>
<ul class="org-ul">
<li>啟動 jupyter<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orga610651" class="outline-3">
<h3 id="orga610651"><span class="section-number-3">5.7.</span> poetry</h3>
<div class="outline-text-3" id="text-5-7">
<p>
pip最主要的缺點在於套件的相依性。pip 在解決套-件之間的版本衝突時很容會遇到困難。它不具備先進的依賴解析算法，這可能導致不穩定的環境和不可預知的錯誤。更重要的是，移除套件時，pip 只會移除一個該套件，而不會移除其他相依的套件。也因此發展出針對套件相依性更好的工具，例poetry<sup><a id="fnr.25" class="footref" href="#fn.25" role="doc-backlink">25</a></sup>。<br />
</p>

<p>
Poetry 是一個現代化的套件管理工具，它不僅可以幫助我們管理套件的依賴，還提供了一個虛擬環境的解決方案。Poetry 使用一個 toml 檔 pyproject.toml 文件來管理專案配置和依賴，這符合 – Specifying Minimum Build System Requirements for Python Projects 所提倡的現代 Python 專案的依賴項管理<sup><a id="fnr.25.25" class="footref" href="#fn.25" role="doc-backlink">25</a></sup>。<br />
</p>
</div>
<div id="outline-container-orgd4547eb" class="outline-4">
<h4 id="orgd4547eb"><span class="section-number-4">5.7.1.</span> 安裝</h4>
<div class="outline-text-4" id="text-5-7-1">
<p>
for Python 3.8+<br />
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #ECBE7B;">curl</span> -sSL https://install.python-poetry.org | python3 -
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb17a5d7" class="outline-4">
<h4 id="orgb17a5d7"><span class="section-number-4">5.7.2.</span> 結合虛擬環境與專案</h4>
<div class="outline-text-4" id="text-5-7-2">
<div class="org-src-container">
<pre class="src src-shell">poetry config virtualenvs.in-project true
</pre>
</div>
</div>
</div>
<div id="outline-container-org37da6f5" class="outline-4">
<h4 id="org37da6f5"><span class="section-number-4">5.7.3.</span> 建立新專案</h4>
<div class="outline-text-4" id="text-5-7-3">
<p>
假設專案名稱為 tnfshbot<br />
</p>
<div class="org-src-container">
<pre class="src src-shell">poetry new tnfshbot
<span style="color: #ECBE7B;">cd</span> tnfshbot
poetry init
</pre>
</div>
</div>
</div>
<div id="outline-container-org5e85e58" class="outline-4">
<h4 id="org5e85e58"><span class="section-number-4">5.7.4.</span> 修改pyproject.toml</h4>
<div class="outline-text-4" id="text-5-7-4">
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span><span style="color: #51afef;">[</span>tool.poetry.dependencies<span style="color: #51afef;">]</span>
<span class="linenr">2: </span><span style="color: #dcaeea;">python</span> = <span style="color: #98be65;">"^3.12"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2e26652" class="outline-4">
<h4 id="org2e26652"><span class="section-number-4">5.7.5.</span> 安裝</h4>
<div class="outline-text-4" id="text-5-7-5">
<p>
當你手動添加了新的套件後(poetry add XXX)，使用 poetry install 將會：<br />
</p>
<ul class="org-ul">
<li>安裝 pyproject.toml 中列出的所有套件，包括新添加的與其依賴項。<br /></li>
<li>如果 poetry.lock 文件存在，它將依照該文件中固定的版本來安裝依賴項。<br /></li>
<li>如果 poetry.lock 文件不存在，它將創建一個新的，其中固定了依賴的版本。<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span>poetry install
</pre>
</div>
<p>
會生成一個.venv資料夾<br />
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span>poetry run python --version
</pre>
</div>
</div>
</div>
<div id="outline-container-org1e9bc43" class="outline-4">
<h4 id="org1e9bc43"><span class="section-number-4">5.7.6.</span> 新增tnfshbot/main.py</h4>
<div class="outline-text-4" id="text-5-7-6">
<p>
安裝新套件<br />
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span>poetry add pendulum
</pre>
</div>
<p>
執行python<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr">1: </span><span style="color: #51afef;">import</span> pendulum
<span class="linenr">2: </span><span style="color: #51afef;">import</span> sys
<span class="linenr">3: </span>
<span class="linenr">4: </span><span style="color: #c678dd;">print</span>(<span style="color: #98be65;">"Hello World!"</span>)
<span class="linenr">5: </span><span style="color: #c678dd;">print</span>(sys.version)
<span class="linenr">6: </span><span style="color: #c678dd;">print</span>(pendulum.now())
</pre>
</div>
<p>
執行方式為<br />
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span>poetry run python tnfshbot/main.py
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc81b768" class="outline-4">
<h4 id="orgc81b768"><span class="section-number-4">5.7.7.</span> 整個資料夾架構如下</h4>
<div class="outline-text-4" id="text-5-7-7">
<pre class="example" id="org20fd02a">
.
├── README.md
├── poetry.lock
├── pyproject.toml
├── tests
│   └── __init__.py
└── tnfshbot
    ├── __init__.py
    └── main.py
</pre>
</div>
</div>
<div id="outline-container-org1322612" class="outline-4">
<h4 id="org1322612"><span class="section-number-4">5.7.8.</span> pyproject.toml</h4>
<div class="outline-text-4" id="text-5-7-8">
</div>
<div id="outline-container-org96573cc" class="outline-5">
<h5 id="org96573cc">精確版本</h5>
<div class="outline-text-5" id="text-org96573cc">
<p>
指定一個精確的版本，意味著只有該特定版本會被接受。例如:<br />
</p>
<div class="org-src-container">
<pre class="src src-toml"><span class="linenr">1: </span>[<span style="color: #ECBE7B;">tool.poetry.dependencies</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">numpy</span> = <span style="color: #98be65;">"1.21.0"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd0b5043" class="outline-5">
<h5 id="orgd0b5043">版本範圍</h5>
<div class="outline-text-5" id="text-orgd0b5043">
<p>
可以使用比較運算符來指定一個版本範圍：<br />
</p>
<div class="org-src-container">
<pre class="src src-toml"><span class="linenr">1: </span>[<span style="color: #ECBE7B;">tool.poetry.dependencies</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">numpy</span> = <span style="color: #98be65;">"&gt;=1.21.0, &lt;2.0.0"</span>
</pre>
</div>
<p>
在上面的範例中，任何版本從 1.21.0 (含) 到 2.0.0 (不含) 都是可以接受的。<br />
</p>
</div>
</div>
<div id="outline-container-org7a9c579" class="outline-5">
<h5 id="org7a9c579">星字號</h5>
<div class="outline-text-5" id="text-org7a9c579">
<p>
使用星號（*）是允許任何兼容的版本：<br />
</p>
<div class="org-src-container">
<pre class="src src-toml"><span class="linenr">1: </span>[<span style="color: #ECBE7B;">tool.poetry.dependencies</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">numpy</span> = <span style="color: #98be65;">"1.21.*"</span>
</pre>
</div>
<p>
在上面的範例中，任何 1.21 系列的版本都是可以接受的。如<br />
</p>
</div>
</div>
<div id="outline-container-orgb28b149" class="outline-5">
<h5 id="orgb28b149">Caret</h5>
<div class="outline-text-5" id="text-orgb28b149">
<p>
使用Caret（^）可以指定一個允許任何相容的版本，但不會改變最左邊的非零數字：<br />
</p>
<div class="org-src-container">
<pre class="src src-toml"><span class="linenr">1: </span>[<span style="color: #ECBE7B;">tool.poetry.dependencies</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">numpy</span> = <span style="color: #98be65;">"^1.21.0"</span>
</pre>
</div>
<p>
這將允許 1.21.0 以及任何更高但低於 2.0.0 的版本。<br />
</p>
</div>
</div>
<div id="outline-container-org613cbf8" class="outline-5">
<h5 id="org613cbf8">波浪號版本</h5>
<div class="outline-text-5" id="text-org613cbf8">
<p>
使用波浪號（~）可以指定一個允許在特定範圍內的版本：<br />
</p>
<div class="org-src-container">
<pre class="src src-toml"><span class="linenr">1: </span>[<span style="color: #ECBE7B;">tool.poetry.dependencies</span>] numpy = <span style="color: #98be65;">"~1.21.0"</span>
</pre>
</div>
<p>
這會允許 1.21.0 以及任何更高但低於 1.22.0 的版本。<br />
</p>
</div>
</div>
<div id="outline-container-orgb9acbf0" class="outline-5">
<h5 id="orgb9acbf0">多版本指定</h5>
<div class="outline-text-5" id="text-orgb9acbf0">
<p>
你也可以指定多個版本，並且只要符合其中一個條件就可以：<br />
</p>
<div class="org-src-container">
<pre class="src src-toml"><span class="linenr">1: </span>[<span style="color: #ECBE7B;">tool.poetry.dependencies</span>]
<span class="linenr">2: </span><span style="color: #dcaeea;">numpy</span> = [ <span style="color: #98be65;">"&gt;=1.20.0, &lt;1.21.0"</span>, <span style="color: #98be65;">"&gt;=1.22.0, &lt;1.23.0"</span> ]
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3091be1" class="outline-4">
<h4 id="org3091be1"><span class="section-number-4">5.7.9.</span> poetry update</h4>
<div class="outline-text-4" id="text-5-7-9">
<p>
在添加新的依賴後使用 poetry update 將會<sup><a id="fnr.26" class="footref" href="#fn.26" role="doc-backlink">26</a></sup>：<br />
</p>
<ul class="org-ul">
<li>更新所有依賴到最新可用版本，並更新 poetry.lock 文件。<br /></li>
<li>它會安裝新添加的套件和更新所有其他依賴。<br /></li>
<li>這個指令超級強大，更新套件版本時也解析並更新依賴。有更新過 Python 套件的人常常都會受到依賴項衝突所困，用這個指令就能簡單解決了。<br /></li>
<li>可以指定要更新什麼套件，例如說 poetry update pendulum<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgd302c59" class="outline-4">
<h4 id="orgd302c59"><span class="section-number-4">5.7.10.</span> poetry to jupyter kenrel</h4>
<div class="outline-text-4" id="text-5-7-10">
<div class="org-src-container">
<pre class="src src-shell"><span class="linenr">1: </span>poetry run ipython kernel install --name=tnfshbot --user
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orga2e6987" class="outline-2">
<h2 id="orga2e6987"><span class="section-number-2">6.</span> <span class="todo TODO">TODO</span> Multiprocessing</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgd70056f" class="outline-3">
<h3 id="orgd70056f"><span class="section-number-3">6.1.</span> 執行緒 vs. 程序</h3>
<div class="outline-text-3" id="text-6-1">
<p>
程序(process)是系統資源分配的最小單位，而一個程序可以有很多個執行緒(thread)。<br />
</p>

<p>
我們每次開啟一個python檔案，都是在開啟一個新的程序，而每個程序都有自己的記憶體空間，這些記憶體空間是獨立的，互不影響。那為什麼還需要去探討執行緒呢？因為執行緒是程序中最小的執行單位，當我們在一個程序中開啟多個執行緒時，這些執行緒會共享這個程序的記憶體空間，這樣就可以讓我們在同一個程序中同時執行多個任務。<br />
</p>
</div>
</div>
<div id="outline-container-org4be13a3" class="outline-3">
<h3 id="org4be13a3"><span class="section-number-3">6.2.</span> 非執行緒的程式</h3>
<div class="outline-text-3" id="text-6-2">
<p>
為了對照執行緒的程式，我們先來看一個非執行緒的程式，這個程式會依序執行三個函式，並且計算總共花了多少時間來執行這三個函式。<br />
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> time <span style="color: #51afef;">import</span> sleep, perf_counter
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">print_hello</span>(): <span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#27492;func&#25152;&#38656;&#22519;&#34892;&#26178;&#38291;&#25033;&#28858;1&#31186;</span>
<span class="linenr"> 4: </span>    <span style="color: #51afef;">for</span> i <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>):
<span class="linenr"> 5: </span>        sleep(<span style="color: #da8548; font-weight: bold;">0.1</span>)
<span class="linenr"> 6: </span>        <span style="color: #c678dd;">print</span>(<span style="color: #98be65;">'Says HELLO!'</span>)
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">print_message</span>(message): <span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#27492;func&#25152;&#38656;&#22519;&#34892;&#26178;&#38291;&#25033;&#28858;1&#31186;</span>
<span class="linenr"> 9: </span>    <span style="color: #51afef;">for</span> i <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>):
<span class="linenr">10: </span>        sleep(<span style="color: #da8548; font-weight: bold;">0.1</span>)
<span class="linenr">11: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'Print </span>{message}<span style="color: #98be65;">!'</span>)
<span class="linenr">12: </span>
<span class="linenr">13: </span><span style="color: #dcaeea;">start</span> = perf_counter()
<span class="linenr">14: </span>
<span class="linenr">15: </span>print_hello()
<span class="linenr">16: </span>print_hello()
<span class="linenr">17: </span>print_message(<span style="color: #98be65;">'FUNCETION 3'</span>)
<span class="linenr">18: </span>
<span class="linenr">19: </span><span style="color: #dcaeea;">end</span> = perf_counter()
<span class="linenr">20: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'Time taken: </span>{end - start:.2f}<span style="color: #98be65;"> seconds'</span>)
<span class="linenr">21: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'All done!'</span>)
<span class="linenr">22: </span>
</pre>
</div>

<pre class="example" id="org021c6d9">
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Says HELLO!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Print FUNCETION 3!
Time taken: 3.11 seconds
All done!
</pre>
</div>
</div>
<div id="outline-container-org8bf6ec6" class="outline-3">
<h3 id="org8bf6ec6"><span class="section-number-3">6.3.</span> 建立及執行執行緒</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">
<pre class="src src-python"><span class="linenr"> 1: </span><span style="color: #51afef;">from</span> threading <span style="color: #51afef;">import</span> current_thread, Thread <span style="color: #51afef;">as</span> Thread
<span class="linenr"> 2: </span><span style="color: #51afef;">from</span> time <span style="color: #51afef;">import</span> sleep, perf_counter
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">print_hello</span>(): <span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#27492;func&#25152;&#38656;&#22519;&#34892;&#26178;&#38291;&#25033;&#28858;1&#31186;</span>
<span class="linenr"> 5: </span>    <span style="color: #51afef;">for</span> i <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>):
<span class="linenr"> 6: </span>        sleep(<span style="color: #da8548; font-weight: bold;">0.1</span>)
<span class="linenr"> 7: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'</span>{current_thread().name}<span style="color: #98be65;"> says HELLO!'</span>)
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #51afef;">def</span> <span style="color: #c678dd;">print_message</span>(message): <span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#27492;func&#25152;&#38656;&#22519;&#34892;&#26178;&#38291;&#25033;&#28858;1&#31186;</span>
<span class="linenr">10: </span>    <span style="color: #51afef;">for</span> i <span style="color: #51afef;">in</span> <span style="color: #c678dd;">range</span>(<span style="color: #da8548; font-weight: bold;">10</span>):
<span class="linenr">11: </span>        sleep(<span style="color: #da8548; font-weight: bold;">0.1</span>)
<span class="linenr">12: </span>        <span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'</span>{current_thread().name}<span style="color: #98be65;"> says </span>{message}<span style="color: #98be65;">!'</span>)
<span class="linenr">13: </span>
<span class="linenr">14: </span><span style="color: #dcaeea;">start</span> = perf_counter()
<span class="linenr">15: </span>
<span class="linenr">16: </span><span style="color: #dcaeea;">thread1</span> = Thread(target=print_hello, name=<span style="color: #98be65;">'Thread 1'</span>)
<span class="linenr">17: </span><span style="color: #dcaeea;">thread2</span> = Thread(target=print_hello, name=<span style="color: #98be65;">'Thread 2'</span>)
<span class="linenr">18: </span><span style="color: #dcaeea;">thread3</span> = Thread(target=print_message, args=(<span style="color: #98be65;">'This is Thread 3'</span>,), name=<span style="color: #98be65;">'Thread 3'</span>)
<span class="linenr">19: </span>
<span class="linenr">20: </span>thread1.start()
<span class="linenr">21: </span>thread2.start()
<span class="linenr">22: </span>thread3.start()
<span class="linenr">23: </span>
<span class="linenr">24: </span>thread1.join()
<span class="linenr">25: </span>thread2.join()
<span class="linenr">26: </span>thread3.join()
<span class="linenr">27: </span>
<span class="linenr">28: </span><span style="color: #dcaeea;">end</span> = perf_counter()
<span class="linenr">29: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'Time taken: </span>{end - start:.2f}<span style="color: #98be65;"> seconds'</span>)
<span class="linenr">30: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'Current thread: </span>{current_thread().name}<span style="color: #98be65;">'</span>)
<span class="linenr">31: </span><span style="color: #c678dd;">print</span>(f<span style="color: #98be65;">'All done!'</span>)
<span class="linenr">32: </span>
</pre>
</div>

<pre class="example" id="org5399245">
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 3 says This is Thread 3!
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 2 says HELLO!
Thread 1 says HELLO!
Thread 3 says This is Thread 3!
Thread 2 says HELLO!
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 1 says HELLO!
Thread 2 says HELLO!
Thread 3 says This is Thread 3!
Thread 1 says HELLO!
Time taken: 1.05 seconds
Current thread: MainThread
All done!
</pre>

<p>
上述程式中，我們建立了三個執行緒:<br />
</p>
<ul class="org-ul">
<li>thread1 和 thread2，這兩個執行緒都會執行 print_hello 函式，<br /></li>
<li>第三個執行緒 thread3 則會執行 print_message 函式。<br /></li>
</ul>

<p>
仔細觀察執行輸出，我們可以發現兩項重要的事項：<br />
</p>
<ol class="org-ol">
<li>這三個執行緒都是 <b>同時</b> 執行的，所以我們可以看到它們的輸出是交錯在一起的<br /></li>
<li>照理說這三個執行緒都需要 1 秒的時間來執行，但實際上卻只花了 1.05 秒，這是因為這三個執行緒是同時執行的，所以它們的執行時間是重疊的。<br /></li>
</ol>

<p>
這就是為什麼我們需要使用執行緒的原因，因為它可以讓我們在同一個程序中同時執行多個任務，這樣就可以提高我們的程式效率。<br />
</p>
</div>
</div>
<div id="outline-container-org6604e02" class="outline-3">
<h3 id="org6604e02"><span class="section-number-3">6.4.</span> Futher Reading</h3>
<div class="outline-text-3" id="text-6-4">

<div id="org60cea41" class="figure">
<p><img src="images/multi.png" alt="multi.png" width="500" /><br />
</p>
<p><span class="figure-number">Figure 2: </span>Multiprocessing v.s. Multithreading</p>
</div>
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=fKl2JW_qrso">Python Multiprocessing Tutorial: Run Code in Parallel Using the Multiprocessing Module</a><br /></li>
<li><a href="https://levelup.gitconnected.com/diy-multithreading-vs-multiprocessing-in-python-fb93698ca7f3">DIY: Multithreading vs Multiprocessing in Python</a><br /></li>
<li><a href="https://medium.com/erens-tech-book/%E7%90%86%E8%A7%A3-process-thread-94a40721b492">【恐龍】理解 Process &amp; Thread</a><br /></li>
<li><a href="https://qing-yao.blogspot.com/2016/08/writeByMind-2.html">多執行緒 vs 多進程</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgf342f6b" class="outline-2">
<h2 id="orgf342f6b"><span class="section-number-2">7.</span> <span class="todo TODO">TODO</span> Interactive Plots in Jupyter Notebook</h2>
<div class="outline-text-2" id="text-7">
<p>
<a href="https://www.youtube.com/watch?v=rkBPgTL-D3Y">https://www.youtube.com/watch?v=rkBPgTL-D3Y</a><br />
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10221255">Python - 淺複製(shallow copy)與深複製(deep copy)</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://medium.com/datainpoint/python-essentials-conda-quickstart-1f1e9ecd1025">輕鬆學習 Python：conda 的核心功能</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3" role="doc-backlink">3</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://stackoverflow.com/questions/30034840/what-are-the-differences-between-conda-and-anaconda">What are the differences between Conda nd Anaconda?</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4" role="doc-backlink">4</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjoq476trjpAhUKK6YKHZKAAc8QFjAAegQIAxAB&amp;url=https%3A%2F%2Fkknews.cc%2Fzh-tw%2Fcode%2F9j99vnl.html&amp;usg=AOvVaw0eaDh9T-x0LmUEjD4Vq0AX">分分鐘學會用python爬蟲框架Scrapy爬取心目中女神</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5" role="doc-backlink">5</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://blog.gtwang.org/programming/python-beautiful-soup-module-scrape-web-pages-tutorial/">Python 使用 Beautiful Soup 抓取與解析網頁資料，開發網路爬蟲教學</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6" role="doc-backlink">6</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://kknews.cc/zh-tw/code/ba95qx6.html">python爬蟲CSS 選擇器-BeautifulSoup4</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7" role="doc-backlink">7</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://freelancerlife.info/zh/blog/python%E7%B6%B2%E8%B7%AF%E7%88%AC%E8%9F%B2%E6%95%99%E5%AD%B8-selenium%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">python網路爬蟲教學-Selenium基本操作</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8" role="doc-backlink">8</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://learngeb-ebook.readbook.tw/intro/selenium.html">[認識 Selenium</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9" role="doc-backlink">9</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://djangogirlstaipei.gitbooks.io/django-girls-taipei-tutorial/django/introduction.html">Django 介紹</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10" role="doc-backlink">10</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://blog.techbridge.cc/2017/06/03/python-web-flask101-tutorial-introduction-and-environment-setup/">Python Web Flask 實戰開發教學</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11" role="doc-backlink">11</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://blog.techbridge.cc/2017/07/28/data-science-101-numpy-tutorial/">從零開始學資料科學：Numpy 基礎入門</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12" role="doc-backlink">12</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10193295">[Day05]聊聊重要的三個package吧！ </a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.13" class="footnum" href="#fnr.13" role="doc-backlink">13</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://medium.com/python-%E8%B3%87%E6%96%99%E8%A6%96%E8%A6%BA%E5%8C%96/python-%E5%95%86%E6%A5%AD%E6%95%B8%E6%93%9A%E5%88%86%E6%9E%90%E8%88%87%E5%8F%AF%E8%A6%96%E5%8C%96%E7%B9%AA%E5%9C%96-3-1%E8%AC%9B-matplotlib-%E4%BB%8B%E7%B4%B9-e1928f7dfd35">[Python 商業數據分析之可視化繪圖] 第3.1講：Matplotlib 介紹</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.14" class="footnum" href="#fnr.14" role="doc-backlink">14</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://killer0001.blogspot.com/2018/09/1-seaborn.html"> Seaborn 介紹 </a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.15" class="footnum" href="#fnr.15" role="doc-backlink">15</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://kknews.cc/zh-tw/code/9z88248.html">python數據可視化（一）seaborn介紹及繪圖風格設置</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.16" class="footnum" href="#fnr.16" role="doc-backlink">16</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://www.lizenghai.com/archives/65323.html">R語言ggplot2系列1-ggplot2簡介</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.17" class="footnum" href="#fnr.17" role="doc-backlink">17</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://www.itread01.com/content/1551725786.html">機器學習入門之sklearn介紹</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.18" class="footnum" href="#fnr.18" role="doc-backlink">18</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://clay-atlas.com/blog/2019/07/30/%E3%80%90nlp%E3%80%91nltk-%E5%9F%BA%E6%9C%AC%E6%95%99%E5%AD%B8/">英文自然語言處理的經典工具: NLTK</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.19" class="footnum" href="#fnr.19" role="doc-backlink">19</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10215969?sc=iThelpR">[Day-1] Tensorflow 介紹 及 Tensorflow 2.0相關知識 </a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.20" class="footnum" href="#fnr.20" role="doc-backlink">20</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://towardsdatascience.com/deep-learning-framework-power-scores-2018-23607ddf297a">Deep Learning Framework Power Scores 2018<br />
</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.21" class="footnum" href="#fnr.21" role="doc-backlink">21</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://makerpro.cc/2019/06/self-learning-series5-of-ai/">【自學AI#5】深度學習必備：Keras、Jupyter安裝教學</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.22" class="footnum" href="#fnr.22" role="doc-backlink">22</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://medium.com/chiukevin0321/tensorflow%E8%88%87keras%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%B4%B9-621352fc7150">Tensorflow與Keras基本介紹</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.23" class="footnum" href="#fnr.23" role="doc-backlink">23</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://medium.com/pyladies-taiwan/%E6%B7%B1%E5%BA%A6%E5%AD%B8%E7%BF%92%E6%96%B0%E6%89%8B%E6%9D%91-pytorch%E5%85%A5%E9%96%80-511df3c1c025">深度學習新手村：PyTorch入門</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.24" class="footnum" href="#fnr.24" role="doc-backlink">24</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10192460">Day01 Anaconda環境安裝!</a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.25" class="footnum" href="#fnr.25" role="doc-backlink">25</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10322014">全端 LLM 應用開發-Day03-Poetry 入門 </a><br />
</p></div></div>

<div class="footdef"><sup><a id="fn.26" class="footnum" href="#fnr.26" role="doc-backlink">26</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://ithelp.ithome.com.tw/articles/10323102">全端 LLM 應用開發-Day05-Poetry 其他重要指令 </a><br />
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Yung-Chin Yen</p>
<p class="date">Created: 2025-04-28 Mon 16:22</p>
</div>
</body>
</html>
